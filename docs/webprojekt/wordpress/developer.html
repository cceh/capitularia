

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Developer Notes &mdash; Capitularia 0.1.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/my_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Capitularia VM" href="../../vm.html" />
    <link rel="prev" title="Library" href="plugins/lib.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Capitularia
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../intro.html#platforms">Platforms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../overviews.html">Overviews</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../overviews/html_generation.html">HTML Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../overviews/html_generation.html#xslt-transformations">XSLT Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../overviews/html_generation.html#user-delivery">User Delivery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../overviews/collation_tool.html">Overview of the Collation Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../overviews/collation_tool.html#pre-processing-of-the-tei-files">Pre-Processing of the TEI files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../overviews/collation_tool.html#collation">Collation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../overviews/collation_tool.html#custom-version-of-collatex">Custom Version of CollateX</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../overviews/meta_search.html">Meta Search</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../overviews/meta_search.html#metadata-extraction">Metadata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../overviews/meta_search.html#fulltext-extraction">Fulltext Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../overviews/meta_search.html#search">Search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../overviews/collections.html">Collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../overviews/collections.html#algorithm">Algorithm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../webprojekt.html">RRZK Web Projekt Capitularia</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../wordpress.html">Wordpress Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Wordpress Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../database.html#metadata">Metadata</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../wordpress-custom.html">Wordpress Customizations</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="theme.html">Wordpress Theme</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugins.html">Wordpress Plugins</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Developer Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../vm.html">Capitularia VM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../vm/app_server.html">Application Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../vm/app_server.html#server">server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vm/app_server.html#module-data_server">data_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vm/app_server.html#module-collatex_server">collatex_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vm/app_server.html#module-geo_server">geo_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vm/app_server.html#module-tile_server">tile_server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../vm/database.html">Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../vm/database.html#schema-capitularia">Schema <em>capitularia:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vm/database.html#schema-gis">Schema <em>gis:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vm/database.html#module-db">db.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../vm/transformations.html">XSLT Transformations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../vm/transformations.html#graph-of-all-transformations">Graph of All Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vm/transformations.html#graph-of-stylesheet-dependencies">Graph of Stylesheet Dependencies</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Capitularia</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../webprojekt.html">RRZK Web Projekt Capitularia</a> &raquo;</li>
        
          <li><a href="../wordpress-custom.html">Wordpress Customizations</a> &raquo;</li>
        
      <li>Developer Notes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/webprojekt/wordpress/developer.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="developer-notes">
<span id="wp-dev"></span><h1>Developer Notes<a class="headerlink" href="#developer-notes" title="Permalink to this headline">¶</a></h1>
<p>Description of our development environment for Wordpress customizations.</p>
<p>Skills needed: Wordpress, PHP, JS, SCSS, Vue.js, jQuery, Bootstrap, Webpack,
Makefile.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#webpack" id="id4">webpack</a></p></li>
<li><p><a class="reference internal" href="#i18n-of-javascript" id="id5">i18n of Javascript</a></p>
<ul>
<li><p><a class="reference internal" href="#extract" id="id6">Extract</a></p>
<ul>
<li><p><a class="reference internal" href="#vue-files" id="id7">Vue Files</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#translate" id="id8">Translate</a></p></li>
<li><p><a class="reference internal" href="#enqueue-translations" id="id9">Enqueue Translations</a></p></li>
<li><p><a class="reference internal" href="#use-translated-strings" id="id10">Use translated strings</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="webpack">
<h2><a class="toc-backref" href="#id4">webpack</a><a class="headerlink" href="#webpack" title="Permalink to this headline">¶</a></h2>
<p>We use webpack to compile all our JS and CSS modules.</p>
<p>Webpack generates a manifest file in <code class="file docutils literal notranslate"><span class="pre">dist/manifest.json</span></code>
that contains the public path to all compiled modules.</p>
<p>The theme and plugins load all JS code through the function:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">\cceh\capitularia\lib\enqueue_from_manifest ($key, $dependencies = array ())</span>
</pre></div>
</div>
<p>where <code class="code docutils literal notranslate"><span class="pre">$key</span></code> ist the key in the manifest file.</p>
<p>To build production files compile with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>webpack --config webpack.prod.js
</pre></div>
</div>
<p>To build development files and enable hot module reloading (HMR) compile with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>webpack-dev-server --config webpack.dev.js
</pre></div>
</div>
<p>webpack-dev-server adds some code to your JS to enable HMR.  Once loaded into
Wordpress this code opens a socket to the webpack-dev-server and awaits
commands.  When webpack-dev-server detects a source code change it compiles the
changed modules into hot-update.js files and sends a reload command down the
socket.  The HMR code in your app then tries to reload the changed modules
preserving application state.  If it fails to do so it will fallback on
reloading the whole page (and losing application state).</p>
<p>Example webpack config:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">merge</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span> <span class="p">(</span><span class="s1">&#39;webpack-merge&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">chokidar</span> <span class="o">=</span> <span class="nx">require</span> <span class="p">(</span><span class="s1">&#39;chokidar&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">common</span> <span class="o">=</span> <span class="nx">require</span> <span class="p">(</span><span class="s1">&#39;./webpack.common.js&#39;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">host</span>    <span class="o">=</span> <span class="s1">&#39;capitularia.fritz.box&#39;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">devHost</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">devPort</span> <span class="o">=</span> <span class="mi">8081</span><span class="p">;</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">merge</span> <span class="p">(</span><span class="nx">common</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">mode</span>    <span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
    <span class="nx">devtool</span> <span class="o">:</span> <span class="s1">&#39;eval-source-map&#39;</span><span class="p">,</span>
    <span class="nx">output</span>  <span class="o">:</span> <span class="p">{</span>
        <span class="nx">publicPath</span> <span class="o">:</span> <span class="sb">`http://</span><span class="si">${</span><span class="nx">devHost</span><span class="si">}</span><span class="sb">:</span><span class="si">${</span><span class="nx">devPort</span><span class="si">}</span><span class="sb">/`</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="nx">module</span> <span class="o">:</span> <span class="p">{</span>
        <span class="nx">rules</span> <span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="nx">test</span> <span class="o">:</span> <span class="sr">/\.s?css$/</span><span class="p">,</span>
                <span class="nx">use</span>  <span class="o">:</span> <span class="p">[</span>
                    <span class="s1">&#39;style-loader&#39;</span><span class="p">,</span>
                    <span class="p">{</span>
                        <span class="nx">loader</span>  <span class="o">:</span> <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span>
                        <span class="nx">options</span> <span class="o">:</span> <span class="p">{</span>
                            <span class="nx">importLoaders</span> <span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="s1">&#39;postcss-loader&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;sass-loader&#39;</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">},</span>
        <span class="p">],</span>
    <span class="p">},</span>
    <span class="nx">devServer</span> <span class="o">:</span> <span class="p">{</span>
        <span class="nx">host</span>        <span class="o">:</span> <span class="nx">devHost</span><span class="p">,</span>
        <span class="nx">port</span>        <span class="o">:</span> <span class="nx">devPort</span><span class="p">,</span>
        <span class="nx">contentBase</span> <span class="o">:</span> <span class="s1">&#39;./dist&#39;</span><span class="p">,</span>

        <span class="c1">// Enable hot module reloading (HMR).</span>
        <span class="nx">hot</span>        <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">liveReload</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

        <span class="c1">// write images because we still load them the traditional way</span>
        <span class="nx">writeToDisk</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

        <span class="c1">// Needed because we access port devPort from port 80.</span>
        <span class="nx">allowedHosts</span> <span class="o">:</span> <span class="p">[</span><span class="nx">host</span><span class="p">],</span>
        <span class="nx">headers</span>      <span class="o">:</span> <span class="p">{</span> <span class="s1">&#39;Access-Control-Allow-Origin&#39;</span> <span class="o">:</span> <span class="sb">`http://</span><span class="si">${</span><span class="nx">host</span><span class="si">}</span><span class="sb">`</span> <span class="p">},</span>

        <span class="c1">// Watch for changes to PHP files and reload the page when one changes.</span>
        <span class="c1">// See: https://mikeselander.com/hot-reloading-using-webpack-with-php-file-changes/</span>
        <span class="nx">before</span> <span class="p">(</span><span class="nx">app</span><span class="p">,</span> <span class="nx">server</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">chokidar</span>
                <span class="p">.</span><span class="nx">watch</span> <span class="p">([</span><span class="s1">&#39;themes/**/*.php&#39;</span><span class="p">,</span> <span class="s1">&#39;plugins/*/*.php&#39;</span><span class="p">],</span> <span class="p">{</span>
                    <span class="nx">alwaysStat</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="nx">atomic</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">followSymlinks</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">ignoreInitial</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="nx">persistent</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="nx">usePolling</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="p">})</span>
                <span class="p">.</span><span class="nx">on</span> <span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
                    <span class="nx">server</span><span class="p">.</span><span class="nx">sockWrite</span> <span class="p">(</span><span class="nx">server</span><span class="p">.</span><span class="nx">sockets</span><span class="p">,</span> <span class="s1">&#39;content-changed&#39;</span><span class="p">);</span>
                <span class="p">});</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="i18n-of-javascript">
<h2><a class="toc-backref" href="#id5">i18n of Javascript</a><a class="headerlink" href="#i18n-of-javascript" title="Permalink to this headline">¶</a></h2>
<p>Internationalization consists of these steps:</p>
<ol class="arabic simple">
<li><p>Extract the strings to translate from the source files.</p></li>
<li><p>Translate the strings and compile them into a .json file (in jed format).</p></li>
<li><p>Make the .json file available to your JS module.</p></li>
<li><p>Use the Wordpress <code class="file docutils literal notranslate"><span class="pre">wp-i18n.js</span></code> library to translate the strings at
runtime.</p></li>
</ol>
<div class="section" id="extract">
<h3><a class="toc-backref" href="#id6">Extract</a><a class="headerlink" href="#extract" title="Permalink to this headline">¶</a></h3>
<p>There are 3 kinds of source files: PHP files, JS files and Vue single component
files.  PHP and JS files can be extracted using the GNU xgettext utility.</p>
<p>In JS files, use the <code class="xref py py-func docutils literal notranslate"><span class="pre">__</span> <span class="pre">()</span></code> function:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">__</span> <span class="p">(</span><span class="s1">&#39;Message to translate&#39;</span><span class="p">,</span> <span class="nx">DOMAIN</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="vue-files">
<h4><a class="toc-backref" href="#id7">Vue Files</a><a class="headerlink" href="#vue-files" title="Permalink to this headline">¶</a></h4>
<p>Vue single component files contain 3 sections: HTML, JS, and CSS.  The CSS
section does not need to be translated.</p>
<p>In the JS section of Vue files, use the <code class="xref py py-func docutils literal notranslate"><span class="pre">$t</span> <span class="pre">()</span></code> function:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">$t</span> <span class="p">(</span><span class="s1">&#39;Message to translate&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>This function tags the message for the string extractor and also translates
the string at runtime.</p>
<p>In The HTML template section of Vue files, you may use 3 different methods to
tag translatable strings:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">h2</span> <span class="na">v-translate</span><span class="p">&gt;</span>Header to translate<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ &#39;Text to translate&#39; | translate }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;$t (&#39;Tooltip to translate&#39;)&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>To extract the strings from the Vue files we use
<a class="reference external" href="https://github.com/Polyconseil/easygettext">easygettext</a>.</p>
</div>
</div>
<div class="section" id="translate">
<h3><a class="toc-backref" href="#id8">Translate</a><a class="headerlink" href="#translate" title="Permalink to this headline">¶</a></h3>
<p>Use poedit to translate the extracted strings.</p>
<p>To compile .po files into .json files in jed-format we use
<a class="reference external" href="https://github.com/mikeedwards/po2json">po2json</a>.</p>
</div>
<div class="section" id="enqueue-translations">
<h3><a class="toc-backref" href="#id9">Enqueue Translations</a><a class="headerlink" href="#enqueue-translations" title="Permalink to this headline">¶</a></h3>
<p>Wordpress boilerplate to make translations available in PHP and JS files:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Wordpress boilerplate</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">use cceh\capitularia\lib;</span>

<span class="x">const DOMAIN = &#39;my-text-domain&#39;;</span>

<span class="x">function enqueue_scripts ()</span>
<span class="x">{</span>
<span class="x">    $key = &#39;my-module&#39;; // key from manifest.json</span>

<span class="x">    // enqueue webpacked JS module</span>
<span class="x">    lib\enqueue_from_manifest (&quot;$key.js&quot;, [</span>
<span class="x">        &#39;another-module.js&#39;,</span>
<span class="x">    ]);</span>

<span class="x">    // enqueue extracted (minified) CSS</span>
<span class="x">    lib\enqueue_from_manifest (&quot;$key.css&quot;, [</span>
<span class="x">        &#39;another-module.css&#39;</span>
<span class="x">    ]);</span>

<span class="x">    // translations in PHP files</span>
<span class="x">    lib\load_textdomain (DOMAIN);</span>

<span class="x">    // translations in JS files</span>
<span class="x">    lib\wp_set_script_translations (&quot;$key.js&quot;, DOMAIN);</span>
<span class="x">}</span>
</pre></div>
</div>
</div>
<p>See also:
<a class="reference external" href="https://make.wordpress.org/core/2018/11/09/new-javascript-i18n-support-in-wordpress/">https://make.wordpress.org/core/2018/11/09/new-javascript-i18n-support-in-wordpress/</a></p>
</div>
<div class="section" id="use-translated-strings">
<h3><a class="toc-backref" href="#id10">Use translated strings</a><a class="headerlink" href="#use-translated-strings" title="Permalink to this headline">¶</a></h3>
<p>In JS simply use the functions made available by the <code class="file docutils literal notranslate"><span class="pre">wp-i18n.js</span></code> library.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Javascript boilerplate</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">__</span><span class="p">,</span> <span class="nx">_x</span><span class="p">,</span> <span class="nx">_n</span><span class="p">,</span> <span class="nx">_nx</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">wp</span><span class="p">.</span><span class="nx">i18n</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">DOMAIN</span> <span class="o">=</span> <span class="s1">&#39;my-text-domain&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">__</span> <span class="p">(</span><span class="s1">&#39;Message to translate&#39;</span><span class="p">,</span> <span class="nx">DOMAIN</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>Vue boilerplate to enable translations in HTML templates:
Put this in main.js before initializing your Vue app.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Vue.js boilerplate</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">DOMAIN</span> <span class="o">=</span> <span class="s1">&#39;my-text-domain&#39;</span><span class="p">;</span>

<span class="c1">// wrapper to call the Wordpress translate function</span>
<span class="kd">function</span> <span class="nx">$t</span> <span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">wp</span><span class="p">.</span><span class="nx">i18n</span><span class="p">.</span><span class="nx">__</span> <span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">DOMAIN</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// the vm.$t function</span>
<span class="nx">Vue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">$t</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">$t</span> <span class="p">(</span><span class="nx">text</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// the {{ &#39;text&#39; | translate }} filter</span>
<span class="nx">Vue</span><span class="p">.</span><span class="nx">filter</span> <span class="p">(</span><span class="s1">&#39;translate&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">$t</span> <span class="p">(</span><span class="nx">text</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// the v-translate directive</span>
<span class="nx">Vue</span><span class="p">.</span><span class="nx">directive</span> <span class="p">(</span><span class="s1">&#39;translate&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">=</span> <span class="nx">$t</span> <span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">innerText</span><span class="p">.</span><span class="nx">trim</span> <span class="p">()));</span>
<span class="p">});</span>

<span class="k">new</span> <span class="nx">Vue</span> <span class="p">(...);</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../vm.html" class="btn btn-neutral float-right" title="Capitularia VM" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="plugins/lib.html" class="btn btn-neutral float-left" title="Library" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-20 CCeH - Licensed under the GNU GPL v3 or later

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>