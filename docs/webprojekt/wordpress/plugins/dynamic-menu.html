

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Dynamic Menu &mdash; Capitularia 0.1.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/my_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Library" href="lib.html" />
    <link rel="prev" title="Page Generator" href="page-generator.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Capitularia
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../intro.html#platforms">Platforms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../overviews.html">Overviews</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../overviews/html_generation.html">HTML Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/html_generation.html#xslt-transformations">XSLT Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/html_generation.html#user-delivery">User Delivery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../overviews/collation_tool.html">Overview of the Collation Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/collation_tool.html#pre-processing-of-the-tei-files">Pre-Processing of the TEI files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/collation_tool.html#collation">Collation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/collation_tool.html#custom-version-of-collatex">Custom Version of CollateX</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../overviews/meta_search.html">Meta Search</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/meta_search.html#metadata-extraction">Metadata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/meta_search.html#fulltext-extraction">Fulltext Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/meta_search.html#search">Search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../overviews/collections.html">Collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/collections.html#algorithm">Algorithm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../webprojekt.html">RRZK Web Projekt Capitularia</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../wordpress.html">Wordpress Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../database.html">Wordpress Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../database.html#metadata">Metadata</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../../wordpress-custom.html">Wordpress Customizations</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../theme.html">Wordpress Theme</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../plugins.html">Wordpress Plugins</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../vm.html">Capitularia VM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../vm/app_server.html">Application Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../vm/app_server.html#server">server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vm/app_server.html#module-data_server">data_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vm/app_server.html#module-collatex_server">collatex_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vm/app_server.html#module-geo_server">geo_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vm/app_server.html#module-tile_server">tile_server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../vm/database.html">Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../vm/database.html#schema-capitularia">Schema <em>capitularia:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vm/database.html#schema-gis">Schema <em>gis:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vm/database.html#module-db">db.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../vm/transformations.html">XSLT Transformations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../vm/transformations.html#pages">Pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vm/transformations.html#lists">Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vm/transformations.html#graph-of-all-transformations">Graph of All Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vm/transformations.html#graph-of-stylesheet-dependencies">Graph of Stylesheet Dependencies</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Capitularia</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../webprojekt.html">RRZK Web Projekt Capitularia</a> &raquo;</li>
        
          <li><a href="../../wordpress-custom.html">Wordpress Customizations</a> &raquo;</li>
        
          <li><a href="../plugins.html">Wordpress Plugins</a> &raquo;</li>
        
      <li>Dynamic Menu</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/webprojekt/wordpress/plugins/dynamic-menu.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dynamic-menu">
<span id="id1"></span><h1>Dynamic Menu<a class="headerlink" href="#dynamic-menu" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#plugins-cap-dynamic-menu-cap-dynamic-menu-php" id="id2">plugins/cap-dynamic-menu/cap-dynamic-menu.php</a></p></li>
<li><p><a class="reference internal" href="#plugins-cap-dynamic-menu-functions-php" id="id3">plugins/cap-dynamic-menu/functions.php</a></p></li>
<li><p><a class="reference internal" href="#plugins-dynamic-menu" id="id4">plugins/dynamic-menu</a></p></li>
</ul>
</div>
<span class="target" id="module-plugins.cap-dynamic-menu.cap-dynamic-menu"></span><div class="section" id="plugins-cap-dynamic-menu-cap-dynamic-menu-php">
<h2><a class="toc-backref" href="#id2">plugins/cap-dynamic-menu/cap-dynamic-menu.php</a><a class="headerlink" href="#plugins-cap-dynamic-menu-cap-dynamic-menu-php" title="Permalink to this headline">¶</a></h2>
<p>Capitularia Dynamic Menu plugin.</p>
<p>The <em>Dynamic Menu plugin</em> provides a navigation menu for the sidebar.  The
menu entries are collected from DOM elements and attributes of the HTML page
and allow the user to navigate to portions of the document.  The menu entries
may be nested.</p>
<p>You may configure the menu with xpath expressions, eg.to build a menu from
all &lt;h3&gt;, &lt;h4&gt;, and &lt;h5&gt; tags on the page.  The menu entries will be properly
nested.</p>
<p>The PHP code only outputs a placeholder tag.  The Javascript code will build
the actual menu using the DOM of the page.</p>
<p>See: src/js/front.js</p>
<span class="target" id="namespace-cceh\capitularia\dynamic_menu"></span><dl class="const">
<dt id="cceh\capitularia\dynamic_menu\LANG">
<em class="property">constant </em><code class="sig-name descname">LANG</code><a class="headerlink" href="#cceh\capitularia\dynamic_menu\LANG" title="Permalink to this definition">¶</a></dt>
<dd><p>‘cap-dynamic-menu’</p>
<p>The Text Domain</p>
</dd></dl>

<span class="target" id="module-plugins.cap-dynamic-menu.functions"></span></div>
<div class="section" id="plugins-cap-dynamic-menu-functions-php">
<h2><a class="toc-backref" href="#id3">plugins/cap-dynamic-menu/functions.php</a><a class="headerlink" href="#plugins-cap-dynamic-menu-functions-php" title="Permalink to this headline">¶</a></h2>
<p>Capitularia Dynamic Menu global functions.</p>
<span class="target" id="namespace-cceh\capitularia\dynamic_menu"></span><dl class="function">
<dt id="cceh\capitularia\dynamic_menu\ns">
<code class="sig-name descname">ns</code><span class="sig-paren">(</span><em class="sig-param">$function_name</em><span class="sig-paren">)</span><a class="headerlink" href="#cceh\capitularia\dynamic_menu\ns" title="Permalink to this definition">¶</a></dt>
<dd><p>Add current namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>$function_name</strong> (<em>string</em>) – The class or function name without namespace</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Name with namespace</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="namespace-cceh\capitularia\dynamic_menu"></span><dl class="function">
<dt id="cceh\capitularia\dynamic_menu\load_html">
<code class="sig-name descname">load_html</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cceh\capitularia\dynamic_menu\load_html" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the content DOM.</p>
<p>Load the DOM of the current page.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The DOM of the current page</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>DomDocument</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="namespace-cceh\capitularia\dynamic_menu"></span><dl class="function">
<dt id="cceh\capitularia\dynamic_menu\on_init">
<code class="sig-name descname">on_init</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cceh\capitularia\dynamic_menu\on_init" title="Permalink to this definition">¶</a></dt>
<dd><p>Register the translations.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>void</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="namespace-cceh\capitularia\dynamic_menu"></span><dl class="function">
<dt id="cceh\capitularia\dynamic_menu\on_enqueue_scripts">
<code class="sig-name descname">on_enqueue_scripts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cceh\capitularia\dynamic_menu\on_enqueue_scripts" title="Permalink to this definition">¶</a></dt>
<dd><p>Enqueue Javascript and CSS for the front page.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>void</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="namespace-cceh\capitularia\dynamic_menu"></span><dl class="function">
<dt id="cceh\capitularia\dynamic_menu\on_wp_get_nav_menu_items">
<code class="sig-name descname">on_wp_get_nav_menu_items</code><span class="sig-paren">(</span><em class="sig-param">$items</em>, <em class="sig-param">$dummy_menu</em>, <em class="sig-param">$dummy_args</em><span class="sig-paren">)</span><a class="headerlink" href="#cceh\capitularia\dynamic_menu\on_wp_get_nav_menu_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Add dynamic items to the menu.</p>
<p>This just outputs a placeholder that will be processed by javascript.</p>
<p>See: src/js/front.js for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>$items</strong> (<em>array</em>) – Old items.</p></li>
<li><p><strong>$dummy_menu</strong> (<em>string</em>) – (unused) Menu.</p></li>
<li><p><strong>$dummy_args</strong> (<em>array</em>) – (unused) Menu args.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Updated menu.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-plugins/dynamic-menu"></span><div class="section" id="plugins-dynamic-menu">
<h2><a class="toc-backref" href="#id4">plugins/dynamic-menu</a><a class="headerlink" href="#plugins-dynamic-menu" title="Permalink to this headline">¶</a></h2>
<p>File: plugins/cap-dynamic-menu/src/js/front.js</p>
<p>The dynamic menu applet. The dynamic menu is generated from xpath expressions that query the page content. There is one xpath expression for every level of the menu. Use the standard wordpress admin interface to define the xpath expressions: To make a dynamic menu, insert a <em>Custom Link</em> item into any Wordpress menu and give it a magic url of: <code class="code docutils literal notranslate"><span class="pre">#cap_dynamic_menu#</span></code>. The <em>Custom Link</em> item will be replaced by the generated menu. Put all the xpath expressions for each level of the menu into the <em>Description</em> field. Separate each level with a <code class="code docutils literal notranslate"><span class="pre">§</span></code> (section sign). The default xpath expressions are: <code class="code docutils literal notranslate"><span class="pre">//h3[&#64;id]§//h4[&#64;id]§//h5[&#64;id]§//h6[&#64;id]</span></code>, which generate a 4 level deep menu built from all &lt;h3&gt;-&lt;h6&gt; elements that have an <code class="code docutils literal notranslate"><span class="pre">id</span></code> attribute. The caption of a generated menu item is taken from the <code class="code docutils literal notranslate"><span class="pre">data-cap-dyn-menu-caption</span></code> attribute on the source element or from the source element’s <code class="code docutils literal notranslate"><span class="pre">textContent</span></code>. All classes in the <em>CSS Classes</em> field in the Wordpress admin interface are copied over to each generated menu item along with a class <code class="code docutils literal notranslate"><span class="pre">$class-level-$level</span></code>. Eg. a class of <code class="code docutils literal notranslate"><span class="pre">my-menu</span></code> would become <code class="code docutils literal notranslate"><span class="pre">my_menu</span></code> and <code class="code docutils literal notranslate"><span class="pre">my-menu-level-1</span></code>. All classes on the elements matched with the xpath expressions, that start with <code class="code docutils literal notranslate"><span class="pre">dynamic-menu-</span></code>, are copied to each generated menu item. Additionally classes named <code class="code docutils literal notranslate"><span class="pre">menu-item</span></code>, <code class="code docutils literal notranslate"><span class="pre">dynamic-menu-item</span></code>, and <code class="code docutils literal notranslate"><span class="pre">dynamic-menu-item-level-$level</span></code> are added to each generated menu item. .. note:: We use webpack as a workaround to load javascript modules in Wordpress. Wordpress cannot load javascript modules thru enqueue_script () because it lacks an option to specify type=”module” on the &lt;script&gt; element. Webpack also packs babel-runtime for us. babel-runtime is required for async functions.</p>
<dl class="data">
<dt id="plugins/dynamic-menu.MAGIC">
<code class="sig-prename descclassname">plugins/dynamic-menu.</code><code class="sig-name descname">MAGIC</code><a class="headerlink" href="#plugins/dynamic-menu.MAGIC" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>#cap_dynamic_menu#
</pre></div>
</div>
<p>(string)
The magic href to make a menu dynamic</p>
</dd></dl>

<dl class="function">
<dt id="plugins/dynamic-menu.init_dynamic_menues">
<code class="sig-prename descclassname">plugins/dynamic-menu.</code><code class="sig-name descname">init_dynamic_menues</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#plugins/dynamic-menu.init_dynamic_menues" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize all dynamic menus on the page. This routine looks for the magic placeholder menu with a href of <code class="code docutils literal notranslate"><span class="pre">#cap_dynamic_menu#</span></code> and transmogrifies it into the real menu by going through the DOM of the page and adding all elements that fit the description.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lib.html" class="btn btn-neutral float-right" title="Library" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="page-generator.html" class="btn btn-neutral float-left" title="Page Generator" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-20 CCeH - Licensed under the GNU GPL v3 or later

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>