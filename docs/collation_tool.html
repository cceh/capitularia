

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Collation Tool &mdash; Capitularia 0.1.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/my_theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Collections" href="collections.html" />
    <link rel="prev" title="Capitularia Documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Capitularia
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Collation Tool</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#custom-version-of-collatex">Custom Version of CollateX</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#word-comparison-function">Word Comparison Function</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="collections.html">Collections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="collections.html#algorithm">Algorithm</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Capitularia</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Collation Tool</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/collation_tool.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="collation-tool">
<h1>Collation Tool<a class="headerlink" href="#collation-tool" title="Permalink to this headline">¶</a></h1>
<p>The collation tool has a frontend and a backend component.
The collatables are stored in TEI files.</p>
<div class="figure align-center" id="id3">
<p class="plantuml">
<img src="_images/plantuml-cca4f0b156e14931a26696e99f8e3c1db0cdd4eb.png" alt="skinparam backgroundColor transparent
skinparam DefaultTextAlignment center

component &quot;Frontend\n\n(Javascript)&quot; as client

component &quot;Backend\n\n(Wordpress Plugin)&quot; as api
component &quot;CollateX\n\n(Java)&quot;  as cx
component &quot;Transformation\n\n(XSLT)&quot;       as xslt

database &quot;TEI Files&quot;   as tei

client &lt;-&gt; api
api &lt;-&gt; cx
api &lt;-- xslt
xslt &lt;-- tei"/>
</p>
<p class="caption"><span class="caption-text">Collation Tool</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>The frontend is written in Javascript using the VueJS library.  It communicates
with the backend using AJAX calls.  The frontend displays the data to the user
and lets the user manipulate it, while the backend does the actual collation.</p>
<p>The collatables are stored in TEI files.  The backend has to be preprocessed
them to obtain streams of words with all markup stripped.  The streams of words
are then sent to CollateX to do the collation and finally to the frontend, who
formats and displays them.</p>
<p>The collatables are subdivided into capitularies and sections, so that only
short texts need to be collated, saving much processing time.  The backend also
extracts the wanted sections from the TEI files.</p>
<p>Currently and for historical reasons the backend is implemented as Wordpress
Plugin in PHP.  We plan to rewrite it ASAP using a Python application framework
and at the same time we’ll rewrite all the functionality we need of CollateX in
Python and drop the dependency on CollateX and Java.</p>
<div class="section" id="custom-version-of-collatex">
<h2>Custom Version of CollateX<a class="headerlink" href="#custom-version-of-collatex" title="Permalink to this headline">¶</a></h2>
<p>Our custom version of CollateX uses a custom word comparison function.</p>
<p>The stock version of CollateX <a class="reference internal" href="#collatex" id="id1">[CollateX]</a> uses word comparison functions that
only return binary values, signalling either a match or a mismatch.  Our custom
version uses a word comparison function that returns a similarity value between
0 and 1.  This works much better when aligning variant orthographies of the same
word.</p>
<p>In our custom CollateX we also implemented an enhancement of the
Needleman-Wunsch algorithm by Gotoh. <a class="reference internal" href="#gotoh1982" id="id2">[Gotoh1982]</a></p>
<div class="section" id="word-comparison-function">
<h3>Word Comparison Function<a class="headerlink" href="#word-comparison-function" title="Permalink to this headline">¶</a></h3>
<p>The word comparison function returns a similarity value between 0 and 1.</p>
<p>All words in the input texts are split into sets of trigrams.  This is done only
once.  The trigrams are obtained by first prefixing and suffixing the word with
two spaces respectively, then cutting the resulting string it into all possible
strings of length 3.  This means that trigrams may partially overlap each other.</p>
<p>The resulting sets of trigrams are then used in the similarity calculation.</p>
<p>To calculate the similarity between two words, a set is built containing only
the trigrams common to both words.  The magnitude of this set is then compared
against the number of trigrams in both words:</p>
<blockquote>
<div>similarity = 2.0 * triAB.size() / (triA.size() + triB.size());</div></blockquote>
<p>This similarity value can be calculated much faster than eg. the Levenshtein
distance.  The sets of trigrams for each input word are calculated only once and
if you presort these sets, the common set can be found in O(n) time.</p>
<table class="docutils citation" frame="void" id="gotoh1982" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[Gotoh1982]</a></td><td>Gotoh, O. 1982,  <em>An Improved Algorithm for Matching Biological
Sequences,</em> J. Mol. Biol. 162, 705-708
<a class="reference external" href="http://jaligner.sourceforge.net/references/gotoh1982.pdf">http://jaligner.sourceforge.net/references/gotoh1982.pdf</a></td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="collatex" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[CollateX]</a></td><td>Dekker, R.H. et al. 2010-2019, <em>CollateX – Software for Collating
Textual Sources,</em> <a class="reference external" href="https://collatex.net/">https://collatex.net/</a></td></tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="collections.html" class="btn btn-neutral float-right" title="Collections" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Capitularia Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018 CCeH - Licensed under the GNU GPL v3 or later

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>