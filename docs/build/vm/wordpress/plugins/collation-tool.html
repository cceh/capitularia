<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Collation Tool &mdash; Capitularia 0.2.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/my_theme.css?v=dc6f3be3" />

  
    <link rel="shortcut icon" href="../../../_static/favicon-cceh-blue.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/documentation_options.js?v=37f418d5"></script>
        <script src="../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Meta Search" href="meta-search.html" />
    <link rel="prev" title="Wordpress Plugins" href="../plugins.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Capitularia
              <img src="../../../_static/logo-cceh-white.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../overviews/index.html">Overviews</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../overviews/html_generation.html">HTML Generation Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/html_generation.html#xslt-transformations">XSLT Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/html_generation.html#user-delivery">User Delivery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../overviews/collation_tool.html">Collation Tool Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/collation_tool.html#pre-processing-of-the-tei-files">Pre-Processing of the TEI files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/collation_tool.html#id2">Collation Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/collation_tool.html#collation-algorithm">Collation Algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/collation_tool.html#word-comparison-function">Word Comparison Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/collation_tool.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../overviews/fulltext_search.html">Full-text Search Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/fulltext_search.html#full-text-extraction">Full-text Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/fulltext_search.html#metadata-extraction">Metadata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/fulltext_search.html#geodata-extraction">Geodata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/fulltext_search.html#search">Search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../overviews/makefile.html">Makefile Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/makefile.html#xslt-dependencies">XSLT Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../overviews/collections.html">Collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../overviews/collections.html#algorithm">Algorithm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Capitularia VM</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../apache.html">Apache Web Server</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Wordpress</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../installation.html">Wordpress Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../database.html">Wordpress Database Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../theme.html">Wordpress Theme</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../plugins.html">Wordpress Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../maintenance.html">Wordpress Maintenance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development.html">Developer Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../app_server.html">Application Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../app_server.html#server">server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app_server.html#module-data_server">data_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app_server.html#module-collator_server">collator_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app_server.html#module-geo_server">geo_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app_server.html#module-tile_server">tile_server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../database.html">Postgres Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../database.html#schema-capitularia">Schema <em>capitularia:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../database.html#schema-gis">Schema <em>gis:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../database.html#module-db">db.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../solr.html">SOLR</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../solr.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solr.html#service">Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solr.html#icinga">Icinga</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../transformations.html">XSLT Transformations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../transformations.html#graph-of-all-transformations">Graph of All Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../transformations.html#graph-of-stylesheet-dependencies">Graph of Stylesheet Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user.html">Users of the VM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user.html#users-and-groups">Users and Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user.html#adding-a-new-user">Adding a New User</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user.html#deleting-a-new-user">Deleting a New User</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user.html#security">Security</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../backup.html">TSM Backup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../backup.html#update">Update</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintenance/index.html">Maintenance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../maintenance/logfiles.html">Location of Logfiles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../maintenance/logfiles.html#apache-php">Apache / PHP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../maintenance/logfiles.html#python-app-server">Python App Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../maintenance/logfiles.html#python-import-script">Python Import Script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/index.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../development/development.html">Assorted Development Tips</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../troubleshooting/collation_tool.html">Troubleshooting the Collation Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/collation_tool.html#manuscripts-do-not-show-up">Manuscripts do not show up</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Capitularia</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Capitularia VM</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Wordpress</a></li>
          <li class="breadcrumb-item"><a href="../plugins.html">Wordpress Plugins</a></li>
      <li class="breadcrumb-item active">Collation Tool</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/vm/wordpress/plugins/collation-tool.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="collation-tool">
<span id="id1"></span><h1>Collation Tool<a class="headerlink" href="#collation-tool" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#module-plugins.cap-collation.cap-collation" id="id2">PHP</a></p>
<ul>
<li><p><a class="reference internal" href="#plugins-cap-collation-cap-collation-php" id="id3">plugins/cap-collation/cap-collation.php</a></p></li>
<li><p><a class="reference internal" href="#plugins-cap-collation-functions-php" id="id4">plugins/cap-collation/functions.php</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-plugins-cap-collation-front" id="id5">Javascript</a></p>
<ul>
<li><p><a class="reference internal" href="#plugins-cap-collation-src-js-front-js" id="id6">plugins/cap-collation/src/js/front.js</a></p></li>
<li><p><a class="reference internal" href="#plugins-cap-collation-src-js-main-vue" id="id7">plugins/cap-collation/src/js/main.vue</a></p></li>
<li><p><a class="reference internal" href="#plugins-cap-collation-src-js-results-vue" id="id8">plugins/cap-collation/src/js/results.vue</a></p></li>
<li><p><a class="reference internal" href="#plugins-cap-collation-src-js-selector-vue" id="id9">plugins/cap-collation/src/js/selector.vue</a></p></li>
<li><p><a class="reference internal" href="#plugins-cap-collation-src-js-tools-js" id="id10">plugins/cap-collation/src/js/tools.js</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="module-plugins.cap-collation.cap-collation">
<span id="php"></span><h2><a class="toc-backref" href="#id2" role="doc-backlink">PHP</a><a class="headerlink" href="#module-plugins.cap-collation.cap-collation" title="Link to this heading">¶</a></h2>
<section id="plugins-cap-collation-cap-collation-php">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">plugins/cap-collation/cap-collation.php</a><a class="headerlink" href="#plugins-cap-collation-cap-collation-php" title="Link to this heading">¶</a></h3>
<p>Plugin Name: Capitularia Collation Tool
Plugin URI:
Description: Collates TEI files.</p>
<p>Version:     0.2.2
Author:      Marcello Perathoner
Author URI:
License:     GPLv2 or later
Text Domain: cap-collation
Domain Path: /languages</p>
<p>Capitularia Collation Tool plugin.</p>
<p>The <em>Collation Tool plugin</em> lets any member of the general public do
collations of arbitrary sections from different manuscripts.</p>
<p>This plugin provides a shortcode that inserts a dashboard on the page.
Within the dashboard the user can request collations of sections of
manuscripts.  The dashboard is implemented in javascript with Vue.js.  The
PHP code of this plugin basically only serves the Javascript code to the
user.</p>
<p>The actual collation is done on the Capitularia API Server with the <a class="reference external" href="https://github.com/cceh/super-collator">super collator</a> library.</p>
<p>A big <a class="reference external" href="makefile">Makefile</a>, run by cron on the API server, uses XSLT and Saxon to
extract the relevant sections from the TEI files and pre-processes them for
collation.  In the end all TEI tags are removed and only the normalized text is
stored into the Postgres database.  On an incoming collation request the API server
reads the pre-processed texts from the database and sends them to the super collator.</p>
<p>See: <code class="xref py py-mod docutils literal notranslate"><span class="pre">collatex_server</span></code>, <a class="reference internal" href="../../../overviews/collation_tool.html#collation-tool-overview"><span class="std std-ref">collation overview</span></a>.</p>
<dl class="php const" id="namespace-\cceh\capitularia\collation_user">
<dt class="sig sig-object php" id="\cceh\capitularia\collation_user\NAME">
<em class="property"><span class="pre">constant</span> </em><span class="sig-name descname"><span class="pre">NAME</span></span><a class="headerlink" href="#\cceh\capitularia\collation_user\NAME" title="Link to this definition">¶</a></dt>
<dd><p>‘Capitularia Collation Tool’</p>
<p>The name of the plugin.</p>
</dd></dl>

<dl class="php const">
<dt class="sig sig-object php" id="\cceh\capitularia\collation_user\DOMAIN">
<em class="property"><span class="pre">constant</span> </em><span class="sig-name descname"><span class="pre">DOMAIN</span></span><a class="headerlink" href="#\cceh\capitularia\collation_user\DOMAIN" title="Link to this definition">¶</a></dt>
<dd><p>‘cap-collation’</p>
<p>The Text Domain of the plugin.</p>
</dd></dl>

</section>
<section id="plugins-cap-collation-functions-php">
<span id="module-plugins.cap-collation.functions"></span><h3><a class="toc-backref" href="#id4" role="doc-backlink">plugins/cap-collation/functions.php</a><a class="headerlink" href="#plugins-cap-collation-functions-php" title="Link to this heading">¶</a></h3>
<p>Capitularia Collation Tool global functions.</p>
<dl class="php function">
<dt class="sig sig-object php" id="\cceh\capitularia\collation_user\ns">
<span class="sig-name descname"><span class="pre">ns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">function_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#\cceh\capitularia\collation_user\ns" title="Link to this definition">¶</a></dt>
<dd><p>Add current namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>function_name</strong> (<span><code class="xref php php-obj docutils literal notranslate"><span class="pre">string</span></code></span>) – The class or function name without namespace</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The name with namespace</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span><code class="xref php php-obj docutils literal notranslate"><span class="pre">string</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="php function">
<dt class="sig sig-object php" id="\cceh\capitularia\collation_user\enqueue_scripts">
<span class="sig-name descname"><span class="pre">enqueue_scripts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#\cceh\capitularia\collation_user\enqueue_scripts" title="Link to this definition">¶</a></dt>
<dd><p>Enqueue the front page script and localize it.</p>
<p>The script is a webpacked Vue.js application containing its own css.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span><code class="xref php php-obj docutils literal notranslate"><span class="pre">void</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="php function">
<dt class="sig sig-object php" id="\cceh\capitularia\collation_user\on_shortcode">
<span class="sig-name descname"><span class="pre">on_shortcode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">dummy_atts</span></em>, <em class="sig-param"><span class="pre">dummy_content</span></em><span class="sig-paren">)</span><a class="headerlink" href="#\cceh\capitularia\collation_user\on_shortcode" title="Link to this definition">¶</a></dt>
<dd><p>Replace the shortcode with the collation dashboard.</p>
<p>Insert a Vue.js component.  Vue.js takes over from that and builds the
collation dashboard.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dummy_atts</strong> (<span><code class="xref php php-obj docutils literal notranslate"><span class="pre">array</span></code></span>) – (unused) The shortcode attributes</p></li>
<li><p><strong>dummy_content</strong> (<span><code class="xref php php-obj docutils literal notranslate"><span class="pre">array</span></code></span>) – (unused) The shortcode content (should be empty)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The Vue.js component as HTML.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span><code class="xref php php-obj docutils literal notranslate"><span class="pre">string</span></code></span></p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="module-plugins-cap-collation-front">
<span id="javascript"></span><h2><a class="toc-backref" href="#id5" role="doc-backlink">Javascript</a><a class="headerlink" href="#module-plugins-cap-collation-front" title="Link to this heading">¶</a></h2>
<section id="plugins-cap-collation-src-js-front-js">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">plugins/cap-collation/src/js/front.js</a><a class="headerlink" href="#plugins-cap-collation-src-js-front-js" title="Link to this heading">¶</a></h3>
<p>Initializes the collation applet.</p>
</section>
<section id="plugins-cap-collation-src-js-main-vue">
<span id="module-plugins-cap-collation-main"></span><h3><a class="toc-backref" href="#id7" role="doc-backlink">plugins/cap-collation/src/js/main.vue</a><a class="headerlink" href="#plugins-cap-collation-src-js-main-vue" title="Link to this heading">¶</a></h3>
<dl class="js class">
<dt class="sig sig-object js" id="plugins-cap-collation-main.Main">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/main</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">Main</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#plugins-cap-collation-main.Main" title="Link to this definition">¶</a></dt>
<dd><p>The vue.js instance that manages the whole page.</p>
</dd></dl>

</section>
<section id="plugins-cap-collation-src-js-results-vue">
<span id="module-plugins-cap-collation-results"></span><h3><a class="toc-backref" href="#id8" role="doc-backlink">plugins/cap-collation/src/js/results.vue</a><a class="headerlink" href="#plugins-cap-collation-src-js-results-vue" title="Link to this heading">¶</a></h3>
<dl class="js class">
<dt class="sig sig-object js" id="plugins-cap-collation-results.Results">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/results</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">Results</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#plugins-cap-collation-results.Results" title="Link to this definition">¶</a></dt>
<dd><p>The vue.js instance that manages the collation output table.</p>
</dd></dl>

</section>
<section id="plugins-cap-collation-src-js-selector-vue">
<span id="module-plugins-cap-collation-selector"></span><h3><a class="toc-backref" href="#id9" role="doc-backlink">plugins/cap-collation/src/js/selector.vue</a><a class="headerlink" href="#plugins-cap-collation-src-js-selector-vue" title="Link to this heading">¶</a></h3>
<dl class="js class">
<dt class="sig sig-object js" id="plugins-cap-collation-selector.Selector">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/selector</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">Selector</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#plugins-cap-collation-selector.Selector" title="Link to this definition">¶</a></dt>
<dd><p>The vue.js instance that manages the section selector(s).</p>
</dd></dl>

</section>
<section id="plugins-cap-collation-src-js-tools-js">
<span id="module-plugins-cap-collation-tools"></span><h3><a class="toc-backref" href="#id10" role="doc-backlink">plugins/cap-collation/src/js/tools.js</a><a class="headerlink" href="#plugins-cap-collation-src-js-tools-js" title="Link to this heading">¶</a></h3>
<p>Utility functions for the collation applet.</p>
<dl class="js data">
<dt class="sig sig-object js" id="plugins-cap-collation-tools.LANG">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">LANG</span></span></span><a class="headerlink" href="#plugins-cap-collation-tools.LANG" title="Link to this definition">¶</a></dt>
<dd><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">cap</span><span class="o">-</span><span class="nx">collation</span>
</pre></div>
</div>
<p>The Wordpress Text Domain of the plugin.</p>
</dd></dl>

<dl class="js data">
<dt class="sig sig-object js" id="plugins-cap-collation-tools.bk_id">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">bk_id</span></span></span><a class="headerlink" href="#plugins-cap-collation-tools.bk_id" title="Link to this definition">¶</a></dt>
<dd><p>(string)
The id of the “Obertext”.</p>
</dd></dl>

<dl class="js data">
<dt class="sig sig-object js" id="plugins-cap-collation-tools.cap_collation_algorithms">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">cap_collation_algorithms</span></span></span><a class="headerlink" href="#plugins-cap-collation-tools.cap_collation_algorithms" title="Link to this definition">¶</a></dt>
<dd><p>The collation algorithms we support.</p>
</dd></dl>

<dl class="js data">
<dt class="sig sig-object js" id="plugins-cap-collation-tools.Palette">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">Palette</span></span></span><a class="headerlink" href="#plugins-cap-collation-tools.Palette" title="Link to this definition">¶</a></dt>
<dd><p>A color palette.</p>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-cap-collation-tools.insert_css_palette">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">insert_css_palette</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">css</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-cap-collation-tools.insert_css_palette" title="Link to this definition">¶</a></dt>
<dd><p>Insert a CSS color palette into the DOM making it active.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>css</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – The color palette as string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-cap-collation-tools.api">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">api</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-cap-collation-tools.api" title="Link to this definition">¶</a></dt>
<dd><p>This calls the API on the API server</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>endpoint</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – The endpoint relative to the API root.</p></li>
<li><p><strong>data</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">URLSearchParams()</span></code></span>) – The query to send.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Promise resolved when call completed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Promise</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-cap-collation-tools.encodeRFC5987ValueChars">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">encodeRFC5987ValueChars</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-cap-collation-tools.encodeRFC5987ValueChars" title="Link to this definition">¶</a></dt>
<dd><p>Build a valid filename to save the config.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>str</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – The string to encode.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The encoded string.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-cap-collation-tools.sort_key">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">sort_key</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-cap-collation-tools.sort_key" title="Link to this definition">¶</a></dt>
<dd><p>A key that sorts numbers right</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – Any string.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A key derived from the string that sorts numbers right.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-cap-collation-tools.build_witness_url">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">build_witness_url</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">w</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-cap-collation-tools.build_witness_url" title="Link to this definition">¶</a></dt>
<dd><p>Build an URL that represents one witness to be collated.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>w</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">Object()</span></code></span>) – The witness object</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The url</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-cap-collation-tools.fix_witness">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">fix_witness</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">w</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-cap-collation-tools.fix_witness" title="Link to this definition">¶</a></dt>
<dd><p>Calculate some attributes for a witness object: a human-readable title, i18n, sort key.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>w</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">Object()</span></code></span>) – The witness object to fix</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The fixed witness object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Object</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-cap-collation-tools.parse_locus_url">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">parse_locus_url</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-cap-collation-tools.parse_locus_url" title="Link to this definition">¶</a></dt>
<dd><p>Parse a locus url into a witness object similar to one returned by the data server. Currently used only to calculate the title length in the results table.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – The witness url</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The witness object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Object</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-cap-collation-tools.unroll_witnesses">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/cap-collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">unroll_witnesses</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rolled</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-cap-collation-tools.unroll_witnesses" title="Link to this definition">¶</a></dt>
<dd><p>Unroll collate struct Unrolls the witness list before sending it to the collation server. Turns this: .. code-block:: json [ { “corresp”: “BK.40_4”, “witnesses”: [ “bk-textzeuge”, “vatikan-bav-chigi-f-iv-75” ] }, { “corresp”: “BK.137”, “witnesses”: [ “bk-textzeuge”, “kopenhagen-kb-1943-4”, “paris-bn-lat-2718” ] } ] into this: .. code-block: json [ “BK.40_4/bk-textzeuge”, “BK.40_4/vatikan-bav-chigi-f-iv-75”, “BK.137/bk-textzeuge”, “BK.137/kopenhagen-kb-1943-4”, “BK.137/paris-bn-lat-2718”, ]</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rolled</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">Array()</span></code></span>) – The collate struct</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The unrolled witness array</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Array</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../plugins.html" class="btn btn-neutral float-left" title="Wordpress Plugins" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="meta-search.html" class="btn btn-neutral float-right" title="Meta Search" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-24 CCeH - Licensed under the GNU GPL v3 or later.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>