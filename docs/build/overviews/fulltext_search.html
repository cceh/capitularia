<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Full-text Search Overview &mdash; Capitularia 0.2.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/my_theme.css?v=dc6f3be3" />

  
    <link rel="shortcut icon" href="../_static/favicon-cceh-blue.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/documentation_options.js?v=37f418d5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Makefile Overview" href="makefile.html" />
    <link rel="prev" title="Collation Tool Overview" href="collation_tool.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Capitularia
              <img src="../_static/logo-cceh-white.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Overviews</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="html_generation.html">HTML Generation Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="html_generation.html#xslt-transformations">XSLT Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="html_generation.html#user-delivery">User Delivery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="collation_tool.html">Collation Tool Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#pre-processing-of-the-tei-files">Pre-Processing of the TEI files</a></li>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#id2">Collation Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#collation-algorithm">Collation Algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#word-comparison-function">Word Comparison Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Full-text Search Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#full-text-extraction">Full-text Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metadata-extraction">Metadata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#geodata-extraction">Geodata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#search">Search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="makefile.html">Makefile Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="makefile.html#xslt-dependencies">XSLT Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="collections.html">Collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="collections.html#algorithm">Algorithm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">Capitularia VM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../vm/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vm/apache.html">Apache Web Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vm/wordpress/index.html">Wordpress</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/wordpress/installation.html">Wordpress Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/wordpress/database.html">Wordpress Database Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/wordpress/theme.html">Wordpress Theme</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/wordpress/plugins.html">Wordpress Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/wordpress/maintenance.html">Wordpress Maintenance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/wordpress/development.html">Developer Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/app_server.html">Application Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#server">server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-data_server">data_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-collator_server">collator_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-geo_server">geo_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-tile_server">tile_server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/database.html">Postgres Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#schema-capitularia">Schema <em>capitularia:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#schema-gis">Schema <em>gis:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#module-db">db.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/solr.html">SOLR</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/solr.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/solr.html#service">Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/solr.html#icinga">Icinga</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/transformations.html">XSLT Transformations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/transformations.html#graph-of-all-transformations">Graph of All Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/transformations.html#graph-of-stylesheet-dependencies">Graph of Stylesheet Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/user.html">Users of the VM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/user.html#users-and-groups">Users and Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/user.html#adding-a-new-user">Adding a New User</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/user.html#deleting-a-new-user">Deleting a New User</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/user.html#security">Security</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/backup.html">TSM Backup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/backup.html#update">Update</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/index.html">Maintenance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/logfiles.html">Location of Logfiles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../maintenance/logfiles.html#apache-php">Apache / PHP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../maintenance/logfiles.html#python-app-server">Python App Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../maintenance/logfiles.html#python-import-script">Python Import Script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/development.html">Assorted Development Tips</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/collation_tool.html">Troubleshooting the Collation Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/collation_tool.html#manuscripts-do-not-show-up">Manuscripts do not show up</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Capitularia</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Overviews</a></li>
      <li class="breadcrumb-item active">Full-text Search Overview</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/overviews/fulltext_search.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="full-text-search-overview">
<span id="fulltext-search-overview"></span><h1>Full-text Search Overview<a class="headerlink" href="#full-text-search-overview" title="Link to this heading">¶</a></h1>
<p>Full-text search is provided by the <a class="reference internal" href="../vm/wordpress/plugins/meta-search.html#meta-search"><span class="std std-ref">Meta Search</span></a> Wordpress plugin.
It is implemented with Apache Solr.  Apache Solr is a fulltext search engine based on
Apache Lucene.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="../vm/solr.html#solr"><span class="std std-ref">SOLR</span></a></p></li>
<li><p><a class="reference internal" href="makefile.html#makefile"><span class="std std-ref">Makefile Overview</span></a></p></li>
</ul>
</div>
<section id="full-text-extraction">
<h2>Full-text Extraction<a class="headerlink" href="#full-text-extraction" title="Link to this heading">¶</a></h2>
<p>There are 3 main categories of text that we index in Solr.</p>
<ul class="simple">
<li><p>The Latin text of the capitularies is extracted using
<code class="file docutils literal notranslate"><span class="pre">mss-extract-chapters-txt.xsl</span></code>, stored in the directory
<code class="file docutils literal notranslate"><span class="pre">publ/cache/collation/</span></code> and imported into Solr using the command
<strong class="command">import_data.py --solr</strong>.  This are the same texts used for the collation
tool.  The German notes in the capitularies are extracted along with the Latin text.</p></li>
<li><p>The material in the teiHeader and the “editorial preface to the transcription”
are indexed into Solr using the command <strong class="command">import_solr.py --mss</strong>.</p></li>
<li><p>The Wordpress pages are extracted directly from the Wordpress database
and indexed into Solr using the command <strong class="command">import_solr.py --wordpress</strong>.</p></li>
</ul>
<p>The command for updating the Solr database is: <strong class="command">make solr-import</strong>.</p>
<p>That same command is run nightly by cron.</p>
<figure class="align-center" id="id1">
<div align="center" class="pic align-center pic-format-text-xml pic-language-uml">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="303px" preserveAspectRatio="none" style="width:598px;height:303px;" version="1.1" viewBox="0 0 598 303" width="598px" zoomAndPan="magnify"><defs><filter height="300%" id="f1fmheekpzakzr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[f43d1bbe4f1159838c5f6e7e47575b7c]
entity tei--><path d="M421.5,107 C421.5,97 486,97 486,97 C486,97 550.5,97 550.5,107 L550.5,154.1358 C550.5,164.1358 486,164.1358 486,164.1358 C486,164.1358 421.5,164.1358 421.5,154.1358 L421.5,107 " fill="#FEFECE" filter="url(#f1fmheekpzakzr)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M421.5,107 C421.5,117 486,117 486,117 C486,117 550.5,117 550.5,107 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="431.5" y="135.9659">Manuscript files</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="471.5" y="155.0339">(TEI)</text><!--MD5=[0e4e82c954b664e5d225f5849797976f]
entity chapters--><path d="M29,107 C29,97 102,97 102,97 C102,97 175,97 175,107 L175,154.1358 C175,164.1358 102,164.1358 102,164.1358 C102,164.1358 29,164.1358 29,154.1358 L29,107 " fill="#FEFECE" filter="url(#f1fmheekpzakzr)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M29,107 C29,117 102,117 102,117 C102,117 175,117 175,107 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="39" y="135.9659">Extracted chapters</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="87.5" y="155.0339">(TEI)</text><!--MD5=[4660e0abdb7fa9e4244c49bb3714a7b9]
entity wp--><path d="M237.5,116.5 C237.5,106.5 284,106.5 284,106.5 C284,106.5 330.5,106.5 330.5,116.5 L330.5,144.5679 C330.5,154.5679 284,154.5679 284,154.5679 C284,154.5679 237.5,154.5679 237.5,144.5679 L237.5,116.5 " fill="#FEFECE" filter="url(#f1fmheekpzakzr)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M237.5,116.5 C237.5,126.5 284,126.5 284,126.5 C284,126.5 330.5,126.5 330.5,116.5 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="247.5" y="145.4659">Wordpress</text><!--MD5=[0d15b2eb428f0c0027bf5ef6513f3386]
entity solr--><path d="M260,253 C260,243 283,243 283,243 C283,243 306,243 306,253 L306,281.0679 C306,291.0679 283,291.0679 283,291.0679 C283,291.0679 260,291.0679 260,281.0679 L260,253 " fill="#FEFECE" filter="url(#f1fmheekpzakzr)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M260,253 C260,263 283,263 283,263 C283,263 306,263 306,253 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="270" y="281.9659">Solr</text><path d="M429,8 L429,35.706 A0,0 0 0 0 429,35.706 L482,35.706 L486,96.66 L490,35.706 L543,35.706 A0,0 0 0 0 543,35.706 L543,18 L533,8 L429,8 A0,0 0 0 0 429,8 " fill="#FBFB77" filter="url(#f1fmheekpzakzr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M533,8 L533,18 L543,18 L533,8 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="435" y="26.897">publ/mss/*.xml</text><path d="M6,8 L6,35.706 A0,0 0 0 0 6,35.706 L92.74,35.706 L100.15,96.66 L100.74,35.706 L186,35.706 A0,0 0 0 0 186,35.706 L186,18 L176,8 L6,8 A0,0 0 0 0 6,8 " fill="#FBFB77" filter="url(#f1fmheekpzakzr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M176,8 L176,18 L186,18 L176,8 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="12" y="26.897">publ/cache/collation/*.xml</text><path d="M221,8 L221,35.706 A0,0 0 0 0 221,35.706 L281.75,35.706 L284.44,106.21 L289.75,35.706 L351,35.706 A0,0 0 0 0 351,35.706 L351,18 L341,8 L221,8 A0,0 0 0 0 221,8 " fill="#FBFB77" filter="url(#f1fmheekpzakzr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M341,8 L341,18 L351,18 L341,8 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="227" y="26.897">on mariadb server</text><!--MD5=[3e1b9cf2635e96162dcad895bcd6d38f]
link chapters to solr--><path d="M112.84,164.06 C119.78,180.61 130.28,199.94 145,213 C176.57,241.03 224.54,254.92 254.81,261.27 " fill="none" id="chapters-&gt;solr" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="259.87,262.3,251.8356,256.6036,254.9682,261.3139,250.2579,264.4465,259.87,262.3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="146" y="208.897">import_data.py --solr</text><!--MD5=[a455df12c11f679ba07e7f09f9b49922]
link tei to solr--><path d="M477.12,164.35 C471.09,180.99 461.52,200.3 447,213 C408.03,247.07 346.84,259.3 311.26,263.64 " fill="none" id="tei-&gt;solr" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="306.2,264.23,315.5989,267.173,311.1671,263.6574,314.6827,259.2257,306.2,264.23" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="464" y="208.897">import_solr.py --mss</text><!--MD5=[af996cd420ac3ac2b5074ffa3d05e56f]
link wp to solr--><path d="M281.91,154.68 C280.67,170.98 279.44,193.32 280,213 C280.22,220.93 280.64,229.53 281.09,237.44 " fill="none" id="wp-&gt;solr" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="281.4,242.79,284.8785,233.5759,281.1139,237.7982,276.8916,234.0336,281.4,242.79" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="281" y="208.897">import_solr.py --wordpress</text><!--MD5=[840d0603abac5f343c98eb3c1c21f82e]
@startuml

   skinparam backgroundColor transparent
   skinparam DefaultTextAlignment center
   skinparam componentStyle uml2
   skinparam actorStyle awesome

database  "Manuscript files\n(TEI)"   as tei
database  "Extracted chapters\n(TEI)" as chapters
database  "Wordpress"                 as wp
database  "Solr"                      as solr

note top of tei      : publ/mss/*.xml
note top of chapters : publ/cache/collation/*.xml
note top of wp       : on mariadb server

chapters - -> solr : import_data.py - -solr
tei      - -> solr : import_solr.py - -mss
wp       - -> solr : import_solr.py - -wordpress
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.4+7-Debian-3
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<figcaption>
<p><span class="caption-text">Data flow during text extraction</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="metadata-extraction">
<h2>Metadata Extraction<a class="headerlink" href="#metadata-extraction" title="Link to this heading">¶</a></h2>
<p>We extract the metadata from the manuscript files and store them in the Postgres
database on the Capitularia VM.  The process is similar to the pre-processing
done for the Collation Tool.</p>
<figure class="align-center" id="id2">
<div align="center" class="pic align-center pic-format-text-xml pic-language-uml">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="380px" preserveAspectRatio="none" style="width:424px;height:380px;" version="1.1" viewBox="0 0 424 380" width="424px" zoomAndPan="magnify"><defs><filter height="300%" id="f401uwjtjluc3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[f43d1bbe4f1159838c5f6e7e47575b7c]
entity tei--><path d="M219.5,18 C219.5,8 284,8 284,8 C284,8 348.5,8 348.5,18 L348.5,65.1358 C348.5,75.1358 284,75.1358 284,75.1358 C284,75.1358 219.5,75.1358 219.5,65.1358 L219.5,18 " fill="#FEFECE" filter="url(#f401uwjtjluc3)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M219.5,18 C219.5,28 284,28 284,28 C284,28 348.5,28 348.5,18 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="229.5" y="46.9659">Manuscript files</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="269.5" y="66.0339">(TEI)</text><!--MD5=[b085cf21630c4383e706e8ccf9e8b0db]
entity corpus--><rect fill="#FEFECE" filter="url(#f401uwjtjluc3)" height="68.1358" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="227.5" y="154"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="320.5" y="159"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="318.5" y="161"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="318.5" y="165"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="242.5" y="188.9659">Corpus file</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="264.5" y="208.0339">(TEI)</text><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><path d="M241,311 C241,301 284,301 284,301 C284,301 327,301 327,311 L327,358.1358 C327,368.1358 284,368.1358 284,368.1358 C284,368.1358 241,368.1358 241,358.1358 L241,311 " fill="#FEFECE" filter="url(#f401uwjtjluc3)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M241,311 C241,321 284,321 284,321 C284,321 327,321 327,311 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="252.5" y="339.9659">Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="251" y="359.0339">(Postgres)</text><path d="M70,27.5 L70,55.206 A0,0 0 0 0 70,55.206 L184,55.206 A0,0 0 0 0 184,55.206 L184,45.5 L219.18,41.5 L184,37.5 L184,37.5 L174,27.5 L70,27.5 A0,0 0 0 0 70,27.5 " fill="#FBFB77" filter="url(#f401uwjtjluc3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M174,27.5 L174,37.5 L184,37.5 L174,27.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="76" y="46.397">publ/mss/*.xml</text><path d="M6,174 L6,201.706 A0,0 0 0 0 6,201.706 L192,201.706 A0,0 0 0 0 192,201.706 L192,192 L227.36,188 L192,184 L192,184 L182,174 L6,174 A0,0 0 0 0 6,174 " fill="#FBFB77" filter="url(#f401uwjtjluc3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M182,174 L182,184 L192,184 L182,174 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="12" y="192.897">publ/cache/lists/corpus.xml</text><!--MD5=[ed875a09f867f1ce65a369fa897ef06e]
link tei to corpus--><path d="M284,75.29 C284,97.12 284,125.88 284,148.76 " fill="none" id="tei-&gt;corpus" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="284,153.84,288,144.84,284,148.84,280,144.84,284,153.84" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="285" y="119.897">saxon corpus.xml</text><!--MD5=[3064a6ee68d2afef5c1b564a79ee2c34]
link corpus to db--><path d="M284,222.15 C284,244 284,272.67 284,295.44 " fill="none" id="corpus-&gt;db" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="284,300.5,288,291.5,284,295.5,280,291.5,284,300.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="285" y="266.897">import_data.py --mss</text><!--MD5=[23b5bff4c390de3f26893161e33d3e67]
@startuml

   skinparam backgroundColor transparent
   skinparam DefaultTextAlignment center
   skinparam componentStyle uml2
   skinparam actorStyle awesome

database  "Manuscript files\n(TEI)" as tei
component "Corpus file\n(TEI)"      as corpus
database  "Database\n(Postgres)"    as db

note left of tei    : publ/mss/*.xml
note left of corpus : publ/cache/lists/corpus.xml

tei    - -> corpus : saxon corpus.xml
corpus - -> db     : import_data.py - -mss
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.4+7-Debian-3
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<figcaption>
<p><span class="caption-text">Data flow during metadata extraction</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The <code class="file docutils literal notranslate"><span class="pre">Makefile</span></code> is run by cron on the Capitularia VM at regular intervals.</p>
<p>The <code class="file docutils literal notranslate"><span class="pre">Makefile</span></code> knows all the <a class="reference external" href="makefile">dependencies</a> between the files and runs
the appropriate tools to keep the database up-to-date with the manuscript files.</p>
<p>The intermediate file <code class="file docutils literal notranslate"><span class="pre">publ/cache/lists/corpus.xml</span></code> contains all (useful) metadata
from all manuscript file but no text.</p>
<p>The <strong class="program">import_data.py</strong> script scans the <code class="file docutils literal notranslate"><span class="pre">corpus.xml</span></code> file and imports the
all metadata it finds into the database.</p>
</section>
<section id="geodata-extraction">
<h2>Geodata Extraction<a class="headerlink" href="#geodata-extraction" title="Link to this heading">¶</a></h2>
<p>Geodata is stored in the file <code class="file docutils literal notranslate"><span class="pre">publ/mss/lists/capitularia_geo.xml</span></code>.  This file is
periodically processed with <strong class="program">import_data.py --geoplaces</strong> and its content is
stored into the database.  Also the “places” tree in the meta search dialog is built
using this data.</p>
</section>
<section id="search">
<h2>Search<a class="headerlink" href="#search" title="Link to this heading">¶</a></h2>
<p>The flow of a user’s search request is as follows:</p>
<ol class="arabic simple">
<li><p>The <a class="reference internal" href="../vm/wordpress/plugins/meta-search.html#meta-search"><span class="std std-ref">Meta Search</span></a> applet on the browser sends the request to the
Meta Search plugin on the web server.</p></li>
<li><p>The Wordpress plugin adds the user’s permissions (ie. whether she is logged in into
Wordpress or not) and then sends the search query to the application server.</p></li>
<li><p>The application server queries the SOLR server.</p></li>
<li><p>The SOLR server does the actual search and returns the result as JSON.</p></li>
<li><p>The applet on the browser formats the JSON and displays them to the user.</p></li>
</ol>
<p>Searches in the Latin texts of the manuscript bodies are done by stemming and trigram
similarity. Exact results get a boost, so they show up before trigram results. To stem
Latin we wrote <a class="reference external" href="https://github.com/cceh/capitularia-lucene-tools">a custom Latin stemmer for
Lucene</a>.</p>
<p>Searches in Mordek and Wordpress posts use more traditional search methods like
stemming.</p>
<figure class="align-center" id="id3">
<div align="center" class="pic align-center pic-format-text-xml pic-language-uml">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="501px" preserveAspectRatio="none" style="width:435px;height:501px;" version="1.1" viewBox="0 0 435 501" width="435px" zoomAndPan="magnify"><defs><filter height="300%" id="ftdz5nttdjhlp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[e1ef416f19a619ed411924d28ede4d44]
cluster VM--><path d="M37.7134,108.7046 C46.9122,96.8461 57.2417,97.0769 66.4586,108.6825 C71.7302,95.4235 82.0613,94.3344 90.4568,105.6293 C96.9325,94.7825 104.7727,95.7372 112.396,104.3342 C121.3125,91.5265 130.3226,92.8803 138.8793,104.7207 C145.5767,93.4101 157.4638,93.584 164.8503,103.893 C171.32,91.868 183.0062,92.2159 189.6531,103.7062 C195.0287,93.2784 205.1506,91.101 212.9421,100.9286 C223.5962,90.2183 231.6354,89.3427 238.8083,104.4203 C246.6446,93.1635 257.5791,92.5301 264.4744,105.4207 C271.626,92.8381 281.0583,94.3906 287.839,105.7822 C294.9714,93.617 308.5741,90.3073 316.8434,104.5327 C326.2932,94.7289 332.6088,98.1377 338.1923,108.6046 C345.5259,96.2449 358.4423,95.8643 365.3516,109.0556 C376.1318,96.0873 387.8986,98.3168 395,113 C395.559,113.0819 395.8622,113.4296 395.4933,113.979 C410.4231,120.1403 414.6561,129.8903 401.1874,141.8529 C412.9725,148.5157 410.8813,158.8825 400.2826,164.6572 C415.5266,170.049 416.7286,181.299 404.7382,191.2534 C415.8848,196.5857 415.9007,205.9845 405.7298,212.3201 C417.2653,221.7534 419.6815,230.2227 405.9005,239.8131 C418.6438,248.1842 417.8423,255.8215 405.7136,264.0005 C419.5656,268.8906 423.2889,280.2382 411.711,290.8158 C423.71,299.463 421.4536,311.7462 407.3843,315.8963 C417.0209,322.0136 420.238,332.274 408.324,339.2581 C418.8136,350.6775 416.5472,359.5545 402.1605,365.023 C413.0301,371.49 415.3627,380.7326 403.2193,388.2487 C412.5964,398.7089 413.6232,406.6301 399.3368,413.4439 C410.6714,420.3354 409.8656,431.806 397.5132,436.8522 C409.2496,450.7353 405.6822,462.4001 388,467 C389.0419,465.6951 390.2988,465.6433 391.0966,467.2588 C384.7054,478.6378 375.6038,482.5116 366.5107,470.0445 C359.8186,485.217 349.2691,485.2953 339.6143,472.9391 C331.9859,482.6825 321.2297,482.4521 315.6485,470.6609 C308.9084,483.6132 296.9067,485.7497 288.5463,472.3258 C283.3155,483.5014 271.4621,484.6308 264.0357,474.8997 C258.6491,487.5524 247.2702,488.2348 239.679,477.163 C231.0853,487.9114 219.4547,486.0253 212.9651,474.6251 C206.1044,486.2075 199.1435,487.6904 190.5566,476.3095 C182.1027,489.1673 171.2629,486.738 164.8048,474.2793 C155.8355,486.1019 144.2633,484.2506 138.235,471.1446 C134.4483,483.152 123.4601,483.1436 116.6541,474.2642 C106.0206,486.3869 93.8613,483.0304 87.6121,469.3329 C81.1916,482.7022 73.5758,481.7713 64.2455,472.3112 C47.835,485.4329 34.3523,480.4198 30,460 C32.0121,460.8888 32.2078,462.5384 30.5883,463.966 C19.1408,455.113 19.8479,446.3559 30.4413,437.3811 C18.2245,431.9518 13.8418,419.2611 27.4101,410.8822 C16.5785,403.513 16.278,392.2929 28.8761,386.3221 C17.8644,379.3338 18.836,371.5335 28.5896,364.2754 C13.1852,357.3406 13.3425,344.6916 26.9747,336.0929 C15.5672,330.4922 14.2014,323.4841 24.0616,314.9526 C11.4358,308.4015 9.6371,300.0925 21.5906,291.0051 C8.6581,282.848 8.3287,272.7858 22.5291,265.6323 C11.4093,256.6044 9.4153,244.1734 25.2694,237.8015 C12.7976,229.4587 17.7468,217.8528 28.6956,212.7076 C20.2577,205.9076 18.5837,198.2723 29.2006,191.9355 C18.2088,185.4288 16.5897,172.9621 29.2881,166.537 C17.4559,157.6367 17.8629,148.4464 29.3903,139.6348 C14.8876,125.0412 20.1595,113.5023 37,106 C38.5114,106.5576 38.7862,107.4654 37.7134,108.7046 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="201.5" y="125.9659">VM</text><!--MD5=[8e6a9284dc1da0ef8b54fdd8dc5bfba7]
entity plugin--><rect fill="#FEFECE" filter="url(#ftdz5nttdjhlp)" height="68.1358" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="227" y="136"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="367" y="141"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="365" y="143"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="365" y="147"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="242" y="170.9659">Wordpress Plugin</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="285" y="190.0339">(PHP)</text><!--MD5=[e2307af040e3f87d22824e7603ca28ec]
entity api--><rect fill="#FEFECE" filter="url(#ftdz5nttdjhlp)" height="68.1358" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="252.5" y="264"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="341.5" y="269"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="339.5" y="271"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="339.5" y="275"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="267.5" y="298.9659">API Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="275" y="318.0339">(Python)</text><!--MD5=[0d15b2eb428f0c0027bf5ef6513f3386]
entity solr--><path d="M256,402 C256,392 307,392 307,392 C307,392 358,392 358,402 L358,449.1358 C358,459.1358 307,459.1358 307,459.1358 C307,459.1358 256,459.1358 256,449.1358 L256,402 " fill="#FEFECE" filter="url(#ftdz5nttdjhlp)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M256,402 C256,412 307,412 307,412 C307,412 358,412 358,402 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="266" y="430.9659">SOLR Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="289.5" y="450.0339">(Java)</text><path d="M38,156 L38,183.706 A0,0 0 0 0 38,183.706 L192,183.706 A0,0 0 0 0 192,183.706 L192,174 L226.76,170 L192,166 L192,166 L182,156 L38,156 A0,0 0 0 0 38,156 " fill="#FBFB77" filter="url(#ftdz5nttdjhlp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M182,156 L182,166 L192,166 L182,156 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="44" y="174.897">adds user permissions</text><path d="M117,411.5 L117,439.206 A0,0 0 0 0 117,439.206 L221,439.206 A0,0 0 0 0 221,439.206 L221,429.5 L255.95,425.5 L221,421.5 L221,421.5 L211,411.5 L117,411.5 A0,0 0 0 0 117,411.5 " fill="#FBFB77" filter="url(#ftdz5nttdjhlp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M211,411.5 L211,421.5 L221,421.5 L211,411.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="123" y="430.397">localhost only</text><!--MD5=[4a65e84059005d12693a083370a06717]
entity client--><rect fill="#FEFECE" filter="url(#ftdz5nttdjhlp)" height="68.1358" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="250.5" y="8"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="343.5" y="13"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="341.5" y="15"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="341.5" y="19"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="271.5" y="42.9659">Frontend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="265.5" y="62.0339">(Javascript)</text><!--MD5=[1ca2fe402431c50d994214240108a38e]
link client to plugin--><path d="M307,76.11 C307,92.76 307,113.04 307,130.39 " fill="none" id="client-&gt;plugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="307,135.68,311,126.68,307,130.68,303,126.68,307,135.68" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[aa90073bfcd0bce2ac7a203ebad4186c]
link plugin to api--><path d="M307,204.11 C307,220.76 307,241.04 307,258.39 " fill="none" id="plugin-&gt;api" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="307,263.68,311,254.68,307,258.68,303,254.68,307,263.68" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[2007a541740d34bf1d820d92d3e4d0ac]
link api to solr--><path d="M307,332.3 C307,349.02 307,369.34 307,386.64 " fill="none" id="api-&gt;solr" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="307,391.91,311,382.91,307,386.91,303,382.91,307,391.91" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[257b22f629178adf5320a8b163fee37a]
@startuml

   skinparam backgroundColor transparent
   skinparam DefaultTextAlignment center
   skinparam componentStyle uml2
   skinparam actorStyle awesome

component "Frontend\n(Javascript)" as client

cloud "VM" {
    component "Wordpress Plugin\n(PHP)" as plugin
    component "API Server\n(Python)"    as api
    database  "SOLR Server\n(Java)"     as solr

    note left of plugin : adds user permissions
    note left of solr   : localhost only
}

client - -> plugin
plugin - -> api
api    - -> solr
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.4+7-Debian-3
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<figcaption>
<p><span class="caption-text">Components used in searching</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id4">
<div align="center" class="pic align-center pic-format-text-xml pic-language-uml">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="336px" preserveAspectRatio="none" style="width:467px;height:336px;" version="1.1" viewBox="0 0 467 336" width="467px" zoomAndPan="magnify"><defs><filter height="300%" id="f1o8ouq97ynnmp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="47" x2="47" y1="68.0679" y2="260.598"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="166" x2="166" y1="68.0679" y2="260.598"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="319.5" x2="319.5" y1="68.0679" y2="260.598"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="417.5" x2="417.5" y1="68.0679" y2="260.598"/><rect fill="#FEFECE" filter="url(#f1o8ouq97ynnmp)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="8" y="30"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="15" y="51.9659">Frontend</text><rect fill="#FEFECE" filter="url(#f1o8ouq97ynnmp)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="8" y="259.598"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="15" y="281.5639">Frontend</text><rect fill="#FEFECE" filter="url(#f1o8ouq97ynnmp)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="97" y="30"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="104" y="51.9659">Wordpress Plugin</text><rect fill="#FEFECE" filter="url(#f1o8ouq97ynnmp)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="97" y="259.598"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="104" y="281.5639">Wordpress Plugin</text><rect fill="#FEFECE" filter="url(#f1o8ouq97ynnmp)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="276.5" y="30"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="283.5" y="51.9659">API Server</text><rect fill="#FEFECE" filter="url(#f1o8ouq97ynnmp)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="276.5" y="259.598"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="283.5" y="281.5639">API Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="373.5" y="63.9659">SOLR Server</text><path d="M399.5,13 C399.5,3 417.5,3 417.5,3 C417.5,3 435.5,3 435.5,13 L435.5,39 C435.5,49 417.5,49 417.5,49 C417.5,49 399.5,49 399.5,39 L399.5,13 " fill="#FEFECE" filter="url(#f1o8ouq97ynnmp)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M399.5,13 C399.5,23 417.5,23 417.5,23 C417.5,23 435.5,23 435.5,13 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="373.5" y="274.5639">SOLR Server</text><path d="M399.5,288.6659 C399.5,278.6659 417.5,278.6659 417.5,278.6659 C417.5,278.6659 435.5,278.6659 435.5,288.6659 L435.5,314.6659 C435.5,324.6659 417.5,324.6659 417.5,324.6659 C417.5,324.6659 399.5,324.6659 399.5,314.6659 L399.5,288.6659 " fill="#FEFECE" filter="url(#f1o8ouq97ynnmp)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M399.5,288.6659 C399.5,298.6659 417.5,298.6659 417.5,298.6659 C417.5,298.6659 435.5,298.6659 435.5,288.6659 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><polygon fill="#A80036" points="154,97.7739,164,101.7739,154,105.7739,158,101.7739" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="47.5" x2="160" y1="101.7739" y2="101.7739"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="54.5" y="95.9649">ajax post</text><polygon fill="#A80036" points="308,129.4799,318,133.4799,308,137.4799,312,133.4799" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="166" x2="314" y1="133.4799" y2="133.4799"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="173" y="127.6709">with user permissions</text><polygon fill="#A80036" points="405.5,143.4799,415.5,147.4799,405.5,151.4799,409.5,147.4799" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="320" x2="411.5" y1="147.4799" y2="147.4799"/><polygon fill="#A80036" points="331,175.186,321,179.186,331,183.186,327,179.186" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="325" x2="416.5" y1="179.186" y2="179.186"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="337" y="173.377">json</text><polygon fill="#A80036" points="177,206.892,167,210.892,177,214.892,173,210.892" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="319" y1="210.892" y2="210.892"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="183" y="205.083">json</text><polygon fill="#A80036" points="58.5,238.598,48.5,242.598,58.5,246.598,54.5,242.598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="52.5" x2="165" y1="242.598" y2="242.598"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="64.5" y="236.789">json</text><!--MD5=[53a581b5941ecb7b437fd37c6afaa54a]
@startuml

   skinparam backgroundColor transparent
   skinparam DefaultTextAlignment center
   skinparam componentStyle uml2
   skinparam actorStyle awesome

participant "Frontend"         as client
participant "Wordpress Plugin" as plugin
participant "API Server"       as api
database    "SOLR Server"      as solr

client -> plugin : ajax post
plugin -> api    : with user permissions
api    -> solr

solr   -> api    : json
api    -> plugin : json
plugin -> client : json
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.4+7-Debian-3
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<figcaption>
<p><span class="caption-text">Data flow while searching</span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="collation_tool.html" class="btn btn-neutral float-left" title="Collation Tool Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="makefile.html" class="btn btn-neutral float-right" title="Makefile Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-24 CCeH - Licensed under the GNU GPL v3 or later.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>