

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Overview of the Collation Tool &mdash; Capitularia 0.1.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Meta Search" href="meta_search.html" />
    <link rel="prev" title="HTML Generation" href="html_generation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Capitularia
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#platforms">Platforms</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../overviews.html">Overviews</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="html_generation.html">HTML Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="html_generation.html#xslt-transformations">XSLT Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="html_generation.html#user-delivery">User Delivery</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Overview of the Collation Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pre-processing-of-the-tei-files">Pre-Processing of the TEI files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collation">Collation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-version-of-collatex">Custom Version of CollateX</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="meta_search.html">Meta Search</a><ul>
<li class="toctree-l3"><a class="reference internal" href="meta_search.html#metadata-extraction">Metadata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="meta_search.html#fulltext-extraction">Fulltext Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="meta_search.html#search">Search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="collections.html">Collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="collections.html#algorithm">Algorithm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../webprojekt.html">RRZK Web Projekt Capitularia</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../webprojekt/wordpress.html">Wordpress Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webprojekt/database.html">Wordpress Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../webprojekt/database.html#metadata">Metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../webprojekt/wordpress-custom.html">Wordpress Customizations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../webprojekt/wordpress/theme.html">Wordpress Theme</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webprojekt/wordpress/plugins.html">Wordpress Plugins</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../vm.html">Capitularia VM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../vm/app_server.html">Application Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#server">server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-data_server">data_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-collatex_server">collatex_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-geo_server">geo_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-tile_server">tile_server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/database.html">Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#schema-capitularia">Schema <em>capitularia:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#schema-gis">Schema <em>gis:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#module-db">db.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/transformations.html">XSLT Transformations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/transformations.html#capitulary-pages">Capitulary Pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/transformations.html#lists-of-capitularies">Lists of Capitularies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/transformations.html#manuscript-pages">Manuscript Pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/transformations.html#lists-of-manuscripts">Lists of Manuscripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/transformations.html#lists-of-resources">Lists of Resources</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Capitularia</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../overviews.html">Overviews</a> &raquo;</li>
        
      <li>Overview of the Collation Tool</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/overviews/collation_tool.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="overview-of-the-collation-tool">
<span id="collation-tool-overview"></span><h1>Overview of the Collation Tool<a class="headerlink" href="#overview-of-the-collation-tool" title="Permalink to this headline">¶</a></h1>
<p>Description of the collation tool and the processing of the TEI files.</p>
<div class="section" id="pre-processing-of-the-tei-files">
<h2>Pre-Processing of the TEI files<a class="headerlink" href="#pre-processing-of-the-tei-files" title="Permalink to this headline">¶</a></h2>
<p>We extract every chapter of every capitular from all manuscripts and store them
separately in the Postgres database on the application Server.  The text stored
in the database is already normalized.</p>
<p>If a manuscript contains more than one copy of a chapter, all copies are
extracted.  If a corrector hand was active in the chapter, an original and a
corrected version are both extracted.  The collation tool knows about all these
versions and offers them to the user.</p>
<div class="figure align-center" id="id3">
<div  class="pic pic-format-dot">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="549px" preserveAspectRatio="none" style="width:522px;height:549px;" version="1.1" viewBox="0 0 522 549" width="522px" zoomAndPan="magnify"><defs><filter height="300%" id="feovj3bnq09xh" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster VM--><path d="M25,102 C25,99 27,97 30,97 C33,97 35,99 35,102 C35,99 37,97 40,97 C43,97 45,99 45,102 C45,99 47,97 50,97 C53,97 55,99 55,102 C55,99 57,97 60,97 C63,97 65,99 65,102 C65,99 67,97 70,97 C73,97 75,99 75,102 C75,99 77,97 80,97 C83,97 85,99 85,102 C85,99 87,97 90,97 C93,97 95,99 95,102 C95,99 97,97 100,97 C103,97 105,99 105,102 C105,99 107,97 110,97 C113,97 115,99 115,102 C115,99 117,97 120,97 C123,97 125,99 125,102 C125,99 127,97 130,97 C133,97 135,99 135,102 C135,99 137,97 140,97 C143,97 145,99 145,102 C145,99 147,97 150,97 C153,97 155,99 155,102 C155,99 157,97 160,97 C163,97 165,99 165,102 C165,99 167,97 170,97 C173,97 175,99 175,102 C175,99 177,97 180,97 C183,97 185,99 185,102 C185,99 187,97 190,97 C193,97 195,99 195,102 C195,99 197,97 200,97 C203,97 205,99 205,102 C205,99 207,97 210,97 C213,97 215,99 215,102 C215,99 217,97 220,97 C223,97 225,99 225,102 C225,99 227,97 230,97 C233,97 235,99 235,102 C235,99 237,97 240,97 C243,97 245,99 245,102 C245,99 247,97 250,97 C253,97 255,99 255,102 C255,99 257,97 260,97 C263,97 265,99 265,102 C265,99 267,97 270,97 C273,97 275,99 275,102 C275,99 277,97 280,97 C283,97 285,99 285,102 C285,99 287,97 290,97 C293,97 295,99 295,102 C295,99 297,97 300,97 C303,97 305,99 305,102 C305,99 307,97 310,97 C313,97 315,99 315,102 C315,99 317,97 320,97 C323,97 325,99 325,102 C325,99 327,97 330,97 C333,97 335,99 335,102 C335,99 337,97 340,97 C343,97 345,99 345,102 C345,99 347,97 350,97 C353,97 355,99 355,102 C355,99 357,97 360,97 C363,97 365,99 365,102 C365,99 367,97 370,97 C373,97 375,99 375,102 C375,99 377,97 380,97 C383,97 385,99 385,102 C385,99 387,97 390,97 C393,97 395,99 395,102 C395,99 397,97 400,97 C403,97 405,99 405,102 C405,99 407,97 410,97 C413,97 415,99 415,102 C415,99 417,97 420,97 C423,97 425,99 425,102 C425,99 427,97 430,97 C433,97 435,99 435,102 C435,99 437,97 440,97 C443,97 445,99 445,102 C445,99 447,97 450,97 C453,97 455,99 455,102 C455,99 457,97 460,97 C463,97 465,99 465,102 C465,99 467,97 470,97 C473,97 475,99 475,102 C475,99 477,97 480,97 C483,97 485,99 485,102 C485,99 487,97 490,97 C493,97 495,99 495,102 C495,99 497,97 500,97 C503,97 505,99 505,102 C508,102 510,104 510,107 C510,110 508,112 505,112 C508,112 510,114 510,117 C510,120 508,122 505,122 C508,122 510,124 510,127 C510,130 508,132 505,132 C508,132 510,134 510,137 C510,140 508,142 505,142 C508,142 510,144 510,147 C510,150 508,152 505,152 C508,152 510,154 510,157 C510,160 508,162 505,162 C508,162 510,164 510,167 C510,170 508,172 505,172 C508,172 510,174 510,177 C510,180 508,182 505,182 C508,182 510,184 510,187 C510,190 508,192 505,192 C508,192 510,194 510,197 C510,200 508,202 505,202 C508,202 510,204 510,207 C510,210 508,212 505,212 C508,212 510,214 510,217 C510,220 508,222 505,222 C508,222 510,224 510,227 C510,230 508,232 505,232 C508,232 510,234 510,237 C510,240 508,242 505,242 C508,242 510,244 510,247 C510,250 508,252 505,252 C508,252 510,254 510,257 C510,260 508,262 505,262 C508,262 510,264 510,267 C510,270 508,272 505,272 C508,272 510,274 510,277 C510,280 508,282 505,282 C508,282 510,284 510,287 C510,290 508,292 505,292 C508,292 510,294 510,297 C510,300 508,302 505,302 C508,302 510,304 510,307 C510,310 508,312 505,312 C508,312 510,314 510,317 C510,320 508,322 505,322 C508,322 510,324 510,327 C510,330 508,332 505,332 C508,332 510,334 510,337 C510,340 508,342 505,342 C508,342 510,344 510,347 C510,350 508,352 505,352 C508,352 510,354 510,357 C510,360 508,362 505,362 C508,362 510,364 510,367 C510,370 508,372 505,372 C508,372 510,374 510,377 C510,380 508,382 505,382 C508,382 510,384 510,387 C510,390 508,392 505,392 C508,392 510,394 510,397 C510,400 508,402 505,402 C508,402 510,404 510,407 C510,410 508,412 505,412 C508,412 510,414 510,417 C510,420 508,422 505,422 C508,422 510,424 510,427 C510,430 508,432 505,432 C508,432 510,434 510,437 C510,440 508,442 505,442 C508,442 510,444 510,447 C510,450 508,452 505,452 C508,452 510,454 510,457 C510,460 508,462 505,462 C508,462 510,464 510,467 C510,470 508,472 505,472 C508,472 510,474 510,477 C510,480 508,482 505,482 C508,482 510,484 510,487 C510,490 508,492 505,492 C508,492 510,494 510,497 C510,500 508,502 505,502 C508,502 510,504 510,507 C510,510 508,512 505,512 C508,512 510,514 510,517 C510,520 508,522 505,522 C508,522 510,524 510,527 C510,530 508,532 505,532 C505,535 502,537 500,537 C497,537 495,535 495,532 C495,535 492,537 490,537 C487,537 485,535 485,532 C485,535 482,537 480,537 C477,537 475,535 475,532 C475,535 472,537 470,537 C467,537 465,535 465,532 C465,535 462,537 460,537 C457,537 455,535 455,532 C455,535 452,537 450,537 C447,537 445,535 445,532 C445,535 442,537 440,537 C437,537 435,535 435,532 C435,535 432,537 430,537 C427,537 425,535 425,532 C425,535 422,537 420,537 C417,537 415,535 415,532 C415,535 412,537 410,537 C407,537 405,535 405,532 C405,535 402,537 400,537 C397,537 395,535 395,532 C395,535 392,537 390,537 C387,537 385,535 385,532 C385,535 382,537 380,537 C377,537 375,535 375,532 C375,535 372,537 370,537 C367,537 365,535 365,532 C365,535 362,537 360,537 C357,537 355,535 355,532 C355,535 352,537 350,537 C347,537 345,535 345,532 C345,535 342,537 340,537 C337,537 335,535 335,532 C335,535 332,537 330,537 C327,537 325,535 325,532 C325,535 322,537 320,537 C317,537 315,535 315,532 C315,535 312,537 310,537 C307,537 305,535 305,532 C305,535 302,537 300,537 C297,537 295,535 295,532 C295,535 292,537 290,537 C287,537 285,535 285,532 C285,535 282,537 280,537 C277,537 275,535 275,532 C275,535 272,537 270,537 C267,537 265,535 265,532 C265,535 262,537 260,537 C257,537 255,535 255,532 C255,535 252,537 250,537 C247,537 245,535 245,532 C245,535 242,537 240,537 C237,537 235,535 235,532 C235,535 232,537 230,537 C227,537 225,535 225,532 C225,535 222,537 220,537 C217,537 215,535 215,532 C215,535 212,537 210,537 C207,537 205,535 205,532 C205,535 202,537 200,537 C197,537 195,535 195,532 C195,535 192,537 190,537 C187,537 185,535 185,532 C185,535 182,537 180,537 C177,537 175,535 175,532 C175,535 172,537 170,537 C167,537 165,535 165,532 C165,535 162,537 160,537 C157,537 155,535 155,532 C155,535 152,537 150,537 C147,537 145,535 145,532 C145,535 142,537 140,537 C137,537 135,535 135,532 C135,535 132,537 130,537 C127,537 125,535 125,532 C125,535 122,537 120,537 C117,537 115,535 115,532 C115,535 112,537 110,537 C107,537 105,535 105,532 C105,535 102,537 100,537 C97,537 95,535 95,532 C95,535 92,537 90,537 C87,537 85,535 85,532 C85,535 82,537 80,537 C77,537 75,535 75,532 C75,535 72,537 70,537 C67,537 65,535 65,532 C65,535 62,537 60,537 C57,537 55,535 55,532 C55,535 52,537 50,537 C47,537 45,535 45,532 C45,535 42,537 40,537 C37,537 35,535 35,532 C35,535 32,537 30,537 C27,537 25,535 25,532 C22,532 20,530 20,527 C20,524 22,522 25,522 C22,522 20,520 20,517 C20,514 22,512 25,512 C22,512 20,510 20,507 C20,504 22,502 25,502 C22,502 20,500 20,497 C20,494 22,492 25,492 C22,492 20,490 20,487 C20,484 22,482 25,482 C22,482 20,480 20,477 C20,474 22,472 25,472 C22,472 20,470 20,467 C20,464 22,462 25,462 C22,462 20,460 20,457 C20,454 22,452 25,452 C22,452 20,450 20,447 C20,444 22,442 25,442 C22,442 20,440 20,437 C20,434 22,432 25,432 C22,432 20,430 20,427 C20,424 22,422 25,422 C22,422 20,420 20,417 C20,414 22,412 25,412 C22,412 20,410 20,407 C20,404 22,402 25,402 C22,402 20,400 20,397 C20,394 22,392 25,392 C22,392 20,390 20,387 C20,384 22,382 25,382 C22,382 20,380 20,377 C20,374 22,372 25,372 C22,372 20,370 20,367 C20,364 22,362 25,362 C22,362 20,360 20,357 C20,354 22,352 25,352 C22,352 20,350 20,347 C20,344 22,342 25,342 C22,342 20,340 20,337 C20,334 22,332 25,332 C22,332 20,330 20,327 C20,324 22,322 25,322 C22,322 20,320 20,317 C20,314 22,312 25,312 C22,312 20,310 20,307 C20,304 22,302 25,302 C22,302 20,300 20,297 C20,294 22,292 25,292 C22,292 20,290 20,287 C20,284 22,282 25,282 C22,282 20,280 20,277 C20,274 22,272 25,272 C22,272 20,270 20,267 C20,264 22,262 25,262 C22,262 20,260 20,257 C20,254 22,252 25,252 C22,252 20,250 20,247 C20,244 22,242 25,242 C22,242 20,240 20,237 C20,234 22,232 25,232 C22,232 20,230 20,227 C20,224 22,222 25,222 C22,222 20,220 20,217 C20,214 22,212 25,212 C22,212 20,210 20,207 C20,204 22,202 25,202 C22,202 20,200 20,197 C20,194 22,192 25,192 C22,192 20,190 20,187 C20,184 22,182 25,182 C22,182 20,180 20,177 C20,174 22,172 25,172 C22,172 20,170 20,167 C20,164 22,162 25,162 C22,162 20,160 20,157 C20,154 22,152 25,152 C22,152 20,150 20,147 C20,144 22,142 25,142 C22,142 20,140 20,137 C20,134 22,132 25,132 C22,132 20,130 20,127 C20,124 22,122 25,122 C22,122 20,120 20,117 C20,114 22,112 25,112 C22,112 20,110 20,107 C20,104 22,102 25,102 " fill="#FFFFFF" filter="url(#feovj3bnq09xh)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="251" y="120.9951">VM</text><!--entity cron--><rect fill="#FEFECE" filter="url(#feovj3bnq09xh)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="38.5" y="130"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="91.5" y="135"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="89.5" y="137"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="89.5" y="141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="53.5" y="162.9951">Cron</text><!--entity make--><rect fill="#FEFECE" filter="url(#feovj3bnq09xh)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="147" y="130"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="223" y="135"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="221" y="137"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="221" y="141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="162" y="162.9951">Makefile</text><!--entity saxon--><rect fill="#FEFECE" filter="url(#feovj3bnq09xh)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="209" x="278.5" y="130"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="467.5" y="135"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="465.5" y="137"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="465.5" y="141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="169" x="293.5" y="162.9951">mss-extract-chapters.xsl</text><!--entity chapters--><path d="M360,246 C360,236 413,236 413,236 C413,236 466,236 466,246 L466,287.5938 C466,297.5938 413,297.5938 413,297.5938 C413,297.5938 360,297.5938 360,287.5938 L360,246 " fill="#FEFECE" filter="url(#feovj3bnq09xh)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M360,246 C360,256 413,256 413,256 C413,256 466,256 466,246 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="370" y="272.9951">Chapter files</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="377" y="289.292">(plain text)</text><path d="M97.5,254.5 L97.5,279.6328 A0,0 0 0 0 97.5,279.6328 L324.5,279.6328 A0,0 0 0 0 324.5,279.6328 L324.5,272.5 L359.84,267 L324.5,264.5 L324.5,264.5 L314.5,254.5 L97.5,254.5 A0,0 0 0 0 97.5,254.5 " fill="#FBFB77" filter="url(#feovj3bnq09xh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M314.5,254.5 L314.5,264.5 L324.5,264.5 L314.5,254.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="103.5" y="271.5669">AFS:publ/cache/extracted/*/*.txt</text><!--entity import--><rect fill="#FEFECE" filter="url(#feovj3bnq09xh)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="199" y="358"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="283" y="363"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="281" y="365"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="281" y="369"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="214" y="390.9951">import.py</text><!--entity db--><path d="M205,474 C205,464 251,464 251,464 C251,464 297,464 297,474 L297,515.5938 C297,525.5938 251,525.5938 251,525.5938 C251,525.5938 205,525.5938 205,515.5938 L205,474 " fill="#FEFECE" filter="url(#feovj3bnq09xh)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M205,474 C205,484 251,484 251,484 C251,484 297,484 297,474 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="218" y="500.9951">Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="215" y="517.292">(Postgres)</text><!--entity tei--><path d="M319.5,18 C319.5,8 383,8 383,8 C383,8 446.5,8 446.5,18 L446.5,59.5938 C446.5,69.5938 383,69.5938 383,69.5938 C383,69.5938 319.5,69.5938 319.5,59.5938 L319.5,18 " fill="#FEFECE" filter="url(#feovj3bnq09xh)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M319.5,18 C319.5,28 383,28 383,28 C383,28 446.5,28 446.5,18 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="329.5" y="44.9951">Manuscript files</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="347.5" y="61.292">(XML+TEI)</text><path d="M138,26.5 L138,51.6328 A0,0 0 0 0 138,51.6328 L284,51.6328 A0,0 0 0 0 284,51.6328 L284,44.5 L319.34,39 L284,36.5 L284,36.5 L274,26.5 L138,26.5 A0,0 0 0 0 138,26.5 " fill="#FBFB77" filter="url(#feovj3bnq09xh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M274,26.5 L274,36.5 L284,36.5 L274,26.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="144" y="43.5669">AFS:publ/mss/*.xml</text><!--link tei to saxon--><path d="M383,70.01 C383,86.9 383,107.83 383,124.32 " fill="none" id="tei-saxon" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="383,129.72,387,120.72,383,124.72,379,120.72,383,129.72" style="stroke: #A80036; stroke-width: 1.0;"/><!--link saxon to chapters--><path d="M388.93,176.13 C393.11,191.74 398.8,212.99 403.6,230.9 " fill="none" id="saxon-chapters" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="404.93,235.86,406.4796,226.1338,403.6435,231.0284,398.7489,228.1923,404.93,235.86" style="stroke: #A80036; stroke-width: 1.0;"/><!--link chapters to import--><path d="M369.59,298.01 C343.8,315.84 311.5,338.18 287.11,355.03 " fill="none" id="chapters-import" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="282.97,357.9,292.6482,356.0746,287.0835,355.0577,288.1005,349.493,282.97,357.9" style="stroke: #A80036; stroke-width: 1.0;"/><!--link import to db--><path d="M251,404.13 C251,419.61 251,440.63 251,458.44 " fill="none" id="import-db" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="251,463.86,255,454.86,251,458.86,247,454.86,251,463.86" style="stroke: #A80036; stroke-width: 1.0;"/><!--link cron to make--><path d="M111.56,153 C121.55,153 131.55,153 141.54,153 " fill="none" id="cron-make" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="146.76,153,137.76,149,141.76,153,137.76,157,146.76,153" style="stroke: #A80036; stroke-width: 1.0;"/><!--link make to saxon--><path d="M243.1,153 C253.11,153 263.11,153 273.12,153 " fill="none" id="make-saxon" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="278.35,153,269.35,149,273.35,153,269.35,157,278.35,153" style="stroke: #A80036; stroke-width: 1.0;"/><!--link make to import--><path d="M146.8,174.87 C122.01,188.4 94.09,208.64 80,236 C67.38,260.5 65.32,274.68 80,298 C104.76,337.33 154.21,358.22 193.59,369.05 " fill="none" id="make-import" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="198.83,370.44,191.1577,364.2645,193.9974,369.157,189.1049,371.9967,198.83,370.44" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
skinparam backgroundColor transparent
skinparam DefaultTextAlignment center
skinparam componentStyle uml2

database  "Manuscript files\n(XML+TEI)"      as tei
note left of tei: AFS:publ/mss/*.xml

cloud "VM" {
  component "Cron"                          as cron
  component "Makefile"                      as make
  component "mss-extract-chapters.xsl"      as saxon
  database  "Chapter files\n(plain text)"   as chapters
  note left of chapters: AFS:publ/cache/extracted/*/*.txt
  component "import.py"                     as import
  database  "Database\n(Postgres)"          as db
}

tei      - -> saxon
saxon    - -> chapters
chapters - -> import
import   - -> db

cron .> make
make .> saxon
make .> import
@enduml

PlantUML version 1.2018.13(Mon Nov 26 18:11:51 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+10-post-Debian-1
Operating System: Linux
OS Version: 5.3.0-3-amd64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<p class="caption"><span class="caption-text">Data flow during pre-processing</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>The Makefile is run by cron on the Capitularia VM at regular intervals.</p>
<p>The manuscript files are in the AFS.  The AFS is mounted onto the VM.</p>
<p>The Makefile knows all the dependencies between the files and runs the
appropriate tools to keep the database up-to-date with the manuscript files.</p>
<p>All intermediate files can be found in the cache/extracted directory.  One
directory per manuscript, and one file per chapter, copy, and hand.  The
intermediate files are normalized, eg. have V replaced by U.</p>
<p>The import.py script imports the intermediate text files into the database.</p>
</div>
<div class="section" id="collation">
<h2>Collation<a class="headerlink" href="#collation" title="Permalink to this headline">¶</a></h2>
<p>The collation tool is divided in two parts, one frontend written in JavaScript
and the Vue.js library, and one backend application server written in Python.
The backend retrieves the chapters to collate from the database and calls the
CollateX executable to do the actual collation. The results are sent to the
frontend that does the formatting for display.</p>
<div class="figure align-center" id="id4">
<div  class="pic pic-format-dot">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="377px" preserveAspectRatio="none" style="width:312px;height:377px;" version="1.1" viewBox="0 0 312 377" width="312px" zoomAndPan="magnify"><defs><filter height="300%" id="fatoh9c7dr305" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster VM--><path d="M25,31 C25,28 27,26 30,26 C33,26 35,28 35,31 C35,28 37,26 40,26 C43,26 45,28 45,31 C45,28 47,26 50,26 C53,26 55,28 55,31 C55,28 57,26 60,26 C63,26 65,28 65,31 C65,28 67,26 70,26 C73,26 75,28 75,31 C75,28 77,26 80,26 C83,26 85,28 85,31 C85,28 87,26 90,26 C93,26 95,28 95,31 C95,28 97,26 100,26 C103,26 105,28 105,31 C105,28 107,26 110,26 C113,26 115,28 115,31 C115,28 117,26 120,26 C123,26 125,28 125,31 C125,28 127,26 130,26 C133,26 135,28 135,31 C135,28 137,26 140,26 C143,26 145,28 145,31 C145,28 147,26 150,26 C153,26 155,28 155,31 C155,28 157,26 160,26 C163,26 165,28 165,31 C165,28 167,26 170,26 C173,26 175,28 175,31 C175,28 177,26 180,26 C183,26 185,28 185,31 C185,28 187,26 190,26 C193,26 195,28 195,31 C195,28 197,26 200,26 C203,26 205,28 205,31 C205,28 207,26 210,26 C213,26 215,28 215,31 C215,28 217,26 220,26 C223,26 225,28 225,31 C225,28 227,26 230,26 C233,26 235,28 235,31 C235,28 237,26 240,26 C243,26 245,28 245,31 C245,28 247,26 250,26 C253,26 255,28 255,31 C255,28 257,26 260,26 C263,26 265,28 265,31 C265,28 267,26 270,26 C273,26 275,28 275,31 C275,28 277,26 280,26 C283,26 285,28 285,31 C285,28 287,26 290,26 C293,26 295,28 295,31 C298,31 300,33 300,36 C300,39 298,41 295,41 C298,41 300,43 300,46 C300,49 298,51 295,51 C298,51 300,53 300,56 C300,59 298,61 295,61 C298,61 300,63 300,66 C300,69 298,71 295,71 C298,71 300,73 300,76 C300,79 298,81 295,81 C298,81 300,83 300,86 C300,89 298,91 295,91 C298,91 300,93 300,96 C300,99 298,101 295,101 C298,101 300,103 300,106 C300,109 298,111 295,111 C298,111 300,113 300,116 C300,119 298,121 295,121 C298,121 300,123 300,126 C300,129 298,131 295,131 C298,131 300,133 300,136 C300,139 298,141 295,141 C298,141 300,143 300,146 C300,149 298,151 295,151 C298,151 300,153 300,156 C300,159 298,161 295,161 C298,161 300,163 300,166 C300,169 298,171 295,171 C298,171 300,173 300,176 C300,179 298,181 295,181 C298,181 300,183 300,186 C300,189 298,191 295,191 C298,191 300,193 300,196 C300,199 298,201 295,201 C298,201 300,203 300,206 C300,209 298,211 295,211 C298,211 300,213 300,216 C300,219 298,221 295,221 C298,221 300,223 300,226 C300,229 298,231 295,231 C298,231 300,233 300,236 C300,239 298,241 295,241 C298,241 300,243 300,246 C300,249 298,251 295,251 C295,254 292,256 290,256 C287,256 285,254 285,251 C285,254 282,256 280,256 C277,256 275,254 275,251 C275,254 272,256 270,256 C267,256 265,254 265,251 C265,254 262,256 260,256 C257,256 255,254 255,251 C255,254 252,256 250,256 C247,256 245,254 245,251 C245,254 242,256 240,256 C237,256 235,254 235,251 C235,254 232,256 230,256 C227,256 225,254 225,251 C225,254 222,256 220,256 C217,256 215,254 215,251 C215,254 212,256 210,256 C207,256 205,254 205,251 C205,254 202,256 200,256 C197,256 195,254 195,251 C195,254 192,256 190,256 C187,256 185,254 185,251 C185,254 182,256 180,256 C177,256 175,254 175,251 C175,254 172,256 170,256 C167,256 165,254 165,251 C165,254 162,256 160,256 C157,256 155,254 155,251 C155,254 152,256 150,256 C147,256 145,254 145,251 C145,254 142,256 140,256 C137,256 135,254 135,251 C135,254 132,256 130,256 C127,256 125,254 125,251 C125,254 122,256 120,256 C117,256 115,254 115,251 C115,254 112,256 110,256 C107,256 105,254 105,251 C105,254 102,256 100,256 C97,256 95,254 95,251 C95,254 92,256 90,256 C87,256 85,254 85,251 C85,254 82,256 80,256 C77,256 75,254 75,251 C75,254 72,256 70,256 C67,256 65,254 65,251 C65,254 62,256 60,256 C57,256 55,254 55,251 C55,254 52,256 50,256 C47,256 45,254 45,251 C45,254 42,256 40,256 C37,256 35,254 35,251 C35,254 32,256 30,256 C27,256 25,254 25,251 C22,251 20,249 20,246 C20,243 22,241 25,241 C22,241 20,239 20,236 C20,233 22,231 25,231 C22,231 20,229 20,226 C20,223 22,221 25,221 C22,221 20,219 20,216 C20,213 22,211 25,211 C22,211 20,209 20,206 C20,203 22,201 25,201 C22,201 20,199 20,196 C20,193 22,191 25,191 C22,191 20,189 20,186 C20,183 22,181 25,181 C22,181 20,179 20,176 C20,173 22,171 25,171 C22,171 20,169 20,166 C20,163 22,161 25,161 C22,161 20,159 20,156 C20,153 22,151 25,151 C22,151 20,149 20,146 C20,143 22,141 25,141 C22,141 20,139 20,136 C20,133 22,131 25,131 C22,131 20,129 20,126 C20,123 22,121 25,121 C22,121 20,119 20,116 C20,113 22,111 25,111 C22,111 20,109 20,106 C20,103 22,101 25,101 C22,101 20,99 20,96 C20,93 22,91 25,91 C22,91 20,89 20,86 C20,83 22,81 25,81 C22,81 20,79 20,76 C20,73 22,71 25,71 C22,71 20,69 20,66 C20,63 22,61 25,61 C22,61 20,59 20,56 C20,53 22,51 25,51 C22,51 20,49 20,46 C20,43 22,41 25,41 C22,41 20,39 20,36 C20,33 22,31 25,31 " fill="#FFFFFF" filter="url(#fatoh9c7dr305)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="146.5" y="49.9951">VM</text><!--entity db--><path d="M47,69 C47,59 93,59 93,59 C93,59 139,59 139,69 L139,110.5938 C139,120.5938 93,120.5938 93,120.5938 C93,120.5938 47,120.5938 47,110.5938 L47,69 " fill="#FEFECE" filter="url(#fatoh9c7dr305)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M47,69 C47,79 93,79 93,79 C93,79 139,79 139,69 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="60" y="95.9951">Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="57" y="112.292">(Postgres)</text><!--entity api--><rect fill="#FEFECE" filter="url(#fatoh9c7dr305)" height="62.5938" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="38.5" y="181"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="127.5" y="186"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="125.5" y="188"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="125.5" y="192"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="53.5" y="213.9951">API Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="59" y="230.292">(Python)</text><!--entity cx--><rect fill="#FEFECE" filter="url(#fatoh9c7dr305)" height="62.5938" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="183" y="181"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="259" y="186"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="257" y="188"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="257" y="192"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="198" y="213.9951">CollateX</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="208" y="230.292">(Java)</text><!--entity client--><rect fill="#FEFECE" filter="url(#fatoh9c7dr305)" height="62.5938" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="36" y="304"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="130" y="309"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="128" y="311"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="128" y="315"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="56.5" y="336.9951">Frontend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="51" y="353.292">(Javascript)</text><!--link db to api--><path d="M93,121.1 C93,137.65 93,158.29 93,175.67 " fill="none" id="db-api" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="93,180.95,97,171.95,93,175.95,89,171.95,93,180.95" style="stroke: #A80036; stroke-width: 1.0;"/><!--link api to client--><path d="M93,244.03 C93,260.66 93,281.32 93,298.7 " fill="none" id="api-client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="93,303.98,97,294.98,93,298.98,89,294.98,93,303.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--link api to cx--><path d="M152.93,235.72 C162.9,236.61 172.88,236.03 182.85,233.97 " fill="none" id="api-cx" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="147.71,235.11,156.1944,240.1116,152.6773,235.681,157.1079,232.1639,147.71,235.11" style="stroke: #A80036; stroke-width: 1.0;"/><!--link api to cx--><path d="M147.71,189.89 C157.78,188.46 167.84,188.54 177.91,190.13 " fill="none" id="api-cx" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="182.85,191.03,174.715,185.4783,177.9313,190.1318,173.2779,193.3482,182.85,191.03" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
skinparam backgroundColor transparent
skinparam DefaultTextAlignment center
skinparam componentStyle uml2

cloud "VM" {
  database  "Database\n(Postgres)"   as db
  component "API Server\n(Python)"   as api
  component "CollateX\n(Java)"       as cx
}
component "Frontend\n(Javascript)" as client

db     - -> api
api    - -> client
api    <- cx
api    -> cx
@enduml

PlantUML version 1.2018.13(Mon Nov 26 18:11:51 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+10-post-Debian-1
Operating System: Linux
OS Version: 5.3.0-3-amd64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<p class="caption"><span class="caption-text">Data flow during collation</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>The collation unit is the chapter, so that only short texts need to be collated,
saving much processing time.</p>
<p>We aim to rewrite all the functionality we need of CollateX in Python or
Javascript and then drop the dependency on CollateX.</p>
<p>The Wordpress cap-collation-user plugin delivers the Javascript client to the
user.  After that, all communication happens directly between the client and the
application server.</p>
</div>
<div class="section" id="custom-version-of-collatex">
<span id="custom-collatex"></span><h2>Custom Version of CollateX<a class="headerlink" href="#custom-version-of-collatex" title="Permalink to this headline">¶</a></h2>
<p>Our custom version of CollateX uses a custom word comparison function.</p>
<p>The stock version of CollateX <a class="reference internal" href="#collatex" id="id1"><span>[CollateX]</span></a> uses word comparison functions that
only return binary values, signalling either a match or a mismatch.  Our custom
version uses a word comparison function that returns a similarity value between
0 and 1.  This works much better when aligning variant orthographies of the same
word.</p>
<p>In our custom CollateX we also implemented an enhancement of the
Needleman-Wunsch algorithm by Gotoh. <a class="reference internal" href="#gotoh1982" id="id2"><span>[Gotoh1982]</span></a></p>
<div class="section" id="word-comparison-function">
<h3>Word Comparison Function<a class="headerlink" href="#word-comparison-function" title="Permalink to this headline">¶</a></h3>
<p>The word comparison function returns a similarity value between 0 and 1.</p>
<p>All words in the input texts are split into sets of trigrams.  This is done only
once.  The trigrams are obtained by first prefixing and suffixing the word with
two spaces respectively, then cutting the resulting string it into all possible
strings of length 3.  This means that trigrams may partially overlap each other.</p>
<p>The resulting sets of trigrams are then used in the similarity calculation.</p>
<p>To calculate the similarity between two words, a set is built containing only
the trigrams common to both words.  The magnitude of this set is then compared
against the number of trigrams in both words:</p>
<blockquote>
<div><p>similarity = 2.0 * triAB.size() / (triA.size() + triB.size());</p>
</div></blockquote>
<p>The similarity based on trigrams was chosen because its calculation can be done
in O(n) time whereas a similarity based on Levenshtein distance needs O(n²)
time.  The sets of trigrams for each input word are calculated only once and if
you presort the trigrams in these sets, the common set can be found in O(n)
time.  To be implemented: in a first step gather all trigrams, give each one an
integer id, and later operate on the ids only.  (Maybe hash each trigram onto a
value 0..63 and build a bitmask for each word, later operate on the masks only.)</p>
<dl class="citation">
<dt class="label" id="gotoh1982"><span class="brackets"><a class="fn-backref" href="#id2">Gotoh1982</a></span></dt>
<dd><p>Gotoh, O. 1982,  <em>An Improved Algorithm for Matching Biological
Sequences,</em> J. Mol. Biol. 162, 705-708
<a class="reference external" href="http://jaligner.sourceforge.net/references/gotoh1982.pdf">http://jaligner.sourceforge.net/references/gotoh1982.pdf</a></p>
</dd>
<dt class="label" id="collatex"><span class="brackets"><a class="fn-backref" href="#id1">CollateX</a></span></dt>
<dd><p>Dekker, R.H. et al. 2010-2019, <em>CollateX – Software for Collating
Textual Sources,</em> <a class="reference external" href="https://collatex.net/">https://collatex.net/</a></p>
</dd>
</dl>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="meta_search.html" class="btn btn-neutral float-right" title="Meta Search" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="html_generation.html" class="btn btn-neutral float-left" title="HTML Generation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-19 CCeH - Licensed under the GNU GPL v3 or later

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>