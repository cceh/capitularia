<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HTML Generation &mdash; Capitularia 0.2.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon-cceh-blue.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Overview of the Collation Tool" href="collation_tool.html" />
    <link rel="prev" title="Overviews" href="../overviews.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Capitularia
              <img src="../_static/logo-cceh-white.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../overviews.html">Overviews</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">HTML Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#xslt-transformations">XSLT Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-delivery">User Delivery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="collation_tool.html">Overview of the Collation Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#pre-processing-of-the-tei-files">Pre-Processing of the TEI files</a></li>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#id1">Collation Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#collation-algorithm">Collation Algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#word-comparison-function">Word Comparison Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="meta_search.html">Meta Search</a><ul>
<li class="toctree-l3"><a class="reference internal" href="meta_search.html#metadata-extraction">Metadata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="meta_search.html#fulltext-extraction">Fulltext Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="meta_search.html#geodata-extraction">Geodata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="meta_search.html#search">Search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="collections.html">Collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="collections.html#algorithm">Algorithm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../vm.html">Capitularia VM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../vm/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vm/apache.html">Apache Web Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/apache/wordpress.html">Wordpress Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/apache/database.html">Wordpress Database Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/apache/wordpress-custom.html">Wordpress Customizations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/app_server.html">Application Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#server">server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-data_server">data_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-collator_server">collator_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-geo_server">geo_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-tile_server">tile_server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/database.html">Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#schema-capitularia">Schema <em>capitularia:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#schema-gis">Schema <em>gis:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#module-db">db.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/transformations.html">XSLT Transformations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/transformations.html#graph-of-all-transformations">Graph of All Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/transformations.html#graph-of-stylesheet-dependencies">Graph of Stylesheet Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/user.html">Users of the VM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/user.html#users-and-groups">Users and Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/user.html#adding-a-new-user">Adding a New User</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/user.html#security">Security</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/backup.html">TSM Backup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/backup.html#update">Update</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance.html">Maintenance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/wordpress.html">Wordpress Maintenance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../maintenance/wordpress.html#wordpress-upgrades">Wordpress Upgrades</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/logfiles.html">Location of Logfiles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../maintenance/logfiles.html#apache-php">Apache / PHP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../maintenance/logfiles.html#python-app-server">Python App Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../maintenance/logfiles.html#python-import-script">Python Import Script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/collation_tool.html">Troubleshooting the Collation Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/collation_tool.html#manuscripts-do-not-show-up">Manuscripts do not show up</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Capitularia</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../overviews.html">Overviews</a></li>
      <li class="breadcrumb-item active">HTML Generation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/overviews/html_generation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="html-generation">
<span id="id1"></span><h1>HTML Generation<a class="headerlink" href="#html-generation" title="Permalink to this heading">¶</a></h1>
<p>All TEI manuscript files are converted to one (or more) HTML files.  The HTML
files are then included into Wordpress pages with the <a class="reference internal" href="../vm/apache/wordpress/plugins/file-includer.html#file-includer"><span class="std std-ref">File Includer
plugin</span></a>.</p>
<section id="xslt-transformations">
<h2>XSLT Transformations<a class="headerlink" href="#xslt-transformations" title="Permalink to this heading">¶</a></h2>
<figure class="align-center" id="id2">
<div  class="pic pic-format-text-xml pic-language-uml">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="361px" preserveAspectRatio="none"  version="1.1" viewBox="0 0 513 361" width="513px" zoomAndPan="magnify"><defs><filter height="300%" id="fka0s7m3ki2db" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[72ee43ebcd6b294b38e8464aac6a1ff3]
cluster vm--><path d="M40.4155,109.3858 C49.05,96.2888 59.1036,92.8071 69.9518,106.9889 C78.9034,92.4757 92.5437,91.2838 102.3427,106.0515 C110.5541,91.4998 120.2488,93.6036 129.7159,104.712 C139.0174,91.3054 151.0902,91.3663 160.8106,104.2159 C169.3555,89.7109 181.9945,87.7376 193.3929,100.8492 C201.0055,87.7748 214.7577,89.2113 222.2607,100.9765 C231.0454,84.9509 240.1522,86.728 251.0992,98.7534 C262.0107,86.2139 275.562,87.2844 283.0872,102.637 C291.5388,88.3003 303.8529,86.2537 313.5877,101.3052 C323.8523,86.9559 336.2283,87.2851 343.3286,104.3052 C349.5018,89.894 363.5666,88.2044 372.6855,101.1435 C384.4387,86.7319 394.7558,90.0502 403.8451,104.0636 C415.2293,90.3926 425.7793,92.5152 433.4234,107.8744 C446.3288,94.8951 457.8836,94.1417 467,112 C469.9731,110.9941 472.1407,111.9497 471.9764,115.4584 C495.9732,126.5293 501.7976,152.4902 478.4868,169.2833 C501.1693,193.6317 495.4549,223.3531 460,230 C464.6187,228.7768 466.1296,230.6429 465.5766,235.088 C454.9709,250.7838 440.0591,248.2169 433.6128,231.0432 C425.5916,247.1668 414.8134,251.1711 402.0997,235.7277 C393.8485,248.7688 381.0318,245.6321 374.3901,233.9255 C366.9152,250.6947 352.3972,251.1619 343.8601,234.9075 C333.4111,250.1851 323.8492,249.1637 314.1491,234.1723 C304.2902,247.127 293.6691,251.3908 282.8201,235.238 C275.8477,248.9385 261.0943,249.6855 252.0561,237.7133 C240.7929,252.7358 231.4966,250.7283 222.1964,235.759 C211.486,250.6197 199.7239,248.3836 190.7488,233.8994 C181.3355,245.0381 171.1154,247.3644 162.4271,233.0914 C154.0646,248.461 139.6678,251.5184 128.4147,236.3062 C117.7788,251.3405 104.1072,247.6075 98.5599,231.4377 C89.7195,244.2298 76.0914,246.3561 67.4773,231.1861 C53.938,246.0207 36.4375,240.6788 30,223 C32.4655,223.1742 33.473,224.5839 32.508,226.9411 C17.6615,220.6281 15.8634,207.6342 26.573,196.3612 C12.3172,192.3894 8.7344,181.6485 17.5784,169.8419 C7.231,156.6154 11.4854,149.1325 26.5352,145.1001 C10.1612,129.0748 12.9462,110.4749 37,105 C40.0782,104.8618 41.7028,106.1244 40.4155,109.3858 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="198" y="124.9659">Capitularia VM</text><!--MD5=[c80f0d56bca040aa79a2a649a2e57798]
entity cron--><rect fill="#FEFECE" filter="url(#fka0s7m3ki2db)" height="49.0679" style="stroke: #A80036; stroke-width: 1.5;" width="72" x="38" y="154"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="90" y="159"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="88" y="161"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="88" y="165"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="53" y="188.9659">Cron</text><!--MD5=[c35cdf1439de4198207974f82c6d0a64]
entity make--><rect fill="#FEFECE" filter="url(#fka0s7m3ki2db)" height="49.0679" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="145.5" y="154"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="222.5" y="159"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="220.5" y="161"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="220.5" y="165"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="160.5" y="188.9659">Makefile</text><!--MD5=[18796deb02f0659c6ca53e1a4bf65658]
entity saxon--><rect fill="#FEFECE" filter="url(#fka0s7m3ki2db)" height="87.2038" style="stroke: #A80036; stroke-width: 1.5;" width="181" x="277.5" y="135"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="438.5" y="140"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="436.5" y="142"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="436.5" y="146"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="312" y="169.9659">mss-header.xsl</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="141" x="292.5" y="189.0339">mss-transcription.xsl</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="316" y="208.1018">mss-footer.xsl</text><!--MD5=[f43d1bbe4f1159838c5f6e7e47575b7c]
entity tei--><path d="M303.5,18 C303.5,8 368,8 368,8 C368,8 432.5,8 432.5,18 L432.5,65.1358 C432.5,75.1358 368,75.1358 368,75.1358 C368,75.1358 303.5,75.1358 303.5,65.1358 L303.5,18 " fill="#FEFECE" filter="url(#fka0s7m3ki2db)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M303.5,18 C303.5,28 368,28 368,28 C368,28 432.5,28 432.5,18 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="313.5" y="46.9659">Manuscript files</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="335.5" y="66.0339">(XML+TEI)</text><path d="M191.5,27.5 L191.5,55.206 A0,0 0 0 0 191.5,55.206 L268.5,55.206 A0,0 0 0 0 268.5,55.206 L268.5,45.5 L303.12,41.5 L268.5,37.5 L268.5,37.5 L258.5,27.5 L191.5,27.5 A0,0 0 0 0 191.5,27.5 " fill="#FBFB77" filter="url(#fka0s7m3ki2db)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M258.5,27.5 L258.5,37.5 L268.5,37.5 L258.5,27.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="197.5" y="46.397">publ/mss</text><!--MD5=[0a2bd27fccdac7a369aac2b428719809]
entity html--><path d="M303.5,292 C303.5,282 368,282 368,282 C368,282 432.5,282 432.5,292 L432.5,339.1358 C432.5,349.1358 368,349.1358 368,349.1358 C368,349.1358 303.5,349.1358 303.5,339.1358 L303.5,292 " fill="#FEFECE" filter="url(#fka0s7m3ki2db)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M303.5,292 C303.5,302 368,302 368,302 C368,302 432.5,302 432.5,292 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="313.5" y="320.9659">Manuscript files</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="345" y="340.0339">(HTML)</text><path d="M152,301.5 L152,329.206 A0,0 0 0 0 152,329.206 L268,329.206 A0,0 0 0 0 268,329.206 L268,319.5 L303.17,315.5 L268,311.5 L268,311.5 L258,301.5 L152,301.5 A0,0 0 0 0 152,301.5 " fill="#FBFB77" filter="url(#fka0s7m3ki2db)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M258,301.5 L258,311.5 L268,311.5 L258,301.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="158" y="320.397">publ/cache/mss</text><!--MD5=[98113339b43c387f5e9d8a6bec126949]
link tei to saxon--><path d="M368,75.18 C368,91.59 368,111.77 368,129.86 " fill="none" id="tei-&gt;saxon" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="368,134.91,372,125.91,368,129.91,364,125.91,368,134.91" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[219b7a9b396734858da37580f72c6614]
link saxon to html--><path d="M368,222.21 C368,239.72 368,259.8 368,276.75 " fill="none" id="saxon-&gt;html" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="368,281.91,372,272.91,368,276.91,364,272.91,368,281.91" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[16b2f23e595c1c5de587a32b661386ae]
link cron to make--><path d="M110.09,178.5 C120.14,178.5 130.19,178.5 140.24,178.5 " fill="none" id="cron-&gt;make" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="145.49,178.5,136.49,174.5,140.49,178.5,136.49,182.5,145.49,178.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[42211ccb8b439fe830e993a3999a0d06]
link make to saxon--><path d="M242.6,178.5 C252.47,178.5 262.34,178.5 272.21,178.5 " fill="none" id="make-&gt;saxon" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="277.38,178.5,268.38,174.5,272.38,178.5,268.38,182.5,277.38,178.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6b29ecb4ab0ebe3cbf6e0a8e0d44aece]
@startuml

   skinparam backgroundColor transparent
   skinparam DefaultTextAlignment center
   skinparam componentStyle uml2
   skinparam actorStyle awesome

skinparam backgroundColor transparent
skinparam DefaultTextAlignment center
skinparam componentStyle uml2

database  "Manuscript files\n(XML+TEI)" as tei
note left of tei: publ/mss

cloud "Capitularia VM" as vm {
  component "Cron"                       as cron
  component "Makefile"                   as make
  component saxon [mss-header.xsl
  mss-transcription.xsl
  mss-footer.xsl]
}

database  "Manuscript files\n(HTML)"   as html
note left of html: publ/cache/mss

tei      - -> saxon
saxon    - -> html

cron .> make
make .> saxon
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.3-ea+6-Debian-1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<figcaption>
<p><span class="caption-text">Data flow during HTML generation</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>The Makefile is run by cron on the Capitularia VM at regular intervals.</p>
<p>The Makefile knows all the dependencies between the files and runs the
appropriate tools to keep the HTML files up-to-date with the manuscript files.</p>
<p>The HTML files are stored in the cache directory.</p>
<p>See also: the <a class="reference internal" href="../vm/transformations.html#transformations"><span class="std std-ref">list of all transformations</span></a>
complete with input and output files and urls.</p>
</section>
<section id="user-delivery">
<h2>User Delivery<a class="headerlink" href="#user-delivery" title="Permalink to this heading">¶</a></h2>
<figure class="align-center" id="id3">
<div  class="pic pic-format-text-xml pic-language-uml">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="510px" preserveAspectRatio="none"  version="1.1" viewBox="0 0 393 510" width="393px" zoomAndPan="magnify"><defs><filter height="300%" id="foqcauvm0lmdo" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[16b87fbd08c4b66ef34e0b1b8f9df657]
cluster Apache--><path d="M39.442,100.6213 C46.9535,89.7868 56.9397,90.0679 62.4476,102.5944 C67.2685,91.0526 74.8381,92.1353 82.7418,99.2392 C90.5361,86.5798 102.1652,87.219 107.8561,101.2206 C114.4606,92.3297 122.2983,90.6525 129.0303,101.0807 C135.3571,89.7475 146.9489,90.211 153.3214,101.0307 C160.1437,90.6413 167.4275,91.4771 173.679,101.5973 C178.467,88.8363 189.1817,88.0852 196.3154,99.3911 C204.0691,87.6366 215.203,91.6872 220.4028,102.1589 C226.2596,91.9333 235.8425,92.3688 241.976,101.8559 C248.5565,93.1802 257.6694,92.1407 263.8854,102.2803 C269.0093,92.0151 279.5953,89.0448 287.043,99.7089 C295.9492,86.664 305.2057,90.1781 312.1187,101.7401 C316.5583,91.0613 327.0283,90.0304 333.7371,99.2784 C346.0207,88.6656 354.1404,91.5124 360,106 C362.214,106.3995 362.7632,108.0637 361.471,109.815 C372.1753,113.1244 374.8942,122.5015 365.2259,129.6647 C374.6257,138.6992 374.0991,146.4476 362.5735,153.1154 C374.3772,158.6996 374.509,168.3266 363.1511,174.5354 C374.4337,179.974 377.9949,189.8288 366.5344,198.4807 C375.4656,205.3387 377.9818,212.4676 366.7571,219.5388 C377.6277,225.2419 375.2634,234.6732 366.5755,240.2042 C377.1529,244.9547 381.3704,254.2194 370.428,262.6616 C378.9892,270.6711 376.2268,280.9684 365.8922,285.1701 C377.5791,291.8694 379.9306,299.0146 368.7125,308.4847 C377.6971,315.5964 376.9689,322.7142 366.3838,327.4191 C376.2284,333.7622 377.2628,343.6824 366.5488,350.1745 C377.06,358.9448 375.9442,366.9234 364.1135,373.3456 C373.2766,379.8892 373.2697,387.1506 363.5776,393.1849 C376.5621,406.3444 367.3003,418.8563 353,422 C353.9085,421.1035 354.6045,421.5104 355.0175,422.5235 C348.6722,433.6516 339.1343,433.7032 331.4026,424.1029 C326.1186,434.7373 317.586,432.6295 311.9502,424.4669 C306.8406,436.897 296.1111,438.4403 288.628,426.7631 C282.3363,439.4504 270.4712,439.9664 262.7697,428.2575 C256.8589,439.4405 247.7837,437.0084 242.2351,427.8911 C235.1931,439.1871 227.8496,442.0004 218.3933,430.4059 C212.2097,438.7211 202.646,436.795 198.8693,427.706 C191.5238,440.4194 180.3891,438.4807 173.8861,426.8418 C165.9833,436.9573 157.183,439.1939 150.0202,426.0815 C146.0756,435.2793 136.9546,435.918 131.5947,427.5676 C123.6558,441.0825 113.046,442.343 104.7945,427.867 C97.6427,436.7562 91.0336,435.9623 85.3682,426.3096 C77.4377,436.9525 69.3009,434.9322 62.7991,424.7604 C47.8639,436.115 35.363,435.8124 30,415 C32.3385,413.5077 34.4572,414.6574 34.1542,417.5199 C20.2675,412.5619 18.8329,403.4907 29.6377,393.8261 C17.117,388.2319 19.4829,379.4448 27.7867,372.0782 C17.0452,366.607 16.2432,355.5821 26.9122,349.2893 C14.5885,343.681 13.9075,336.7315 24.2742,328.2749 C14.3871,321.151 13.9952,309.9069 26.8528,305.3402 C16.2126,302.8982 14.0655,294.3721 21.3472,286.6507 C9.8968,279.288 9.2361,269.3431 19.9527,260.7854 C10.455,253.6268 13.0035,243.3685 23.3811,239.3956 C12.9941,231.8559 17.1071,222.7542 26.6536,218.3078 C17.0301,212.9314 14.0356,205.8855 24.2784,198.1664 C14.0848,188.7603 17.0872,180.0249 28.7016,174.7357 C17.835,169.2988 15.6802,158.0561 27.5513,151.4938 C17.809,144.2865 22.0022,135.0292 31.5475,131.7197 C17.1111,117.6523 19.0938,107.6777 37,99 C38.4899,98.3578 39.5224,98.8983 39.442,100.6213 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="169.5" y="118.9659">Apache</text><!--MD5=[a56a19e366b740ee8f975c5d1889df88]
cluster Wordpress--><rect fill="#FFFFFF" filter="url(#foqcauvm0lmdo)" height="269" style="stroke: #000000; stroke-width: 1.5;" width="204" x="140" y="137"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="204.5" y="153.9659">Wordpress</text><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><path d="M38.5,332.5 C38.5,322.5 80,322.5 80,322.5 C80,322.5 121.5,322.5 121.5,332.5 L121.5,379.6358 C121.5,389.6358 80,389.6358 80,389.6358 C80,389.6358 38.5,389.6358 38.5,379.6358 L38.5,332.5 " fill="#FEFECE" filter="url(#foqcauvm0lmdo)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M38.5,332.5 C38.5,342.5 80,342.5 80,342.5 C80,342.5 121.5,342.5 121.5,332.5 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="48.5" y="361.4659">Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="56" y="380.5339">(mysql)</text><!--MD5=[69261fdf679bace4394aa6c887036120]
entity pp--><rect fill="#FEFECE" filter="url(#foqcauvm0lmdo)" height="87.2038" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="173" y="175"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="291" y="180"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="289" y="182"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="289" y="186"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="204.5" y="209.9659">Footnotes</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="188" y="229.0339">Post-Processor</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="220" y="248.1018">(PHP)</text><!--MD5=[79d3b2ca01a010aa7ee17b7a65d0e8fb]
entity fi--><rect fill="#FEFECE" filter="url(#foqcauvm0lmdo)" height="68.1358" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="156.5" y="322"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="307.5" y="327"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="305.5" y="329"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="305.5" y="333"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="171.5" y="356.9659">File Includer Plugin</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="220" y="376.0339">(PHP)</text><!--MD5=[0a2bd27fccdac7a369aac2b428719809]
entity html--><path d="M177.5,18 C177.5,8 242,8 242,8 C242,8 306.5,8 306.5,18 L306.5,65.1358 C306.5,75.1358 242,75.1358 242,75.1358 C242,75.1358 177.5,75.1358 177.5,65.1358 L177.5,18 " fill="#FEFECE" filter="url(#foqcauvm0lmdo)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M177.5,18 C177.5,28 242,28 242,28 C242,28 306.5,28 306.5,18 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="187.5" y="46.9659">Manuscript files</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="219" y="66.0339">(HTML)</text><path d="M26,27.5 L26,55.206 A0,0 0 0 0 26,55.206 L142,55.206 A0,0 0 0 0 142,55.206 L142,45.5 L177.17,41.5 L142,37.5 L142,37.5 L132,27.5 L26,27.5 A0,0 0 0 0 26,27.5 " fill="#FBFB77" filter="url(#foqcauvm0lmdo)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M132,27.5 L132,37.5 L142,37.5 L132,27.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="32" y="46.397">publ/cache/mss</text><!--MD5=[4a65e84059005d12693a083370a06717]
entity client--><rect fill="#FEFECE" filter="url(#foqcauvm0lmdo)" height="49.0679" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="184" y="450"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="280" y="455"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="278" y="457"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="278" y="461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="199" y="484.9659">User-Agent</text><!--MD5=[9106a1798c260db26329197e3176ae95]
link html to pp--><path d="M242,75.01 C242,101.64 242,139.7 242,169.78 " fill="none" id="html-&gt;pp" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="242,174.92,246,165.92,242,169.92,238,165.92,242,174.92" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4e0fc4c22692868f91a59d0f8bbe988a]
link pp to fi--><path d="M242,262 C242,279.44 242,299.49 242,316.5 " fill="none" id="pp-&gt;fi" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="242,321.67,246,312.67,242,316.67,238,312.67,242,321.67" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[df8f87e7a32bdc19e181481244a62650]
link fi to client--><path d="M242,390.07 C242,407.24 242,428.01 242,444.54 " fill="none" id="fi-&gt;client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="242,449.97,246,440.97,242,444.97,238,440.97,242,449.97" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[47a94eef6618897ac93409ef467c1cfe]
link db to fi--><path d="M121.77,375.23 C131.5,378.15 141.23,379.99 150.96,380.74 " fill="none" id="db-&gt;fi" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="156.05,381.03,147.2936,376.5216,151.0582,380.7439,146.8359,384.5085,156.05,381.03" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3b23ba4692d1b7e1ae60425e937d5fcf]
reverse link db to fi--><path d="M126.59,335.41 C136.41,332.82 146.23,331.34 156.05,330.97 " fill="none" id="db&lt;-fi" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="121.77,336.77,131.5177,338.178,126.5824,335.4134,129.3471,330.4781,121.77,336.77" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b6ba05a71a07529303c0f4a16eedee82]
@startuml

   skinparam backgroundColor transparent
   skinparam DefaultTextAlignment center
   skinparam componentStyle uml2
   skinparam actorStyle awesome

skinparam backgroundColor transparent
skinparam DefaultTextAlignment center
skinparam componentStyle uml2

database "Manuscript files\n(HTML)" as html
note left of html: publ/cache/mss

cloud "Apache" {
  database  "Database\n(mysql)" as db
  rectangle "Wordpress" {
    component "Footnotes\nPost-Processor\n(PHP)" as pp
    component "File Includer Plugin\n(PHP)" as fi
  }
}
component "User-Agent" as client

html  - -> pp
pp    - -> fi
fi    - -> client

db    -> fi
db    <- fi
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.3-ea+6-Debian-1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<figcaption>
<p><span class="caption-text">Data flow during user access</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>When a user accesses a manuscript page, Wordpress finds a shortcode for the
<a class="reference internal" href="../vm/apache/wordpress/plugins/file-includer.html#file-includer"><span class="std std-ref">File Includer plugin</span></a> in it.  Control is passed to the File
Includer plugin which checks the date of the filum includendum.  If the file is
newer than the data stored in the database it refreshes the database.  Then it
inserts the file’s content into the page, which is finally sent to the user.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Footnotes Post-Processor is still written in PHP.
We plan to rewrite it in Python. (Nov. 2019)</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../overviews.html" class="btn btn-neutral float-left" title="Overviews" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="collation_tool.html" class="btn btn-neutral float-right" title="Overview of the Collation Tool" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-23 CCeH - Licensed under the GNU GPL v3 or later.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>