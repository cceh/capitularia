

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Meta Search &mdash; Capitularia 0.1.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Collections" href="collections.html" />
    <link rel="prev" title="Overview of the Collation Tool" href="collation_tool.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Capitularia
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#rrzk-web-projekt">RRZK Web Projekt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#capitularia-vm">Capitularia VM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#afs">AFS</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../overviews.html">Overviews</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="html_generation.html">HTML Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="html_generation.html#xslt-transformations">XSLT Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="html_generation.html#user-delivery">User Delivery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="collation_tool.html">Overview of the Collation Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#pre-processing-of-the-tei-files">Pre-Processing of the TEI files</a></li>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#collation">Collation</a></li>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#custom-version-of-collatex">Custom Version of CollateX</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Meta Search</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#metadata-extraction">Metadata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fulltext-extraction">Fulltext Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#geodata-extraction">Geodata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#search">Search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="collections.html">Collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="collections.html#algorithm">Algorithm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/collation_tool.html">Troubleshooting the Collation Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/collation_tool.html#manuscripts-do-not-show-up">Manuscripts do not show up</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../webprojekt.html">RRZK Web Projekt Capitularia</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../webprojekt/wordpress.html">Wordpress Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webprojekt/database.html">Wordpress Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../webprojekt/database.html#metadata">Metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../webprojekt/wordpress-custom.html">Wordpress Customizations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../webprojekt/wordpress/theme.html">Wordpress Theme</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webprojekt/wordpress/plugins.html">Wordpress Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webprojekt/wordpress/developer.html">Developer Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../vm.html">Capitularia VM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../vm/app_server.html">Application Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#server">server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-data_server">data_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-collatex_server">collatex_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-geo_server">geo_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-tile_server">tile_server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/database.html">Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#schema-capitularia">Schema <em>capitularia:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#schema-gis">Schema <em>gis:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#module-db">db.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/transformations.html">XSLT Transformations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/transformations.html#graph-of-all-transformations">Graph of All Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/transformations.html#graph-of-stylesheet-dependencies">Graph of Stylesheet Dependencies</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Capitularia</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../overviews.html">Overviews</a> &raquo;</li>
        
      <li>Meta Search</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/overviews/meta_search.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="meta-search">
<span id="meta-search-overview"></span><h1>Meta Search<a class="headerlink" href="#meta-search" title="Permalink to this headline">¶</a></h1>
<p>Description of the meta search widget.</p>
<div class="section" id="metadata-extraction">
<h2>Metadata Extraction<a class="headerlink" href="#metadata-extraction" title="Permalink to this headline">¶</a></h2>
<p>We extract the metadata from the manuscript files and store them in the Postgres
database on the Capitularia VM.  The process is similar to the pre-processing
done for the Collation Tool.</p>
<div class="figure align-center" id="id1">
<div  class="pic pic-format-text-xml pic-language-uml">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="569px" preserveAspectRatio="none"  version="1.1" viewBox="0 0 437 569" width="437px" zoomAndPan="magnify"><defs><filter height="300%" id="f1d2k0qc78ioaf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[e1ef416f19a619ed411924d28ede4d44]
cluster VM--><path d="M40.2191,106.402 C46.8232,93.3712 57.5748,91.3259 67.603,102.5335 C77.3842,87.9874 89.6323,88.9468 98.0414,103.9471 C104.9333,91.0233 116.4794,88.8199 126.6479,100.0697 C135.942,84.7615 146.3364,84.615 155.7733,99.9339 C163.265,87.1719 174.15,85.8868 184.2561,96.7868 C191.8932,77.4034 204.5652,77.8348 217.6606,91.2232 C228.5945,79.729 238.4259,77.4054 246.5905,94.0686 C254.0505,82.6494 266.9123,82.3717 273.2966,95.2509 C284.3157,82.5339 296.0551,85.1234 302.2356,100.2753 C312.1806,89.0257 324.8099,89.0441 332.283,103.199 C342.48,87.7724 354.7771,87.3641 364.0988,104.0658 C376.806,90.4238 389.0559,92.6605 396,110 C399.1357,108.7228 401.1425,110.3103 400.3032,113.6806 C416.1575,121.2436 416.8799,135.9567 401.4217,144.6507 C415.6857,152.0946 414.8891,166.2789 402.3877,174.5865 C413.6873,182.4337 415.5222,191.4847 403.9198,200.6768 C419.0207,209.7689 418.0368,221.1042 404.3932,230.6504 C416.648,237.4342 417.8997,250.8171 406.5122,259.3467 C421.3802,269.713 421.377,281.5883 405.4374,290.9055 C423.8276,299.7558 423.9034,311.9501 408.5862,324.007 C420.7759,330.7131 419.4868,341.5879 408.6552,348.3591 C425.5783,358.2453 421.8073,373.5207 406.0341,380.762 C421.91,389.8299 418.4706,405.1067 404.1391,412.3631 C415.7821,422.6693 417.4511,433.7869 401.1214,441.1619 C415.8457,449.9523 412.4574,463.7195 398.6521,470.0733 C411.9542,480.4216 414.1023,489.5236 398.0007,499.2146 C412.7444,513.9061 410.0592,528.5725 389,534 C390.7911,531.8623 393.186,531.9057 394.4407,534.6035 C388.1731,553.4998 372.9281,552.4618 361.4516,540.1011 C352.9217,552.1594 341.0075,553.2026 332.5128,540.0607 C324.1875,553.6718 313.666,555.3187 304.3364,541.0767 C296.1712,555.0487 280.7263,555.4102 273.1668,540.4247 C262.4937,556.5913 251.7601,553.3815 242.7253,538.8027 C236.5971,553.6777 224.0484,555.6261 214.5642,542.1342 C204.8666,553.6895 194.6411,549.975 189.0701,537.7164 C182.6354,551.7433 167.3586,553.3866 158.221,540.8561 C151.183,553.8468 137.9139,554.5749 130.5101,541.2411 C119.1325,555.1022 108.7081,557.4442 98.3656,540.1724 C88.5994,551.8232 75.2232,551.2298 68.436,536.759 C53.1592,554.9916 35.0518,549.0389 30,527 C33.4884,525.0554 35.2114,526.1616 35.5327,530.0198 C19.1638,520.7287 19.2255,510.2261 32.8862,498.42 C16.3581,490.4073 16.6242,477.8892 30.7027,467.701 C16.9962,458.9676 19.1243,449.2139 30.8415,440.6109 C13.9815,433.9565 11.8639,422.6108 25.1028,410.2644 C12.5154,401.483 10.8576,387.1382 27.4391,380.6585 C12.0226,372.5529 14.1366,362.3196 25.6386,352.4933 C9.3458,346.5626 7.8188,333.0944 20.9964,322.5889 C9.164,312.1276 9.8166,300.7492 24.1462,293.0806 C10.8551,284.0093 12.2931,269.2357 27.4678,263.3439 C13.8483,254.6408 13.3957,240.7136 27.263,231.8318 C12.7998,222.7314 14.5493,211.8605 27.2563,202.7538 C13.9834,191.1769 15.0443,182.1905 30.2538,173.5356 C15.1917,165.5754 13.7287,151.4712 28.7476,142.0711 C11.4381,125.1213 15.043,111.6562 37,103 C39.7864,102.5066 40.9371,103.5795 40.2191,106.402 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="201" y="120.9951">VM</text><!--MD5=[18796deb02f0659c6ca53e1a4bf65658]
entity saxon--><rect fill="#FEFECE" filter="url(#f1d2k0qc78ioaf)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="278" y="130"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="368" y="135"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="366" y="137"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="366" y="141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="293" y="162.9951">corpus.xsl</text><!--MD5=[b085cf21630c4383e706e8ccf9e8b0db]
entity corpus--><path d="M288.5,246 C288.5,236 336,236 336,236 C336,236 383.5,236 383.5,246 L383.5,287.5938 C383.5,297.5938 336,297.5938 336,297.5938 C336,297.5938 288.5,297.5938 288.5,287.5938 L288.5,246 " fill="#FEFECE" filter="url(#f1d2k0qc78ioaf)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M288.5,246 C288.5,256 336,256 336,256 C336,256 383.5,256 383.5,246 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="298.5" y="272.9951">corpus.xml</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="299.5" y="289.292">(XML+TEI)</text><!--MD5=[6b4bfa9e00b0b9cc08101d1a1ff13128]
entity import--><rect fill="#FEFECE" filter="url(#f1d2k0qc78ioaf)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="159" y="358"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="243" y="363"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="241" y="365"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="241" y="369"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="174" y="390.9951">import.py</text><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><path d="M165,474 C165,464 211,464 211,464 C211,464 257,464 257,474 L257,515.5938 C257,525.5938 211,525.5938 211,525.5938 C211,525.5938 165,525.5938 165,515.5938 L165,474 " fill="#FEFECE" filter="url(#f1d2k0qc78ioaf)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M165,474 C165,484 211,484 211,484 C211,484 257,484 257,474 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="178" y="500.9951">Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="175" y="517.292">(Postgres)</text><!--MD5=[c35cdf1439de4198207974f82c6d0a64]
entity make--><rect fill="#FEFECE" filter="url(#f1d2k0qc78ioaf)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="147" y="130"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="223" y="135"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="221" y="137"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="221" y="141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="162" y="162.9951">Makefile</text><!--MD5=[c80f0d56bca040aa79a2a649a2e57798]
entity cron--><rect fill="#FEFECE" filter="url(#f1d2k0qc78ioaf)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="38.5" y="130"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="91.5" y="135"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="89.5" y="137"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="89.5" y="141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="53.5" y="162.9951">Cron</text><path d="M101,254.5 L101,279.6328 A0,0 0 0 0 101,279.6328 L253,279.6328 A0,0 0 0 0 253,279.6328 L253,272.5 L288.39,267 L253,264.5 L253,264.5 L243,254.5 L101,254.5 A0,0 0 0 0 101,254.5 " fill="#FBFB77" filter="url(#f1d2k0qc78ioaf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M243,254.5 L243,264.5 L253,264.5 L243,254.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="107" y="271.5669">AFS:publ/cache/lists/</text><!--MD5=[f43d1bbe4f1159838c5f6e7e47575b7c]
entity tei--><path d="M269.5,18 C269.5,8 333,8 333,8 C333,8 396.5,8 396.5,18 L396.5,59.5938 C396.5,69.5938 333,69.5938 333,69.5938 C333,69.5938 269.5,69.5938 269.5,59.5938 L269.5,18 " fill="#FEFECE" filter="url(#f1d2k0qc78ioaf)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M269.5,18 C269.5,28 333,28 333,28 C333,28 396.5,28 396.5,18 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="279.5" y="44.9951">Manuscript files</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="296.5" y="61.292">(XML+TEI)</text><path d="M88,26.5 L88,51.6328 A0,0 0 0 0 88,51.6328 L234,51.6328 A0,0 0 0 0 234,51.6328 L234,44.5 L269.34,39 L234,36.5 L234,36.5 L224,26.5 L88,26.5 A0,0 0 0 0 88,26.5 " fill="#FBFB77" filter="url(#f1d2k0qc78ioaf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M224,26.5 L224,36.5 L234,36.5 L224,26.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="94" y="43.5669">AFS:publ/mss/*.xml</text><!--MD5=[98113339b43c387f5e9d8a6bec126949]
link tei to saxon--><path d="M333,70.01 C333,86.9 333,107.83 333,124.32 " fill="none" id="tei-&gt;saxon" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="333,129.72,337,120.72,333,124.72,329,120.72,333,129.72" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c6978aaff49254c2e6add106bd693314]
link saxon to corpus--><path d="M333.59,176.13 C334.01,191.61 334.57,212.63 335.05,230.44 " fill="none" id="saxon-&gt;corpus" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="335.19,235.86,338.9573,226.7602,335.0615,230.8617,330.96,226.9658,335.19,235.86" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[76516d77e63421bd93d27c436befcd5c]
link corpus to import--><path d="M302.5,298.01 C283,315.48 258.67,337.29 240,354.02 " fill="none" id="corpus-&gt;import" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="235.86,357.72,245.2377,354.7103,239.5899,354.3902,239.9101,348.7424,235.86,357.72" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6950bf35f0bdfeef2adfc34e16134539]
link import to db--><path d="M211,404.13 C211,419.61 211,440.63 211,458.44 " fill="none" id="import-&gt;db" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="211,463.86,215,454.86,211,458.86,207,454.86,211,463.86" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[16b2f23e595c1c5de587a32b661386ae]
link cron to make--><path d="M111.56,153 C121.55,153 131.55,153 141.54,153 " fill="none" id="cron-&gt;make" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="146.76,153,137.76,149,141.76,153,137.76,157,146.76,153" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[42211ccb8b439fe830e993a3999a0d06]
link make to saxon--><path d="M243.25,153 C253.1,153 262.95,153 272.8,153 " fill="none" id="make-&gt;saxon" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="277.96,153,268.96,149,272.96,153,268.96,157,277.96,153" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e731f16ea0a8d8bacc8eebde1022f2e9]
link make to import--><path d="M146.87,175.83 C123,189.44 96.46,209.46 83,236 C70.53,260.58 69.78,273.82 83,298 C98.26,325.91 127.53,345.71 154.23,358.86 " fill="none" id="make-&gt;import" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="158.83,361.07,152.4433,353.5726,154.3213,358.9087,148.9852,360.7866,158.83,361.07" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ebb44ed2fc3e58f483f56de6942ad9c1]
@startuml

   skinparam backgroundColor transparent
   skinparam DefaultTextAlignment center
   skinparam componentStyle uml2
   skinparam actorStyle awesome

skinparam backgroundColor transparent
skinparam DefaultTextAlignment center
skinparam componentStyle uml2

database  "Manuscript files\n(XML+TEI)" as tei
note left of tei: AFS:publ/mss/*.xml

cloud "VM" {
  component "corpus.xsl"             as saxon
  database  "corpus.xml\n(XML+TEI)"  as corpus
  component "import.py"              as import
  database  "Database\n(Postgres)"   as db

  component "Makefile"               as make
  component "Cron"                   as cron

  note left of corpus: AFS:publ/cache/lists/
}

tei      - -> saxon
saxon    - -> corpus
corpus   - -> import
import   - -> db

cron .> make
make .> saxon
make .> import
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.12-ea+6-post-Debian-1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<p class="caption"><span class="caption-text">Data flow during metadata extraction</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>The Makefile is run by cron on the Capitularia VM at regular intervals.</p>
<p>The manuscript files are in the AFS.  The AFS is mounted onto the VM.</p>
<p>The Makefile knows all the dependencies between the files and runs the
appropriate tools to keep the database up-to-date with the manuscript files.</p>
<p>The internediate corpus.xml file contains all (useful) metadata from all
manuscript file but no text.  The corpus.xml file can be found in the
cache/lists directory.</p>
<p>The import.py script scans the corpus.xml file and imports the all metadata it
finds into the database.</p>
</div>
<div class="section" id="fulltext-extraction">
<h2>Fulltext Extraction<a class="headerlink" href="#fulltext-extraction" title="Permalink to this headline">¶</a></h2>
<p>The TEI files are already pre-processed as described under Collation Tool and
the plain text of every chapter is stored in the database.</p>
</div>
<div class="section" id="geodata-extraction">
<h2>Geodata Extraction<a class="headerlink" href="#geodata-extraction" title="Permalink to this headline">¶</a></h2>
<p>Geodata is stored in the file <code class="file docutils literal notranslate"><span class="pre">AFS:publ/mss/lists/capitularia_geo.xml</span></code>.
This file is periodically processed with <strong class="program">import --geoplaces</strong> and its
content is stored into the database.  Also the “places” tree in the meta search
dialog is built using this data.</p>
</div>
<div class="section" id="search">
<h2>Search<a class="headerlink" href="#search" title="Permalink to this headline">¶</a></h2>
<p>To get good full text search results in the absence of orthography, all full
text search is done by similarity.  The plain text of the chapters is split into
trigrams and the trigrams are indexed.</p>
<p>The <a class="reference internal" href="../webprojekt/wordpress/plugins/meta-search.html#meta-search"><span class="std std-ref">Meta Search</span></a> Wordpress plugin sends the search query to the application
server, which does the actual search.  The app server finds the chapters and the
ids of the manuscripts but it doesn’t know which Wordpress pages contain the
text of those manuscripts.  The plugin finds the pages in the Wordpress database
using the manuscript ids and sends the search results page to the user.</p>
<div class="figure align-center" id="id2">
<div  class="pic pic-format-text-xml pic-language-uml">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="476px" preserveAspectRatio="none"  version="1.1" viewBox="0 0 184 476" width="184px" zoomAndPan="magnify"><defs><filter height="300%" id="f1lab7pl973tc7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[e1ef416f19a619ed411924d28ede4d44]
cluster VM--><path d="M38.9884,229.037 C45.0031,220.2344 50.8542,220.2487 57.8543,227.9077 C62.9752,218.884 69.6621,217.1415 76.313,226.3595 C81.1242,217.2582 90.6345,216.9729 95.6739,226.1172 C101.0143,217.8955 109.3617,218.8458 113.5377,227.36 C117.8613,219.3405 126.2844,218.1192 130.8593,227.104 C141.4434,219.0582 151.0804,221.3948 156,234 C157.7886,233.4672 158.7774,233.9573 158.9283,235.921 C165.4166,241.7927 166.8172,248.2968 157.3565,252.672 C167.7047,256.8537 168.5228,263.9672 159.733,270.6751 C168.4819,274.9039 170.8291,281.6706 161.9578,288.1435 C170.5382,292.9789 168.554,300.4916 161.1984,304.5912 C170.4822,309.2267 170.3879,315.308 163.0749,321.7578 C170.4692,327.0454 172.7019,333.0082 163.9993,339.1513 C171.5488,345.1354 171.1668,351.6024 163.3992,357.0736 C169.7672,363.4422 168.337,368.4207 161.0039,372.6874 C168.3196,377.6067 169.0662,385.1348 161.3799,390.373 C168.5101,396.2374 168.6514,402.8753 159.3006,406.6319 C167.0249,411.8933 167.4031,420.8805 157.8656,424.7767 C164.8809,435.0335 162.1548,444.7898 149,447 C150.1557,446.5298 150.613,446.9922 150.727,448.1234 C146.3774,457.3005 140.1589,460.9531 132.0625,451.9754 C125.5856,462.4748 119.0147,461.7778 112.2706,452.2392 C109.0622,462.7438 100.9161,462.8178 93.8279,456.4904 C86.403,463.4365 78.7233,464.0025 74.861,452.7728 C68.8376,461.5709 62.197,460.279 57.4072,451.5448 C42.859,462.0058 32.4672,458.2191 30,440 C32.1218,439.3332 33.2546,440.4598 32.7081,442.5866 C23.5422,439.7827 22.3278,432.1048 30.3036,426.7055 C22.8231,423.7637 21.8727,417.7254 28.57,412.9914 C21.1245,408.8555 21.3227,403.5092 27.2805,398.2045 C20.2597,393.5865 19.6138,386.4717 27.9445,382.5028 C20.2322,379.0012 19.8553,372.8745 26.1863,367.7045 C20.1633,363.4126 18.1179,356.7198 26.4221,352.6524 C18.3083,348.9083 17.3878,343.7738 24.5119,338.0379 C17.6015,332.7687 18.3063,326.9816 26.563,323.9152 C18.4678,318.5105 18.2975,313.3308 26.2408,307.6091 C21.0049,303.9911 19.4235,298.1471 26.2537,294.5411 C19.7124,290.1815 19.8094,284.1425 26.9073,280.4139 C20.539,274.8449 20.3445,267.9383 28.6597,263.9303 C21.8113,259.4324 21.1723,253.2074 29.1684,249.2229 C21.0998,239.345 25.6196,230.0238 37,227 C38.4222,226.7215 39.3924,227.5329 38.9884,229.037 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="81" y="244.9951">VM</text><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><path d="M47,387 C47,377 93,377 93,377 C93,377 139,377 139,387 L139,428.5938 C139,438.5938 93,438.5938 93,438.5938 C93,438.5938 47,438.5938 47,428.5938 L47,387 " fill="#FEFECE" filter="url(#f1lab7pl973tc7)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M47,387 C47,397 93,397 93,397 C93,397 139,397 139,387 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="60" y="413.9951">Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="57" y="430.292">(Postgres)</text><!--MD5=[e2307af040e3f87d22824e7603ca28ec]
entity api--><rect fill="#FEFECE" filter="url(#f1lab7pl973tc7)" height="62.5938" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="38.5" y="254"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="127.5" y="259"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="125.5" y="261"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="125.5" y="265"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="53.5" y="286.9951">API Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="59" y="303.292">(Python)</text><!--MD5=[8e6a9284dc1da0ef8b54fdd8dc5bfba7]
entity plugin--><rect fill="#FEFECE" filter="url(#f1lab7pl973tc7)" height="62.5938" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="30.5" y="131"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="135.5" y="136"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="133.5" y="138"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="133.5" y="142"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="67" y="163.9951">Plugin</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="45.5" y="180.292">(Wordpress)</text><!--MD5=[4a65e84059005d12693a083370a06717]
entity client--><rect fill="#FEFECE" filter="url(#f1lab7pl973tc7)" height="62.5938" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="36" y="8"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="130" y="13"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="128" y="15"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="128" y="19"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="56.5" y="40.9951">Frontend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="51" y="57.292">(Javascript)</text><!--MD5=[1ca2fe402431c50d994214240108a38e]
link client to plugin--><path d="M81.76,71.03 C79.94,87.66 79.77,108.32 81.25,125.7 " fill="none" id="client-&gt;plugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="81.76,130.98,84.8685,121.6346,81.2752,126.0036,76.9062,122.4103,81.76,130.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4fc957841c0526af65066a575911b6e1]
reverse link client to plugin--><path d="M105.45,76.31 C107.01,93.69 106.83,114.35 104.9,130.98 " fill="none" id="client&lt;-plugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="104.9,71.03,101.8446,80.3929,105.413,76.0036,109.8024,79.5721,104.9,71.03" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[aa90073bfcd0bce2ac7a203ebad4186c]
link plugin to api--><path d="M81.76,194.03 C79.94,210.66 79.77,231.32 81.25,248.7 " fill="none" id="plugin-&gt;api" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="81.76,253.98,84.8685,244.6346,81.2752,249.0036,76.9062,245.4103,81.76,253.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d751fd97e97a4894620e396f1d848313]
reverse link plugin to api--><path d="M105.45,199.31 C107.01,216.69 106.83,237.35 104.9,253.98 " fill="none" id="plugin&lt;-api" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="104.9,194.03,101.8446,203.3929,105.413,199.0036,109.8024,202.5721,104.9,194.03" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1b9dbcfdb69d97b7ce5f2d963fc4ed75]
link api to db--><path d="M81.72,317.22 C79.93,333.78 79.77,354.28 81.26,371.52 " fill="none" id="api-&gt;db" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="81.77,376.75,84.8785,367.4046,81.2852,371.7736,76.9162,368.1803,81.77,376.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4deafffe8fa422dcef882ca302692840]
reverse link api to db--><path d="M105.47,322.48 C107.02,339.77 106.82,360.27 104.89,376.75 " fill="none" id="api&lt;-db" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="104.94,317.22,101.8607,326.5751,105.4403,322.1949,109.8206,325.7745,104.94,317.22" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c19fc6162457ba1230f8bfd9acedad64]
@startuml

   skinparam backgroundColor transparent
   skinparam DefaultTextAlignment center
   skinparam componentStyle uml2
   skinparam actorStyle awesome

skinparam backgroundColor transparent
skinparam DefaultTextAlignment center
skinparam componentStyle uml2

cloud "VM" {
  database  "Database\n(Postgres)"   as db
  component "API Server\n(Python)"   as api
}
component "Plugin\n(Wordpress)"    as plugin
component "Frontend\n(Javascript)" as client

client - -> plugin
plugin - -> api
api    - -> db

client <- - plugin
plugin <- - api
api    <- - db
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.12-ea+6-post-Debian-1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<p class="caption"><span class="caption-text">Data flow meta search</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="collections.html" class="btn btn-neutral float-right" title="Collections" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="collation_tool.html" class="btn btn-neutral float-left" title="Overview of the Collation Tool" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018-20 CCeH - Licensed under the GNU GPL v3 or later

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>