<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meta Search &mdash; Capitularia 0.2.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon-cceh-blue.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Collections" href="collections.html" />
    <link rel="prev" title="Overview of the Collation Tool" href="collation_tool.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Capitularia
              <img src="../_static/logo-cceh-white.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../overviews.html">Overviews</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="html_generation.html">HTML Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="html_generation.html#xslt-transformations">XSLT Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="html_generation.html#user-delivery">User Delivery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="collation_tool.html">Overview of the Collation Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#pre-processing-of-the-tei-files">Pre-Processing of the TEI files</a></li>
<li class="toctree-l3"><a class="reference internal" href="collation_tool.html#collation">Collation</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Meta Search</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#metadata-extraction">Metadata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fulltext-extraction">Fulltext Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#geodata-extraction">Geodata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#search">Search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="collections.html">Collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="collections.html#algorithm">Algorithm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../vm.html">Capitularia VM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../vm/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vm/apache.html">Apache Web Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/apache/wordpress.html">Wordpress Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/apache/database.html">Wordpress Database Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/apache/wordpress-custom.html">Wordpress Customizations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/app_server.html">Application Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#server">server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-data_server">data_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-collator_server">collator_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-geo_server">geo_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/app_server.html#module-tile_server">tile_server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/database.html">Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#schema-capitularia">Schema <em>capitularia:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#schema-gis">Schema <em>gis:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/database.html#module-db">db.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/transformations.html">XSLT Transformations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/transformations.html#graph-of-all-transformations">Graph of All Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/transformations.html#graph-of-stylesheet-dependencies">Graph of Stylesheet Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/user.html">Users of the VM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/user.html#users-and-groups">Users and Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/user.html#adding-a-new-user">Adding a New User</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vm/user.html#security">Security</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vm/backup.html">TSM Backup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../vm/backup.html#update">Update</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance.html">Maintenance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/wordpress.html">Wordpress Maintenance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../maintenance/wordpress.html#wordpress-upgrades">Wordpress Upgrades</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/logfiles.html">Location of Logfiles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../maintenance/logfiles.html#apache-php">Apache / PHP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../maintenance/logfiles.html#python-app-server">Python App Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../maintenance/logfiles.html#python-import-script">Python Import Script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/collation_tool.html">Troubleshooting the Collation Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/collation_tool.html#manuscripts-do-not-show-up">Manuscripts do not show up</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Capitularia</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../overviews.html">Overviews</a></li>
      <li class="breadcrumb-item active">Meta Search</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/overviews/meta_search.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="meta-search">
<span id="meta-search-overview"></span><h1>Meta Search<a class="headerlink" href="#meta-search" title="Permalink to this heading">¶</a></h1>
<p>Description of the meta search widget.</p>
<section id="metadata-extraction">
<h2>Metadata Extraction<a class="headerlink" href="#metadata-extraction" title="Permalink to this heading">¶</a></h2>
<p>We extract the metadata from the manuscript files and store them in the Postgres
database on the Capitularia VM.  The process is similar to the pre-processing
done for the Collation Tool.</p>
<figure class="align-center" id="id1">
<div  class="pic pic-format-text-xml pic-language-uml">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="596px" preserveAspectRatio="none"  version="1.1" viewBox="0 0 435 596" width="435px" zoomAndPan="magnify"><defs><filter height="300%" id="f1qqn83gwiouvj" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[e1ef416f19a619ed411924d28ede4d44]
cluster VM--><path d="M38.1357,105.9284 C48.7859,88.6138 61.219,90.6516 71.2921,106.5053 C76.2217,92.4221 85.9268,89.8675 95.8921,101.7309 C105.3917,88.8394 119.1216,87.1168 127.1075,103.353 C132.7838,89.9657 144.6626,86.0968 154.0276,99.67 C164.2193,85.9542 176.5301,83.4977 187.4831,98.7919 C197.7725,87.0044 207.1675,84.728 215.6536,100.6267 C226.008,87.7942 237.4992,86.2509 246.1492,102.4189 C255.1665,91.6069 263.5267,89.6592 272.5873,102.3702 C280.3085,85.2314 293.1693,88.8671 302.761,100.4018 C315.1286,86.3639 327.6511,90.7466 334.4825,106.3305 C341.2745,94.5394 352.8601,91.0101 361.6169,104.1961 C373.2531,92.7107 389.423,94.1922 394,112 C397.626,110.1164 399.5153,112.3394 399.5644,115.7556 C413.4628,124.1517 413.3899,139.6576 399.3944,147.9062 C414.2315,156.6666 412.0284,166.3294 400.509,176.1306 C414.9385,185.9791 415.8982,196.8882 399.4085,205.5813 C417.8478,215.6887 418.5724,227.02 403.5293,241.0207 C415.4804,250.4835 417.5438,261.3187 402.185,269.4921 C419.9885,276.2215 419.9905,293.0518 406.5636,303.7704 C420.4362,311.8049 421.3042,324.3757 407.701,333.4627 C419.0865,343.766 416.8401,354.9892 403.6943,361.8273 C423.0811,373.0473 422.2435,386.2842 403.6427,397.4492 C418.9411,407.3697 417.4657,417.3646 403.5997,427.243 C419.7571,435.9828 418.3123,452.2367 402.5217,459.9227 C415.1473,470.0555 413.4641,478.6523 399.5712,485.7564 C413.6149,494.5037 414.8109,508.7918 398.9503,516.9437 C413.6443,534.0904 409.8477,549.642 387,555 C389.4512,554.5162 390.3157,556.2583 389.4642,558.2662 C380.5084,571.7972 366.934,571.2897 358.5395,557.6279 C354.5896,570.7031 342.596,572.1043 333.8931,562.8817 C325.2556,577.7448 314.6295,578.4203 304.6422,564.2412 C295.8427,575.9953 284.028,577.0467 275.9789,563.3946 C269.9874,581.3454 258.7142,584.7339 245.1455,570.699 C235.2251,583.4779 222.283,582.6884 213.5966,569.2159 C205.1158,579.453 193.8395,577.4058 188.2579,565.8456 C179.9667,580.2127 166.9126,579.844 157.9208,566.6157 C148.7794,582.3587 136.7351,582.679 127.5433,566.6638 C116.4014,579.3324 105.2493,575.9384 100.5875,560.4584 C89.8342,577.8047 79.0827,574.6435 68.0255,560.7754 C49.7093,576.0216 35.6588,570.4282 30,548 C33.0639,547.2428 35.5155,548.4701 34.8126,552.1166 C18.4316,543.5403 17.6372,528.4567 33.6235,518.7276 C20.0631,511.6261 15.7417,501.9818 28.4798,490.1473 C14.1473,480.901 14.4932,467.3109 27.9169,457.5848 C10.6337,448.3281 12.8222,435.041 27.4905,425.3614 C12.9411,417.7828 14.0844,404.9961 26.2605,396.2869 C11.7668,387.4009 9.0051,371.8364 26.7633,363.4443 C14.2468,354.8978 12.7412,343.2936 26.7981,334.7794 C12.7921,324.2331 8.1792,311.5839 26.6831,300.9271 C14.0793,289.9872 11.3213,278.1185 29.0409,269.45 C13.7728,261.5378 14.7494,247.3856 29.5633,240.0072 C14.6211,228.9623 15.2492,218.8316 31.981,210.3705 C15.9278,200.2264 14.9782,189.1211 29.4952,176.7189 C15.2261,165.4678 17.4906,151.8056 34.4639,145.5321 C18.0544,131.504 18.1201,116.8199 37,105 C37.8559,104.7278 38.1974,105.0783 38.1357,105.9284 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="201" y="124.9659">VM</text><!--MD5=[18796deb02f0659c6ca53e1a4bf65658]
entity saxon--><rect fill="#FEFECE" filter="url(#f1qqn83gwiouvj)" height="49.0679" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="278" y="135"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="366" y="140"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="364" y="142"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="364" y="146"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="293" y="169.9659">corpus.xsl</text><!--MD5=[b085cf21630c4383e706e8ccf9e8b0db]
entity corpus--><path d="M288,254 C288,244 335,244 335,244 C335,244 382,244 382,254 L382,301.1358 C382,311.1358 335,311.1358 335,311.1358 C335,311.1358 288,311.1358 288,301.1358 L288,254 " fill="#FEFECE" filter="url(#f1qqn83gwiouvj)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M288,254 C288,264 335,264 335,264 C335,264 382,264 382,254 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="298" y="282.9659">corpus.xml</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="302.5" y="302.0339">(XML+TEI)</text><!--MD5=[6b4bfa9e00b0b9cc08101d1a1ff13128]
entity import--><rect fill="#FEFECE" filter="url(#f1qqn83gwiouvj)" height="49.0679" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="163.5" y="371"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="248.5" y="376"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="246.5" y="378"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="246.5" y="382"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="178.5" y="405.9659">import.py</text><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><path d="M173,490 C173,480 216,480 216,480 C216,480 259,480 259,490 L259,537.1358 C259,547.1358 216,547.1358 216,547.1358 C216,547.1358 173,547.1358 173,537.1358 L173,490 " fill="#FEFECE" filter="url(#f1qqn83gwiouvj)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M173,490 C173,500 216,500 216,500 C216,500 259,500 259,490 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="184.5" y="518.9659">Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="183" y="538.0339">(Postgres)</text><!--MD5=[c35cdf1439de4198207974f82c6d0a64]
entity make--><rect fill="#FEFECE" filter="url(#f1qqn83gwiouvj)" height="49.0679" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="145.5" y="135"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="222.5" y="140"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="220.5" y="142"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="220.5" y="146"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="160.5" y="169.9659">Makefile</text><!--MD5=[c80f0d56bca040aa79a2a649a2e57798]
entity cron--><rect fill="#FEFECE" filter="url(#f1qqn83gwiouvj)" height="49.0679" style="stroke: #A80036; stroke-width: 1.5;" width="72" x="38" y="135"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="90" y="140"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="88" y="142"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="88" y="146"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="53" y="169.9659">Cron</text><path d="M133,263.5 L133,291.206 A0,0 0 0 0 133,291.206 L253,291.206 A0,0 0 0 0 253,291.206 L253,281.5 L287.7,277.5 L253,273.5 L253,273.5 L243,263.5 L133,263.5 A0,0 0 0 0 133,263.5 " fill="#FBFB77" filter="url(#f1qqn83gwiouvj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M243,263.5 L243,273.5 L253,273.5 L243,263.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="139" y="282.397">publ/cache/lists/</text><!--MD5=[f43d1bbe4f1159838c5f6e7e47575b7c]
entity tei--><path d="M267.5,18 C267.5,8 332,8 332,8 C332,8 396.5,8 396.5,18 L396.5,65.1358 C396.5,75.1358 332,75.1358 332,75.1358 C332,75.1358 267.5,75.1358 267.5,65.1358 L267.5,18 " fill="#FEFECE" filter="url(#f1qqn83gwiouvj)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M267.5,18 C267.5,28 332,28 332,28 C332,28 396.5,28 396.5,18 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="277.5" y="46.9659">Manuscript files</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="299.5" y="66.0339">(XML+TEI)</text><path d="M118,27.5 L118,55.206 A0,0 0 0 0 118,55.206 L232,55.206 A0,0 0 0 0 232,55.206 L232,45.5 L267.18,41.5 L232,37.5 L232,37.5 L222,27.5 L118,27.5 A0,0 0 0 0 118,27.5 " fill="#FBFB77" filter="url(#f1qqn83gwiouvj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M222,27.5 L222,37.5 L232,37.5 L222,27.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="124" y="46.397">publ/mss/*.xml</text><!--MD5=[98113339b43c387f5e9d8a6bec126949]
link tei to saxon--><path d="M332,75.12 C332,92.37 332,113.34 332,129.94 " fill="none" id="tei-&gt;saxon" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="332,134.94,336,125.94,332,129.94,328,125.94,332,134.94" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c6978aaff49254c2e6add106bd693314]
link saxon to corpus--><path d="M332.61,184.25 C333.02,199.87 333.56,220.65 334.02,238.53 " fill="none" id="saxon-&gt;corpus" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="334.16,243.98,337.9273,234.8802,334.0315,238.9817,329.93,235.0858,334.16,243.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[76516d77e63421bd93d27c436befcd5c]
link corpus to import--><path d="M301.54,311.12 C283.38,328.81 261.21,350.43 243.98,367.22 " fill="none" id="corpus-&gt;import" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="240.16,370.94,249.3945,367.5159,243.738,367.4475,243.8065,361.791,240.16,370.94" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6950bf35f0bdfeef2adfc34e16134539]
link import to db--><path d="M216,420.25 C216,435.87 216,456.65 216,474.53 " fill="none" id="import-&gt;db" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="216,479.98,220,470.98,216,474.98,212,470.98,216,479.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[16b2f23e595c1c5de587a32b661386ae]
link cron to make--><path d="M110.09,159.5 C120.14,159.5 130.19,159.5 140.24,159.5 " fill="none" id="cron-&gt;make" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="145.49,159.5,136.49,155.5,140.49,159.5,136.49,163.5,145.49,159.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[42211ccb8b439fe830e993a3999a0d06]
link make to saxon--><path d="M242.52,159.5 C252.54,159.5 262.56,159.5 272.58,159.5 " fill="none" id="make-&gt;saxon" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="277.82,159.5,268.82,155.5,272.82,159.5,268.82,163.5,277.82,159.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e731f16ea0a8d8bacc8eebde1022f2e9]
link make to import--><path d="M161.99,184.1 C144.51,199.07 124.52,220.08 115,244 C103.99,271.67 102.32,284.06 115,311 C126.17,334.73 147.77,354.03 168.13,368.06 " fill="none" id="make-&gt;import" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="172.46,370.98,167.2432,362.6263,168.3174,368.1802,162.7635,369.2544,172.46,370.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[92c9a806a6173da600ca7711b237fe6c]
@startuml

   skinparam backgroundColor transparent
   skinparam DefaultTextAlignment center
   skinparam componentStyle uml2
   skinparam actorStyle awesome

skinparam backgroundColor transparent
skinparam DefaultTextAlignment center
skinparam componentStyle uml2

database  "Manuscript files\n(XML+TEI)" as tei
note left of tei: publ/mss/*.xml

cloud "VM" {
  component "corpus.xsl"             as saxon
  database  "corpus.xml\n(XML+TEI)"  as corpus
  component "import.py"              as import
  database  "Database\n(Postgres)"   as db

  component "Makefile"               as make
  component "Cron"                   as cron

  note left of corpus: publ/cache/lists/
}

tei      - -> saxon
saxon    - -> corpus
corpus   - -> import
import   - -> db

cron .> make
make .> saxon
make .> import
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 19.0.2+7-Debian-4
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<figcaption>
<p><span class="caption-text">Data flow during metadata extraction</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>The Makefile is run by cron on the Capitularia VM at regular intervals.</p>
<p>The Makefile knows all the dependencies between the files and runs the
appropriate tools to keep the database up-to-date with the manuscript files.</p>
<p>The internediate corpus.xml file contains all (useful) metadata from all
manuscript file but no text.  The corpus.xml file can be found in the
cache/lists directory.</p>
<p>The import.py script scans the corpus.xml file and imports the all metadata it
finds into the database.</p>
</section>
<section id="fulltext-extraction">
<h2>Fulltext Extraction<a class="headerlink" href="#fulltext-extraction" title="Permalink to this heading">¶</a></h2>
<p>The TEI files are already pre-processed as described under Collation Tool and
the plain text of every chapter is stored in the database.</p>
</section>
<section id="geodata-extraction">
<h2>Geodata Extraction<a class="headerlink" href="#geodata-extraction" title="Permalink to this heading">¶</a></h2>
<p>Geodata is stored in the file <code class="file docutils literal notranslate"><span class="pre">publ/mss/lists/capitularia_geo.xml</span></code>.
This file is periodically processed with <strong class="program">import --geoplaces</strong> and its
content is stored into the database.  Also the “places” tree in the meta search
dialog is built using this data.</p>
</section>
<section id="search">
<h2>Search<a class="headerlink" href="#search" title="Permalink to this heading">¶</a></h2>
<p>To get good full text search results in the absence of orthography, all full
text search is done by similarity.  The plain text of the chapters is split into
trigrams and the trigrams are indexed.</p>
<p>The <a class="reference internal" href="../vm/apache/wordpress/plugins/meta-search.html#meta-search"><span class="std std-ref">Meta Search</span></a> Wordpress plugin sends the search query to the application
server, which does the actual search.  The app server finds the chapters and the
ids of the manuscripts but it doesn’t know which Wordpress pages contain the
text of those manuscripts.  The plugin finds the pages in the Wordpress database
using the manuscript ids and sends the search results page to the user.</p>
<figure class="align-center" id="id2">
<div  class="pic pic-format-text-xml pic-language-uml">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="496px" preserveAspectRatio="none"  version="1.1" viewBox="0 0 188 496" width="188px" zoomAndPan="magnify"><defs><filter height="300%" id="f1lab7pl973tc7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[e1ef416f19a619ed411924d28ede4d44]
cluster VM--><path d="M37.255,235.4332 C41.3658,224.1441 51.2894,225.2905 57.3276,233.4434 C61.8817,224.5551 70.5697,226.1342 75.0981,233.4715 C79.8128,222.2349 87.9439,220.8314 95.341,230.926 C102.2129,223.1313 108.17,225.9237 112.2909,233.8853 C118.4432,225.6762 126.7718,225.2025 131.4341,235.4321 C141.0009,225.992 151.4925,228.1183 156,241 C157.2805,241.6055 157.3196,242.4277 156.4763,243.4466 C165.0274,245.7943 165.4579,252.1967 160.2705,258.1014 C167.7798,261.9251 168.9436,269.9283 160.698,274.1711 C170.1271,277.6558 169.9389,285.1501 162.82,290.7524 C169.5554,294.0351 169.7436,300.421 162.9793,303.8676 C172.2212,307.523 171.2117,314.3208 165.0576,319.964 C172.4989,324.4581 173.4451,331.1895 165.623,336.2147 C173.3173,340.5206 175.4179,346.2217 168.1265,352.7911 C176.2377,357.1056 174.8293,364.3727 167.5906,368.1518 C175.1036,373.9642 173.4115,379.5751 166.303,384.2155 C173.8708,390.1227 171.807,395.6288 164.075,399.2719 C172.3474,403.9804 170.3994,411.642 162.7405,414.9986 C169.4295,421.9908 169.4737,427.366 159.948,431.6367 C165.6108,435.8738 164.975,443.0076 158.7711,446.2917 C166.5318,457.5709 160.7564,464.9298 149,467 C150.9762,466.5956 151.8632,467.5232 151.4028,469.4798 C145.2457,477.6871 138.4826,479.0585 131.593,470.3369 C125.6438,480.6203 118.435,480.7739 111.7414,471.0765 C107.9981,480.5535 102.1778,481.6774 94.6799,475.0555 C88.7668,484.6841 79.8988,482.5267 75.9716,473.1053 C68.4943,479.8059 62.8357,480.2235 58.4464,469.9222 C43.758,482.0012 35.0387,475.5862 30,460 C31.8622,460.1321 32.1494,461.2266 31.4564,462.7246 C21.3848,458.5988 21.8561,451.8729 28.8176,445.1846 C19.5752,441.2972 20.9087,433.636 27.7593,428.7146 C20.579,425.9344 20.4074,419.9489 26.6374,415.9867 C16.7907,410.327 17.4596,403.7261 26.5966,398.0234 C19.3174,394.1261 18.9582,387.452 25.1566,382.3189 C17.7726,378.0439 15.7872,373.1583 22.9728,366.8292 C15.3278,362.9606 16.1338,356.4004 22.1017,351.7457 C16.6503,345.6757 17.2328,339.8944 25.1004,336.4327 C17.2015,332.2869 16.7805,324.939 23.4767,319.4017 C16.6903,312.9626 18.1059,308.2348 26.0914,304.3642 C21.0647,299.0795 21.9841,293.4701 29.168,290.9954 C20.2768,285.3079 21.5899,278.6294 30.3106,274.1354 C22.347,269.2886 22.852,264.3588 28.8478,258.2282 C18.4675,247.6033 23.3925,236.5537 37,234 C37.7587,234.2588 37.8524,234.9332 37.255,235.4332 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="82" y="253.9659">VM</text><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><path d="M50,402 C50,392 93,392 93,392 C93,392 136,392 136,402 L136,449.1358 C136,459.1358 93,459.1358 93,459.1358 C93,459.1358 50,459.1358 50,449.1358 L50,402 " fill="#FEFECE" filter="url(#f1lab7pl973tc7)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M50,402 C50,412 93,412 93,412 C93,412 136,412 136,402 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="61.5" y="430.9659">Database</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="60" y="450.0339">(Postgres)</text><!--MD5=[e2307af040e3f87d22824e7603ca28ec]
entity api--><rect fill="#FEFECE" filter="url(#f1lab7pl973tc7)" height="68.1358" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="38.5" y="264"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="127.5" y="269"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="125.5" y="271"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="125.5" y="275"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="53.5" y="298.9659">API Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="61" y="318.0339">(Python)</text><!--MD5=[8e6a9284dc1da0ef8b54fdd8dc5bfba7]
entity plugin--><rect fill="#FEFECE" filter="url(#f1lab7pl973tc7)" height="68.1358" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="32.5" y="136"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="133.5" y="141"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="131.5" y="143"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="131.5" y="147"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="66.5" y="170.9659">Plugin</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="47.5" y="190.0339">(Wordpress)</text><!--MD5=[4a65e84059005d12693a083370a06717]
entity client--><rect fill="#FEFECE" filter="url(#f1lab7pl973tc7)" height="68.1358" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="36.5" y="8"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="129.5" y="13"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="127.5" y="15"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="127.5" y="19"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="57.5" y="42.9659">Frontend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="51.5" y="62.0339">(Javascript)</text><!--MD5=[1ca2fe402431c50d994214240108a38e]
link client to plugin--><path d="M81.62,76.11 C79.97,92.76 79.81,113.04 81.14,130.39 " fill="none" id="client-&gt;plugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="81.6,135.68,84.8145,126.3705,81.1718,130.6984,76.8439,127.0556,81.6,135.68" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4fc957841c0526af65066a575911b6e1]
reverse link client to plugin--><path d="M105.54,81.38 C106.96,98.71 106.8,119 105.07,135.68 " fill="none" id="client&lt;-plugin" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="105.05,76.11,101.9175,85.4474,105.522,81.0877,109.8818,84.6922,105.05,76.11" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[aa90073bfcd0bce2ac7a203ebad4186c]
link plugin to api--><path d="M81.62,204.11 C79.97,220.76 79.81,241.04 81.14,258.39 " fill="none" id="plugin-&gt;api" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="81.6,263.68,84.8145,254.3705,81.1718,258.6984,76.8439,255.0556,81.6,263.68" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d751fd97e97a4894620e396f1d848313]
reverse link plugin to api--><path d="M105.54,209.38 C106.96,226.71 106.8,247 105.07,263.68 " fill="none" id="plugin&lt;-api" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="105.05,204.11,101.9175,213.4474,105.522,209.0877,109.8818,212.6922,105.05,204.11" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1b9dbcfdb69d97b7ce5f2d963fc4ed75]
link api to db--><path d="M81.59,332.3 C79.95,349.02 79.82,369.34 81.19,386.64 " fill="none" id="api-&gt;db" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="81.66,391.91,84.8215,382.5824,81.2035,386.9309,76.8549,383.3128,81.66,391.91" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4deafffe8fa422dcef882ca302692840]
reverse link api to db--><path d="M105.57,337.6 C106.98,354.99 106.79,375.3 105.01,391.91 " fill="none" id="api&lt;-db" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="105.08,332.3,101.9209,341.6285,105.5378,337.279,109.8873,340.8959,105.08,332.3" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[bf168ac226be2d4a343aec4a0f4f2714]
@startuml

   skinparam backgroundColor transparent
   skinparam DefaultTextAlignment center
   skinparam componentStyle uml2
   skinparam actorStyle awesome

skinparam backgroundColor transparent
skinparam DefaultTextAlignment center
skinparam componentStyle uml2

cloud "VM" {
  database  "Database\n(Postgres)"   as db
  component "API Server\n(Python)"   as api
}
component "Plugin\n(Wordpress)"    as plugin
component "Frontend\n(Javascript)" as client

client - -> plugin
plugin - -> api
api    - -> db

client <- - plugin
plugin <- - api
api    <- - db
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 19.0.2+7-Debian-4
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<figcaption>
<p><span class="caption-text">Data flow meta search</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="collation_tool.html" class="btn btn-neutral float-left" title="Overview of the Collation Tool" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="collections.html" class="btn btn-neutral float-right" title="Collections" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-23 CCeH - Licensed under the GNU GPL v3 or later.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>