<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Collation Tool &mdash; Capitularia 0.2.1 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/my_theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/favicon-cceh-blue.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Meta Search" href="meta-search.html" />
    <link rel="prev" title="Wordpress Plugins" href="../plugins.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Capitularia
              <img src="../../../../_static/logo-cceh-white.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../overviews.html">Overviews</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../overviews/html_generation.html">HTML Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../overviews/html_generation.html#xslt-transformations">XSLT Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../overviews/html_generation.html#user-delivery">User Delivery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../overviews/collation_tool.html">Overview of the Collation Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../overviews/collation_tool.html#pre-processing-of-the-tei-files">Pre-Processing of the TEI files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../overviews/collation_tool.html#id1">Collation Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../overviews/collation_tool.html#collation-algorithm">Collation Algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../overviews/collation_tool.html#word-comparison-function">Word Comparison Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../overviews/collation_tool.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../overviews/meta_search.html">Meta Search</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../overviews/meta_search.html#metadata-extraction">Metadata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../overviews/meta_search.html#fulltext-extraction">Fulltext Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../overviews/meta_search.html#geodata-extraction">Geodata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../overviews/meta_search.html#search">Search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../overviews/collections.html">Collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../overviews/collections.html#algorithm">Algorithm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../vm.html">Capitularia VM</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../intro.html">Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../apache.html">Apache Web Server</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../wordpress.html">Wordpress Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../database.html">Wordpress Database Structure</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../wordpress-custom.html">Wordpress Customizations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../app_server.html">Application Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../app_server.html#server">server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../app_server.html#module-data_server">data_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../app_server.html#module-collator_server">collator_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../app_server.html#module-geo_server">geo_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../app_server.html#module-tile_server">tile_server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../database.html">Database Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../database.html#schema-capitularia">Schema <em>capitularia:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../database.html#schema-gis">Schema <em>gis:</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../database.html#module-db">db.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../transformations.html">XSLT Transformations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../transformations.html#graph-of-all-transformations">Graph of All Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../transformations.html#graph-of-stylesheet-dependencies">Graph of Stylesheet Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user.html">Users of the VM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user.html#users-and-groups">Users and Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user.html#adding-a-new-user">Adding a New User</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user.html#security">Security</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../backup.html">TSM Backup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../backup.html#update">Update</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../maintenance.html">Maintenance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../maintenance/wordpress.html">Wordpress Maintenance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../maintenance/wordpress.html#wordpress-upgrades">Wordpress Upgrades</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../maintenance/logfiles.html">Location of Logfiles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../maintenance/logfiles.html#apache-php">Apache / PHP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../maintenance/logfiles.html#python-app-server">Python App Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../maintenance/logfiles.html#python-import-script">Python Import Script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../troubleshooting/collation_tool.html">Troubleshooting the Collation Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../troubleshooting/collation_tool.html#manuscripts-do-not-show-up">Manuscripts do not show up</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Capitularia</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../vm.html">Capitularia VM</a></li>
          <li class="breadcrumb-item"><a href="../../../apache.html">Apache Web Server</a></li>
          <li class="breadcrumb-item"><a href="../../wordpress-custom.html">Wordpress Customizations</a></li>
          <li class="breadcrumb-item"><a href="../plugins.html">Wordpress Plugins</a></li>
      <li class="breadcrumb-item active">Collation Tool</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/vm/apache/wordpress/plugins/collation-tool.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="collation-tool">
<span id="id1"></span><h1>Collation Tool<a class="headerlink" href="#collation-tool" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#plugins-cap-collation-cap-collation-php" id="id2">plugins/cap-collation/cap-collation.php</a></p></li>
<li><p><a class="reference internal" href="#plugins-cap-collation-functions-php" id="id3">plugins/cap-collation/functions.php</a></p></li>
<li><p><a class="reference internal" href="#plugins-collation-tools" id="id4">plugins/collation/tools</a></p></li>
</ul>
</nav>
<span class="target" id="module-plugins.cap-collation.cap-collation"></span><section id="plugins-cap-collation-cap-collation-php">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">plugins/cap-collation/cap-collation.php</a><a class="headerlink" href="#plugins-cap-collation-cap-collation-php" title="Permalink to this heading">¶</a></h2>
<p>Plugin Name: Capitularia Collation Tool
Plugin URI:
Description: Collates TEI files.</p>
<p>Version:     0.2.2
Author:      Marcello Perathoner
Author URI:
License:     GPLv2 or later
Text Domain: cap-collation
Domain Path: /languages</p>
<p>Capitularia Collation Tool plugin.</p>
<p>The <em>Collation Tool plugin</em> lets any member of the general public do
collations of arbitrary sections from different manuscripts.</p>
<p>This plugin provides a shortcode that inserts a dashboard on the page.
Within the dashboard the user can request collations of sections of
manuscripts.  The dashboard is implemented in javascript with Vue.js.  The
PHP code of this plugin basically only serves the Javascript code to the
user.</p>
<p>The actual collation is done on the Capitularia API Server with a customized
version of CollateX for Java.</p>
<p>A big Makefile, run by cron on the API server, uses XSLT and Saxon to extract
the relevant sections from the TEI files and pre-processes them for
collation.  In the end all TEI tags are removed and only the normalized text
is stored into the Postgres database.  On an incoming collation request the
API server reads the pre-processed texts from the database and sends them to
CollateX.</p>
<p>See: <code class="xref py py-mod docutils literal notranslate"><span class="pre">collatex_server</span></code>, <a class="reference internal" href="../../../../overviews/collation_tool.html#collation-tool-overview"><span class="std std-ref">collation overview</span></a>.</p>
<span class="target" id="namespace-\cceh\capitularia\collation_user"></span><dl class="php const">
<dt class="sig sig-object php" id="\cceh\capitularia\collation_user\NAME">
<em class="property"><span class="pre">constant</span> </em><span class="sig-name descname"><span class="pre">NAME</span></span><a class="headerlink" href="#\cceh\capitularia\collation_user\NAME" title="Permalink to this definition">¶</a></dt>
<dd><p>‘Capitularia Collation Tool’</p>
<p>The name of the plugin.</p>
</dd></dl>

<span class="target" id="namespace-\cceh\capitularia\collation_user"></span><dl class="php const">
<dt class="sig sig-object php" id="\cceh\capitularia\collation_user\DOMAIN">
<em class="property"><span class="pre">constant</span> </em><span class="sig-name descname"><span class="pre">DOMAIN</span></span><a class="headerlink" href="#\cceh\capitularia\collation_user\DOMAIN" title="Permalink to this definition">¶</a></dt>
<dd><p>‘cap-collation’</p>
<p>The Text Domain of the plugin.</p>
</dd></dl>

<span class="target" id="module-plugins.cap-collation.functions"></span></section>
<section id="plugins-cap-collation-functions-php">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">plugins/cap-collation/functions.php</a><a class="headerlink" href="#plugins-cap-collation-functions-php" title="Permalink to this heading">¶</a></h2>
<p>Capitularia Collation Tool global functions.</p>
<span class="target" id="namespace-\cceh\capitularia\collation_user"></span><dl class="php function">
<dt class="sig sig-object php" id="\cceh\capitularia\collation_user\ns">
<span class="sig-name descname"><span class="pre">ns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">function_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#\cceh\capitularia\collation_user\ns" title="Permalink to this definition">¶</a></dt>
<dd><p>Add current namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>function_name</strong> (<span><code class="xref php php-obj docutils literal notranslate"><span class="pre">string</span></code></span>) – The class or function name without namespace</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The name with namespace</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span><code class="xref php php-obj docutils literal notranslate"><span class="pre">string</span></code></span></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="namespace-\cceh\capitularia\collation_user"></span><dl class="php function">
<dt class="sig sig-object php" id="\cceh\capitularia\collation_user\enqueue_scripts">
<span class="sig-name descname"><span class="pre">enqueue_scripts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#\cceh\capitularia\collation_user\enqueue_scripts" title="Permalink to this definition">¶</a></dt>
<dd><p>Enqueue the front page script and localize it.</p>
<p>The script is a webpacked Vue.js application containing its own css.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span><code class="xref php php-obj docutils literal notranslate"><span class="pre">void</span></code></span></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="namespace-\cceh\capitularia\collation_user"></span><dl class="php function">
<dt class="sig sig-object php" id="\cceh\capitularia\collation_user\on_shortcode">
<span class="sig-name descname"><span class="pre">on_shortcode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">dummy_atts</span></em>, <em class="sig-param"><span class="pre">dummy_content</span></em><span class="sig-paren">)</span><a class="headerlink" href="#\cceh\capitularia\collation_user\on_shortcode" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace the shortcode with the collation dashboard.</p>
<p>Insert a Vue.js component.  Vue.js takes over from that and builds the
collation dashboard.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dummy_atts</strong> (<span><code class="xref php php-obj docutils literal notranslate"><span class="pre">array</span></code></span>) – (unused) The shortcode attributes</p></li>
<li><p><strong>dummy_content</strong> (<span><code class="xref php php-obj docutils literal notranslate"><span class="pre">array</span></code></span>) – (unused) The shortcode content (should be empty)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The Vue.js component as HTML.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span><code class="xref php php-obj docutils literal notranslate"><span class="pre">string</span></code></span></p>
</dd>
</dl>
</dd></dl>

</section>
<span class="target" id="module-plugins-collation-tools"></span><section id="plugins-collation-tools">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">plugins/collation/tools</a><a class="headerlink" href="#plugins-collation-tools" title="Permalink to this heading">¶</a></h2>
<p>File: plugins/cap-collation/src/js/tools.js</p>
<p>Contains utility functions for the collation applet.</p>
<dl class="js data">
<dt class="sig sig-object js" id="plugins-collation-tools.LANG">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">LANG</span></span></span><a class="headerlink" href="#plugins-collation-tools.LANG" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">cap</span><span class="o">-</span><span class="nx">collation</span>
</pre></div>
</div>
<p>The Wordpress Text Domain of the plugin.</p>
</dd></dl>

<dl class="js data">
<dt class="sig sig-object js" id="plugins-collation-tools.bk_id">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">bk_id</span></span></span><a class="headerlink" href="#plugins-collation-tools.bk_id" title="Permalink to this definition">¶</a></dt>
<dd><p>(string)
The id of the “Obertext”.</p>
</dd></dl>

<dl class="js data">
<dt class="sig sig-object js" id="plugins-collation-tools.cap_collation_algorithms">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">cap_collation_algorithms</span></span></span><a class="headerlink" href="#plugins-collation-tools.cap_collation_algorithms" title="Permalink to this definition">¶</a></dt>
<dd><p>The collation algorithms we support. The Needleman-Wunsch-Gotoh algorithm is available only with our special patched version of CollateX.</p>
</dd></dl>

<dl class="js data">
<dt class="sig sig-object js" id="plugins-collation-tools.Palette">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">Palette</span></span></span><a class="headerlink" href="#plugins-collation-tools.Palette" title="Permalink to this definition">¶</a></dt>
<dd><p>A color palette.</p>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-collation-tools.insert_css_palette">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">insert_css_palette</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">css</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-collation-tools.insert_css_palette" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a CSS color palette into the DOM making it active.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>css</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">String()</span></code></span>) – The color palette as string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-collation-tools.get_api_entrypoint">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">get_api_entrypoint</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#plugins-collation-tools.get_api_entrypoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the API entrypoint</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The root URL of the API server.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-collation-tools.api">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">api</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-collation-tools.api" title="Permalink to this definition">¶</a></dt>
<dd><p>This calls the API on the API server</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – The endpoint relative to the API root.</p></li>
<li><p><strong>data</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">Object()</span></code></span>) – The data to send.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Promise resolved when call completed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Promise</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-collation-tools.encodeRFC5987ValueChars">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">encodeRFC5987ValueChars</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-collation-tools.encodeRFC5987ValueChars" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a valid filename to save the config.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>str</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – The string to encode.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The encoded string.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-collation-tools.sort_key">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">sort_key</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-collation-tools.sort_key" title="Permalink to this definition">¶</a></dt>
<dd><p>A key that sorts numbers right</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – Any string.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A key derived from the string that sorts numbers right.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-collation-tools.build_witness_url">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">build_witness_url</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">w</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-collation-tools.build_witness_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an URL that represents one witness to be collated.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>w</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">Object()</span></code></span>) – The witness object</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The url</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-collation-tools.fix_witness">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">fix_witness</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">w</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-collation-tools.fix_witness" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate some attributes for a witness object: a human-readable title, i18n, sort key.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>w</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">Object()</span></code></span>) – The witness object to fix</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The fixed witness object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Object</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-collation-tools.parse_locus_url">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">parse_locus_url</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-collation-tools.parse_locus_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a locus url into a witness object similar to one returned by the data server. Currently used only to calculate the title length in the results table.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">string()</span></code></span>) – The witness url</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The witness object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Object</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt class="sig sig-object js" id="plugins-collation-tools.unroll_witnesses">
<span class="sig-prename descclassname"><span class="n"><span class="pre">plugins/collation/tools</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">unroll_witnesses</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rolled</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plugins-collation-tools.unroll_witnesses" title="Permalink to this definition">¶</a></dt>
<dd><p>Unroll collate struct Unrolls the witness list before sending it to the collation server.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rolled</strong> (<span><code class="xref js js-func docutils literal notranslate"><span class="pre">Array()</span></code></span>) – The collate struct</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The unrolled witness array Turns this: [ { “corresp”: “BK.40_4”, “witnesses”: [ “bk-textzeuge”, “vatikan-bav-chigi-f-iv-75” ] }, { “corresp”: “BK.137”, “witnesses”: [ “bk-textzeuge”, “kopenhagen-kb-1943-4”, “paris-bn-lat-2718” ] } ] into this: [ “BK.40_4/bk-textzeuge”, “BK.40_4/vatikan-bav-chigi-f-iv-75”, “BK.137/bk-textzeuge”, “BK.137/kopenhagen-kb-1943-4”, “BK.137/paris-bn-lat-2718”, ]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Array</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../plugins.html" class="btn btn-neutral float-left" title="Wordpress Plugins" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="meta-search.html" class="btn btn-neutral float-right" title="Meta Search" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-23 CCeH - Licensed under the GNU GPL v3 or later.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>