# generated by xslt_dep.py
#
$(CACHE_DIR)/capits/ldf/%.html : $(CAPIT_DIR)/ldf/%.xml capit.xsl common-3.xsl common-html.xsl config-3.xsl
	$(SAXON) -s:$< -xsl:capit.xsl -o:$@

$(CACHE_DIR)/capits/post840/%.html : $(CAPIT_DIR)/post840/%.xml capit.xsl common-3.xsl common-html.xsl config-3.xsl
	$(SAXON) -s:$< -xsl:capit.xsl -o:$@

$(CACHE_DIR)/capits/pre814/%.html : $(CAPIT_DIR)/pre814/%.xml capit.xsl common-3.xsl common-html.xsl config-3.xsl
	$(SAXON) -s:$< -xsl:capit.xsl -o:$@

$(CACHE_DIR)/capits/undated/%.html : $(CAPIT_DIR)/undated/%.xml capit.xsl common-3.xsl common-html.xsl config-3.xsl
	$(SAXON) -s:$< -xsl:capit.xsl -o:$@

$(CACHE_DIR)/collation/%.xml : $(CACHE_DIR)/extracted/%.xml common-3.xsl mss-extract-chapters-txt.xsl mss-transcript-phase-1.xsl
	$(SAXON) -s:$< -xsl:mss-extract-chapters-txt.xsl -o:$@

$(CACHE_DIR)/extracted/%.xml : $(MSS_DIR)/%.xml common-3.xsl mss-extract-chapters.xsl
	$(SAXON) -s:$< -xsl:mss-extract-chapters.xsl -o:$@

$(CACHE_DIR)/internal/mss/%.footer.html : $(MSS_PRIV_DIR)/%.xml common-3.xsl common-html.xsl config-3.xsl mss-footer-3.xsl
	$(SAXON) -s:$< -xsl:mss-footer-3.xsl -o:$@

$(CACHE_DIR)/internal/mss/%.header.html : $(MSS_PRIV_DIR)/%.xml common-3.xsl common-html.xsl config-3.xsl mss-header-3.xsl
	$(SAXON) -s:$< -xsl:mss-header-3.xsl -o:$@

$(CACHE_DIR)/internal/mss/%.transcript.html : $(CACHE_DIR)/internal/mss/%.transcript.phase-1.xml common-3.xsl common-html.xsl config-3.xsl mss-transcript-phase-2.xsl
	$(SAXON) -s:$< -xsl:mss-transcript-phase-2.xsl -o:$@

$(CACHE_DIR)/internal/mss/%.transcript.phase-1.xml : $(MSS_PRIV_DIR)/%.xml common-3.xsl mss-transcript-phase-1.xsl
	$(SAXON) -s:$< -xsl:mss-transcript-phase-1.xsl -o:$@

$(CACHE_DIR)/lists/bib.html : $(BIB_DIR)/Bibliographie_Capitularia.xml bib-bibliography.xsl
	$(SAXON) -s:$< -xsl:bib-bibliography.xsl -o:$@

$(CACHE_DIR)/lists/capit-all.html : $(CAPIT_DIR)/lists/capit_all.xml capit-list.xsl common-3.xsl common-html.xsl config-3.xsl
	$(SAXON) -s:$< -xsl:capit-list.xsl -o:$@ type=all

$(CACHE_DIR)/lists/capit-ldf.html : $(CAPIT_DIR)/lists/capit_all.xml capit-list.xsl common-3.xsl common-html.xsl config-3.xsl
	$(SAXON) -s:$< -xsl:capit-list.xsl -o:$@ type=ldf

$(CACHE_DIR)/lists/capit-post840.html : $(CAPIT_DIR)/lists/capit_all.xml capit-list.xsl common-3.xsl common-html.xsl config-3.xsl
	$(SAXON) -s:$< -xsl:capit-list.xsl -o:$@ type=post840

$(CACHE_DIR)/lists/capit-pre814.html : $(CAPIT_DIR)/lists/capit_all.xml capit-list.xsl common-3.xsl common-html.xsl config-3.xsl
	$(SAXON) -s:$< -xsl:capit-list.xsl -o:$@ type=pre814

$(CACHE_DIR)/lists/capit-undated.html : $(CAPIT_DIR)/lists/capit_all.xml capit-list.xsl common-3.xsl common-html.xsl config-3.xsl
	$(SAXON) -s:$< -xsl:capit-list.xsl -o:$@ type=undated

$(CACHE_DIR)/lists/changes.html : $(CACHE_DIR)/lists/corpus.xml changes.xsl
	$(SAXON) -s:$< -xsl:changes.xsl -o:$@ prefix=A

$(CACHE_DIR)/lists/changes90.html : $(CACHE_DIR)/lists/corpus.xml changes.xsl
	$(SAXON) -s:$< -xsl:changes.xsl -o:$@ prefix=B scope=P90D

$(CACHE_DIR)/lists/downloads.html : $(CACHE_DIR)/lists/corpus.xml downloads.xsl
	$(SAXON) -s:$< -xsl:downloads.xsl -o:$@

$(CACHE_DIR)/lists/mss-key.html : $(MSS_DIR)/lists/manuscripts.xml common-3.xsl common-html.xsl config-3.xsl mss-key.xsl
	$(SAXON) -s:$< -xsl:mss-key.xsl -o:$@

$(CACHE_DIR)/lists/mss-table.html : $(MSS_DIR)/lists/ueberblick_mordek.xml common-3.xsl common-html.xsl config-3.xsl mss-table.xsl
	$(SAXON) -s:$< -xsl:mss-table.xsl -o:$@

$(CACHE_DIR)/lists/places.html : $(RES_DIR)/capitularia_place.xml allgFunktionen.xsl base_variables.xsl register_cap_places.xsl xsl-output.xsl
	$(XSLTPROC) -o $@ register_cap_places.xsl $<

$(CACHE_DIR)/mss/%.footer.html : $(MSS_DIR)/%.xml common-3.xsl common-html.xsl config-3.xsl mss-footer-3.xsl
	$(SAXON) -s:$< -xsl:mss-footer-3.xsl -o:$@

$(CACHE_DIR)/mss/%.header.html : $(MSS_DIR)/%.xml common-3.xsl common-html.xsl config-3.xsl mss-header-3.xsl
	$(SAXON) -s:$< -xsl:mss-header-3.xsl -o:$@

$(CACHE_DIR)/mss/%.transcript.commented.html : $(MSS_DIR)/%.xml base_variables.xsl common.xsl mss-transcript-footnotes.xsl mss-transcript-with-comments.xsl mss-transcript.xsl
	$(XSLTPROC) -o $@ mss-transcript-with-comments.xsl $<

$(CACHE_DIR)/mss/%.transcript.html : $(CACHE_DIR)/mss/%.transcript.phase-1.xml common-3.xsl common-html.xsl config-3.xsl mss-transcript-phase-2.xsl
	$(SAXON) -s:$< -xsl:mss-transcript-phase-2.xsl -o:$@

$(CACHE_DIR)/mss/%.transcript.phase-1.xml : $(MSS_DIR)/%.xml common-3.xsl mss-transcript-phase-1.xsl
	$(SAXON) -s:$< -xsl:mss-transcript-phase-1.xsl -o:$@

$(CACHE_DIR)/mss/cte-137-de.html : $(MSS_DIR)/texts/137.xml base_variables.xsl common.xsl mss-transcript-cte.xsl mss-transcript-footnotes.xsl mss-transcript.xsl
	$(XSLTPROC) --stringparam title Ãœbersetzung -o $@ mss-transcript-cte.xsl $<

$(CACHE_DIR)/mss/cte-137.html : $(MSS_DIR)/texts/137.xml base_variables.xsl common.xsl mss-transcript-cte.xsl mss-transcript-footnotes.xsl mss-transcript.xsl
	$(XSLTPROC) --stringparam title Edition -o $@ mss-transcript-cte.xsl $<


#
# unhandled file dependencies
#

# $(CACHE_DIR)/lists/corpus.xml : $(MSS_DIR)/%.xml corpus.xsl
# $(CACHE_DIR)/lists/mss-capit.html : $(MSS_DIR)/lists/manuscripts.xml mss-capit.xsl common-3.xsl common-html.xsl config-3.xsl
# $(CACHE_DIR)/lists/mss-capit.html : $(MSS_DIR)/lists/mss_by_cap.xml mss-capit.xsl common-3.xsl common-html.xsl config-3.xsl
# $(CACHE_DIR)/lists/mss-idno.html : $(MSS_DIR)/lists/manuscripts.xml mss-idno.xsl common-html.xsl config-3.xsl common-3.xsl
# $(CACHE_DIR)/lists/mss-idno.html : $(CACHE_DIR)/lists/corpus.xml mss-idno.xsl common-html.xsl config-3.xsl common-3.xsl
# $(MSS_PRIV_DIR)/%-toc.xml : $(MSS_PRIV_DIR)/%.xml generate_toc.xsl

#
# targets
#

# capits : $(CACHE_DIR)/capits/ldf/%.html
# capits : $(CACHE_DIR)/capits/post840/%.html
# capits : $(CACHE_DIR)/capits/pre814/%.html
# capits : $(CACHE_DIR)/capits/undated/%.html
# collation : $(CACHE_DIR)/collation/%.xml
# extraction : $(CACHE_DIR)/extracted/%.xml
lists : $(CACHE_DIR)/lists/bib.html
lists : $(CACHE_DIR)/lists/capit-all.html
lists : $(CACHE_DIR)/lists/capit-ldf.html
lists : $(CACHE_DIR)/lists/capit-post840.html
lists : $(CACHE_DIR)/lists/capit-pre814.html
lists : $(CACHE_DIR)/lists/capit-undated.html
lists : $(CACHE_DIR)/lists/changes.html
lists : $(CACHE_DIR)/lists/changes90.html
lists : $(CACHE_DIR)/lists/downloads.html
lists : $(CACHE_DIR)/lists/mss-capit.html
lists : $(CACHE_DIR)/lists/mss-idno.html
lists : $(CACHE_DIR)/lists/mss-key.html
lists : $(CACHE_DIR)/lists/mss-table.html
# mss : $(CACHE_DIR)/mss/%.footer.html
# mss : $(CACHE_DIR)/mss/%.header.html
# mss : $(CACHE_DIR)/mss/%.transcript.commented.html
# mss : $(CACHE_DIR)/mss/%.transcript.html
mss : $(CACHE_DIR)/mss/cte-137-de.html
mss : $(CACHE_DIR)/mss/cte-137.html
# mss_priv : $(CACHE_DIR)/internal/mss/%.footer.html
# mss_priv : $(CACHE_DIR)/internal/mss/%.header.html
# mss_priv : $(CACHE_DIR)/internal/mss/%.transcript.html
